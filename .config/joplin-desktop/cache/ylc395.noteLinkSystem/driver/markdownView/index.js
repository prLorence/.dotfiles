exports.default=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(1)),l=i(n(4)),s=n(5);t.default=function(){return{plugin:e=>e.use(r.default,s.MAKRDOWN_IT_ATTRS_CONFIG).use(l.default),assets:function(){return[{name:"webview/index.js"},{name:"webview/style.css"}]}}}},function(e,t,n){"use strict";const i=n(2),r={leftDelimiter:"{",rightDelimiter:"}",allowedAttributes:[]};function l(e,t,n){let i={match:!1,j:null},r=void 0!==n.shift?t+n.shift:n.position,a=(f=e,(h=r)>=0?f[h]:f[f.length+h]);var f,h;if(void 0===a)return i;for(let e in n)if("shift"!==e&&"position"!==e){if(void 0===a[e])return i;if("children"===e&&s(n.children)){if(0===a.children.length)return i;let e,t=n.children,r=a.children;if(t.every(e=>void 0!==e.position)){if(e=t.every(e=>l(r,e.position,e).match),e){let e=c(t).position;i.j=e>=0?e:r.length+e}}else for(let n=0;n<r.length;n++)if(e=t.every(e=>l(r,n,e).match),e){i.j=n;break}if(!1===e)return i}else switch(typeof n[e]){case"boolean":case"number":case"string":if(a[e]!==n[e])return i;break;case"function":if(!n[e](a[e]))return i;break;case"object":if(o(n[e])){if(!1===n[e].every(t=>t(a[e])))return i;break}default:throw new Error(`Unknown type of pattern test (key: ${e}). Test should be of type boolean, number, string, function or array of functions.`)}}return i.match=!0,i}function s(e){return Array.isArray(e)&&e.length&&e.every(e=>"object"==typeof e)}function o(e){return Array.isArray(e)&&e.length&&e.every(e=>"function"==typeof e)}function c(e){return e.slice(-1)[0]||{}}e.exports=function(e,t){let n=Object.assign({},r);n=Object.assign(n,t);const s=i(n);e.core.ruler.before("linkify","curly_attributes",(function(e){let t=e.tokens;for(let e=0;e<t.length;e++)for(let n=0;n<s.length;n++){let i=s[n],r=null;i.tests.every(n=>{let i=l(t,e,n);return null!==i.j&&(r=i.j),i.match})&&(i.transform(t,e,r),"inline attributes"!==i.name&&"inline nesting 0"!==i.name||n--)}}))}},function(e,t,n){"use strict";const i=n(3);function r(e){return e.slice(-1)[0]}e.exports=e=>{const t=new RegExp("^ {0,3}[-*_]{3,} ?"+i.escapeRegExp(e.leftDelimiter)+"[^"+i.escapeRegExp(e.rightDelimiter)+"]");return[{name:"fenced code blocks",tests:[{shift:0,block:!0,info:i.hasDelimiters("end",e)}],transform:(t,n)=>{let r=t[n],l=r.info.lastIndexOf(e.leftDelimiter),s=i.getAttrs(r.info,l,e);i.addAttrs(s,r),r.info=i.removeDelimiter(r.info,e)}},{name:"inline nesting 0",tests:[{shift:0,type:"inline",children:[{shift:-1,type:e=>"image"===e||"code_inline"===e},{shift:0,type:"text",content:i.hasDelimiters("start",e)}]}],transform:(t,n,r)=>{let l=t[n].children[r],s=l.content.indexOf(e.rightDelimiter),o=t[n].children[r-1],c=i.getAttrs(l.content,0,e);i.addAttrs(c,o),l.content.length===s+e.rightDelimiter.length?t[n].children.splice(r,1):l.content=l.content.slice(s+e.rightDelimiter.length)}},{name:"tables",tests:[{shift:0,type:"table_close"},{shift:1,type:"paragraph_open"},{shift:2,type:"inline",content:i.hasDelimiters("only",e)}],transform:(t,n)=>{let r=t[n+2],l=i.getMatchingOpeningToken(t,n),s=i.getAttrs(r.content,0,e);i.addAttrs(s,l),t.splice(n+1,3)}},{name:"inline attributes",tests:[{shift:0,type:"inline",children:[{shift:-1,nesting:-1},{shift:0,type:"text",content:i.hasDelimiters("start",e)}]}],transform:(t,n,r)=>{let l=t[n].children[r],s=l.content,o=i.getAttrs(s,0,e),c=i.getMatchingOpeningToken(t[n].children,r-1);i.addAttrs(o,c),l.content=s.slice(s.indexOf(e.rightDelimiter)+e.rightDelimiter.length)}},{name:"list softbreak",tests:[{shift:-2,type:"list_item_open"},{shift:0,type:"inline",children:[{position:-2,type:"softbreak"},{position:-1,type:"text",content:i.hasDelimiters("only",e)}]}],transform:(t,n,r)=>{let l=t[n].children[r].content,s=i.getAttrs(l,0,e),o=n-2;for(;t[o-1]&&"ordered_list_open"!==t[o-1].type&&"bullet_list_open"!==t[o-1].type;)o--;i.addAttrs(s,t[o-1]),t[n].children=t[n].children.slice(0,-2)}},{name:"list double softbreak",tests:[{shift:0,type:e=>"bullet_list_close"===e||"ordered_list_close"===e},{shift:1,type:"paragraph_open"},{shift:2,type:"inline",content:i.hasDelimiters("only",e),children:e=>1===e.length},{shift:3,type:"paragraph_close"}],transform:(t,n)=>{let r=t[n+2].content,l=i.getAttrs(r,0,e),s=i.getMatchingOpeningToken(t,n);i.addAttrs(l,s),t.splice(n+1,3)}},{name:"list item end",tests:[{shift:-2,type:"list_item_open"},{shift:0,type:"inline",children:[{position:-1,type:"text",content:i.hasDelimiters("end",e)}]}],transform:(t,n,l)=>{let s=t[n].children[l],o=s.content,c=i.getAttrs(o,o.lastIndexOf(e.leftDelimiter),e);i.addAttrs(c,t[n-2]);let a=o.slice(0,o.lastIndexOf(e.leftDelimiter));s.content=" "!==r(a)?a:a.slice(0,-1)}},{name:"\n{.a} softbreak then curly in start",tests:[{shift:0,type:"inline",children:[{position:-2,type:"softbreak"},{position:-1,type:"text",content:i.hasDelimiters("only",e)}]}],transform:(t,n,r)=>{let l=t[n].children[r],s=i.getAttrs(l.content,0,e),o=n+1;for(;t[o+1]&&-1===t[o+1].nesting;)o++;let c=i.getMatchingOpeningToken(t,o);i.addAttrs(s,c),t[n].children=t[n].children.slice(0,-2)}},{name:"horizontal rule",tests:[{shift:0,type:"paragraph_open"},{shift:1,type:"inline",children:e=>1===e.length,content:e=>null!==e.match(t)},{shift:2,type:"paragraph_close"}],transform:(t,n)=>{let r=t[n];r.type="hr",r.tag="hr",r.nesting=0;let l=t[n+1].content,s=l.lastIndexOf(e.leftDelimiter);r.attrs=i.getAttrs(l,s,e),r.markup=l,t.splice(n+1,2)}},{name:"end of block",tests:[{shift:0,type:"inline",children:[{position:-1,content:i.hasDelimiters("end",e),type:e=>"code_inline"!==e&&"math_inline"!==e}]}],transform:(t,n,l)=>{let s=t[n].children[l],o=s.content,c=i.getAttrs(o,o.lastIndexOf(e.leftDelimiter),e),a=n+1;for(;t[a+1]&&-1===t[a+1].nesting;)a++;let f=i.getMatchingOpeningToken(t,a);i.addAttrs(c,f);let h=o.slice(0,o.lastIndexOf(e.leftDelimiter));s.content=" "!==r(h)?h:h.slice(0,-1)}}]}},function(e,t,n){"use strict";function i(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}t.getAttrs=function(e,t,n){const i=/[^\t\n\f />"'=]/,r=[];let l="",s="",o=!0,c=!1;for(let a=t+n.leftDelimiter.length;a<e.length;a++){if(e.slice(a,a+n.rightDelimiter.length)===n.rightDelimiter){""!==l&&r.push([l,s]);break}let t=e.charAt(a);if("="===t&&o)o=!1;else if("."!==t||""!==l)if("#"!==t||""!==l)if('"'!==t||""!==s)if('"'===t&&c)c=!1;else if(" "!==t||c)o&&-1===t.search(i)||(o?l+=t:s+=t);else{if(""===l)continue;r.push([l,s]),l="",s="",o=!0}else c=!0;else l="id",o=!1;else"."===e.charAt(a+1)?(l="css-module",a+=1):l="class",o=!1}if(n.allowedAttributes&&n.allowedAttributes.length){let e=n.allowedAttributes;return r.filter((function(t){let n=t[0];return e.some((function(e){return n===e||e instanceof RegExp&&e.test(n)}))}))}return r},t.addAttrs=function(e,t){for(let n=0,i=e.length;n<i;++n){let i=e[n][0];"class"===i?t.attrJoin("class",e[n][1]):"css-module"===i?t.attrJoin("css-module",e[n][1]):t.attrPush(e[n])}return t},t.hasDelimiters=function(e,t){if(!e)throw new Error('Parameter `where` not passed. Should be "start", "middle", "end" or "only".');return function(n){let i,r,l,s,o=t.leftDelimiter.length+1+t.rightDelimiter.length;if(!n||"string"!=typeof n||n.length<o)return!1;let c=o-t.rightDelimiter.length;switch(e){case"start":l=n.slice(0,t.leftDelimiter.length),i=l===t.leftDelimiter?0:-1,r=-1===i?-1:n.indexOf(t.rightDelimiter,c),s=n.charAt(r+t.rightDelimiter.length),s&&-1!==t.rightDelimiter.indexOf(s)&&(r=-1);break;case"end":i=n.lastIndexOf(t.leftDelimiter),r=-1===i?-1:n.indexOf(t.rightDelimiter,i+c),r=r===n.length-t.rightDelimiter.length?r:-1;break;case"only":l=n.slice(0,t.leftDelimiter.length),i=l===t.leftDelimiter?0:-1,l=n.slice(n.length-t.rightDelimiter.length),r=l===t.rightDelimiter?n.length-t.rightDelimiter.length:-1}return-1!==i&&-1!==r&&function(e){let n="."===e.charAt(t.leftDelimiter.length),i="#"===e.charAt(t.leftDelimiter.length);return n||i?e.length>=o+1:e.length>=o}(n.substring(i,r+t.rightDelimiter.length))}},t.removeDelimiter=function(e,t){const n=i(t.leftDelimiter),r=i(t.rightDelimiter);let l=new RegExp("[ \\n]?"+n+"[^"+n+r+"]+"+r+"$"),s=e.search(l);return-1!==s?e.slice(0,s):e},t.escapeRegExp=i,t.getMatchingOpeningToken=function(e,t){if("softbreak"===e[t].type)return!1;if(0===e[t].nesting)return e[t];let n=e[t].level,i=e[t].type.replace("_close","_open");for(;t>=0;--t)if(e[t].type===i&&e[t].level===n)return e[t]};let r=/[&<>"]/,l=/[&<>"]/g,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function o(e){return s[e]}t.escapeHtml=function(e){return r.test(e)?e.replace(l,o):e}},function(e,t,n){"use strict";e.exports=function(e){e.inline.ruler.push("bracketed-spans",(function(e){var t=e.posMax;if(91!==e.src.charCodeAt(e.pos))return!1;var n=e.pos+1,i=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(i<0)return!1;var r=i+1;return r<t&&123===e.src.charCodeAt(r)&&(e.pos=n,e.posMax=i,e.push("span_open","span",1),e.md.inline.tokenize(e),e.push("span_close","span",-1),e.pos=r,e.posMax=t,!0)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAKRDOWN_IT_ATTRS_CONFIG=void 0,t.MAKRDOWN_IT_ATTRS_CONFIG={allowedAttributes:["id"]}}]).default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZWZhdWx0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2RlZmF1bHQvLi9zcmMvZHJpdmVyL21hcmtkb3duVmlldy9pbmRleC50cyIsIndlYnBhY2s6Ly9kZWZhdWx0Ly4vbm9kZV9tb2R1bGVzL21hcmtkb3duLWl0LWF0dHJzL2luZGV4LmpzIiwid2VicGFjazovL2RlZmF1bHQvLi9ub2RlX21vZHVsZXMvbWFya2Rvd24taXQtYXR0cnMvcGF0dGVybnMuanMiLCJ3ZWJwYWNrOi8vZGVmYXVsdC8uL25vZGVfbW9kdWxlcy9tYXJrZG93bi1pdC1hdHRycy91dGlscy5qcyIsIndlYnBhY2s6Ly9kZWZhdWx0Ly4vbm9kZV9tb2R1bGVzL21hcmtkb3duLWl0LWJyYWNrZXRlZC1zcGFucy9pbmRleC5qcyIsIndlYnBhY2s6Ly9kZWZhdWx0Ly4vc3JjL2RyaXZlci9tYXJrZG93blZpZXcvbWFya2Rvd25Db25maWcudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJwbHVnaW4iLCJtYXJrZG93bkl0IiwidXNlIiwiTUFLUkRPV05fSVRfQVRUUlNfQ09ORklHIiwiYXNzZXRzIiwicGF0dGVybnNDb25maWciLCJkZWZhdWx0T3B0aW9ucyIsImxlZnREZWxpbWl0ZXIiLCJyaWdodERlbGltaXRlciIsImFsbG93ZWRBdHRyaWJ1dGVzIiwidGVzdCIsInRva2VucyIsInJlcyIsIm1hdGNoIiwiaiIsImlpIiwidW5kZWZpbmVkIiwic2hpZnQiLCJwb3NpdGlvbiIsInRva2VuIiwiYXJyIiwibGVuZ3RoIiwiaXNBcnJheU9mT2JqZWN0cyIsImNoaWxkcmVuIiwiY2hpbGRUZXN0cyIsImV2ZXJ5IiwidHQiLCJsYXN0IiwiaXNBcnJheU9mRnVuY3Rpb25zIiwiRXJyb3IiLCJBcnJheSIsImlzQXJyYXkiLCJzbGljZSIsIm1kIiwib3B0aW9uc18iLCJvcHRpb25zIiwiYXNzaWduIiwicGF0dGVybnMiLCJjb3JlIiwicnVsZXIiLCJiZWZvcmUiLCJzdGF0ZSIsInBhdHRlcm4iLCJ0ZXN0cyIsInRyYW5zZm9ybSIsInV0aWxzIiwiX19ociIsIlJlZ0V4cCIsImVzY2FwZVJlZ0V4cCIsImJsb2NrIiwiaW5mbyIsImhhc0RlbGltaXRlcnMiLCJzdGFydCIsImxhc3RJbmRleE9mIiwiYXR0cnMiLCJnZXRBdHRycyIsImFkZEF0dHJzIiwicmVtb3ZlRGVsaW1pdGVyIiwidHlwZSIsInN0ciIsImNvbnRlbnQiLCJlbmRDaGFyIiwiaW5kZXhPZiIsImF0dHJUb2tlbiIsInNwbGljZSIsInRhYmxlT3BlbiIsImdldE1hdGNoaW5nT3BlbmluZ1Rva2VuIiwibmVzdGluZyIsIm9wZW5pbmdUb2tlbiIsInRyaW1tZWQiLCJ0YWciLCJtYXJrdXAiLCJyZXBsYWNlIiwiYWxsb3dlZEtleUNoYXJzIiwicGFyc2luZ0tleSIsInZhbHVlSW5zaWRlUXVvdGVzIiwicHVzaCIsImNoYXJfIiwiY2hhckF0Iiwic2VhcmNoIiwiZmlsdGVyIiwiYXR0clBhaXIiLCJhdHRyIiwic29tZSIsImFsbG93ZWRBdHRyaWJ1dGUiLCJhdHRySm9pbiIsImF0dHJQdXNoIiwid2hlcmUiLCJlbmQiLCJuZXh0Q2hhciIsIm1pbkN1cmx5TGVuZ3RoIiwicmlnaHREZWxpbWl0ZXJNaW5pbXVtU2hpZnQiLCJjdXJseSIsImlzQ2xhc3MiLCJpc0lkIiwidmFsaWRDdXJseUxlbmd0aCIsInN1YnN0cmluZyIsInBvcyIsImxldmVsIiwiSFRNTF9FU0NBUEVfVEVTVF9SRSIsIkhUTUxfRVNDQVBFX1JFUExBQ0VfUkUiLCJIVE1MX1JFUExBQ0VNRU5UUyIsInJlcGxhY2VVbnNhZmVDaGFyIiwiY2giLCJlc2NhcGVIdG1sIiwiaW5saW5lIiwibWF4IiwicG9zTWF4Iiwic3JjIiwiY2hhckNvZGVBdCIsImxhYmVsU3RhcnQiLCJsYWJlbEVuZCIsImhlbHBlcnMiLCJwYXJzZUxpbmtMYWJlbCIsInRva2VuaXplIl0sIm1hcHBpbmdzIjoiNEJBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBMERmLE9BckRBRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0Ys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LEVBQXNCLFNBQ3RCQyxFQUF5QixVQUN6QkMsRUFBb0IsQ0FDdEIsSUFBSyxRQUNMLElBQUssT0FDTCxJQUFLLE9BQ0wsSUFBSyxVQUdQLFNBQVNDLEVBQWtCQyxHQUN6QixPQUFPRixFQUFrQkUsR0FHM0J6SSxFQUFRMEksV0FBYSxTQUFVN0MsR0FDN0IsT0FBSXdDLEVBQW9CekYsS0FBS2lELEdBQ3BCQSxFQUFJYSxRQUFRNEIsRUFBd0JFLEdBRXRDM0MsSSw2QkMvUVQ1RixFQUFPRCxRQUFVLFNBQWdDbUUsR0FxQy9DQSxFQUFHd0UsT0FBT2xFLE1BQU1xQyxLQUFLLG1CQW5DckIsU0FBY25DLEdBQ1osSUFBSWlFLEVBQU1qRSxFQUFNa0UsT0FFaEIsR0FBd0MsS0FBcENsRSxFQUFNbUUsSUFBSUMsV0FBV3BFLEVBQU13RCxLQUU3QixPQUFPLEVBR1QsSUFBSWEsRUFBYXJFLEVBQU13RCxJQUFNLEVBQ3pCYyxFQUFhdEUsRUFBTVIsR0FBRytFLFFBQVFDLGVBQWV4RSxFQUFPQSxFQUFNd0QsS0FBSyxHQUVuRSxHQUFJYyxFQUFXLEVBRWIsT0FBTyxFQUdULElBQUlkLEVBQU1jLEVBQVcsRUFDckIsT0FBSWQsRUFBTVMsR0FBcUMsTUFBOUJqRSxFQUFNbUUsSUFBSUMsV0FBV1osS0FHcEN4RCxFQUFNd0QsSUFBTWEsRUFDWnJFLEVBQU1rRSxPQUFTSSxFQUVmdEUsRUFBTW1DLEtBQUssWUFBYSxPQUFRLEdBQ2hDbkMsRUFBTVIsR0FBR3dFLE9BQU9TLFNBQVN6RSxHQUN6QkEsRUFBTW1DLEtBQUssYUFBYyxRQUFTLEdBRWxDbkMsRUFBTXdELElBQU1BLEVBQ1p4RCxFQUFNa0UsT0FBU0QsR0FDUixRLGdIQ2pDQSxFQUFBdkcseUJBQTJCLENBQ3RDTSxrQkFBbUIsQ0FBQyxVIiwiZmlsZSI6ImRyaXZlci9tYXJrZG93blZpZXcvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgdHlwZSBNYXJrZG93bkl0IGZyb20gJ21hcmtkb3duLWl0JztcbmltcG9ydCBtYXJrZG93bkl0QXR0cnMgZnJvbSAnbWFya2Rvd24taXQtYXR0cnMnO1xuaW1wb3J0IG1hcmtkb3duSXRCcmFja2V0ZWRTcGFucyBmcm9tICdtYXJrZG93bi1pdC1icmFja2V0ZWQtc3BhbnMnO1xuaW1wb3J0IHsgTUFLUkRPV05fSVRfQVRUUlNfQ09ORklHIH0gZnJvbSAnLi9tYXJrZG93bkNvbmZpZyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBwbHVnaW46IChtYXJrZG93bkl0OiBNYXJrZG93bkl0KSA9PlxuICAgICAgbWFya2Rvd25JdC51c2UobWFya2Rvd25JdEF0dHJzLCBNQUtSRE9XTl9JVF9BVFRSU19DT05GSUcpLnVzZShtYXJrZG93bkl0QnJhY2tldGVkU3BhbnMpLFxuICAgIGFzc2V0czogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIFt7IG5hbWU6ICd3ZWJ2aWV3L2luZGV4LmpzJyB9LCB7IG5hbWU6ICd3ZWJ2aWV3L3N0eWxlLmNzcycgfV07XG4gICAgfSxcbiAgfTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgcGF0dGVybnNDb25maWcgPSByZXF1aXJlKCcuL3BhdHRlcm5zLmpzJyk7XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICBsZWZ0RGVsaW1pdGVyOiAneycsXG4gIHJpZ2h0RGVsaW1pdGVyOiAnfScsXG4gIGFsbG93ZWRBdHRyaWJ1dGVzOiBbXVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhdHRyaWJ1dGVzKG1kLCBvcHRpb25zXykge1xuICBsZXQgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zKTtcbiAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24ob3B0aW9ucywgb3B0aW9uc18pO1xuXG4gIGNvbnN0IHBhdHRlcm5zID0gcGF0dGVybnNDb25maWcob3B0aW9ucyk7XG5cbiAgZnVuY3Rpb24gY3VybHlBdHRycyhzdGF0ZSkge1xuICAgIGxldCB0b2tlbnMgPSBzdGF0ZS50b2tlbnM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCBwYXR0ZXJucy5sZW5ndGg7IHArKykge1xuICAgICAgICBsZXQgcGF0dGVybiA9IHBhdHRlcm5zW3BdO1xuICAgICAgICBsZXQgaiA9IG51bGw7IC8vIHBvc2l0aW9uIG9mIGNoaWxkIHdpdGggb2Zmc2V0IDBcbiAgICAgICAgbGV0IG1hdGNoID0gcGF0dGVybi50ZXN0cy5ldmVyeSh0ID0+IHtcbiAgICAgICAgICBsZXQgcmVzID0gdGVzdCh0b2tlbnMsIGksIHQpO1xuICAgICAgICAgIGlmIChyZXMuaiAhPT0gbnVsbCkgeyBqID0gcmVzLmo7IH1cbiAgICAgICAgICByZXR1cm4gcmVzLm1hdGNoO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgcGF0dGVybi50cmFuc2Zvcm0odG9rZW5zLCBpLCBqKTtcbiAgICAgICAgICBpZiAocGF0dGVybi5uYW1lID09PSAnaW5saW5lIGF0dHJpYnV0ZXMnIHx8IHBhdHRlcm4ubmFtZSA9PT0gJ2lubGluZSBuZXN0aW5nIDAnKSB7XG4gICAgICAgICAgICAvLyByZXRyeSwgbWF5IGJlIHNldmVyYWwgaW5saW5lIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIHAtLTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBtZC5jb3JlLnJ1bGVyLmJlZm9yZSgnbGlua2lmeScsICdjdXJseV9hdHRyaWJ1dGVzJywgY3VybHlBdHRycyk7XG59O1xuXG4vKipcbiAqIFRlc3QgaWYgdCBtYXRjaGVzIHRva2VuIHN0cmVhbS5cbiAqXG4gKiBAcGFyYW0ge2FycmF5fSB0b2tlbnNcbiAqIEBwYXJhbSB7bnVtYmVyfSBpXG4gKiBAcGFyYW0ge29iamVjdH0gdCBUZXN0IHRvIG1hdGNoLlxuICogQHJldHVybiB7b2JqZWN0fSB7IG1hdGNoOiB0cnVlfGZhbHNlLCBqOiBudWxsfG51bWJlciB9XG4gKi9cbmZ1bmN0aW9uIHRlc3QodG9rZW5zLCBpLCB0KSB7XG4gIGxldCByZXMgPSB7XG4gICAgbWF0Y2g6IGZhbHNlLFxuICAgIGo6IG51bGwgIC8vIHBvc2l0aW9uIG9mIGNoaWxkXG4gIH07XG5cbiAgbGV0IGlpID0gdC5zaGlmdCAhPT0gdW5kZWZpbmVkXG4gICAgPyBpICsgdC5zaGlmdFxuICAgIDogdC5wb3NpdGlvbjtcbiAgbGV0IHRva2VuID0gZ2V0KHRva2VucywgaWkpOyAgLy8gc3VwcG9ydHMgbmVnYXRpdmUgaWlcblxuXG4gIGlmICh0b2tlbiA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiByZXM7IH1cblxuICBmb3IgKGxldCBrZXkgaW4gdCkge1xuICAgIGlmIChrZXkgPT09ICdzaGlmdCcgfHwga2V5ID09PSAncG9zaXRpb24nKSB7IGNvbnRpbnVlOyB9XG5cbiAgICBpZiAodG9rZW5ba2V5XSA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiByZXM7IH1cblxuICAgIGlmIChrZXkgPT09ICdjaGlsZHJlbicgJiYgaXNBcnJheU9mT2JqZWN0cyh0LmNoaWxkcmVuKSkge1xuICAgICAgaWYgKHRva2VuLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfVxuICAgICAgbGV0IG1hdGNoO1xuICAgICAgbGV0IGNoaWxkVGVzdHMgPSB0LmNoaWxkcmVuO1xuICAgICAgbGV0IGNoaWxkcmVuID0gdG9rZW4uY2hpbGRyZW47XG4gICAgICBpZiAoY2hpbGRUZXN0cy5ldmVyeSh0dCA9PiB0dC5wb3NpdGlvbiAhPT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAvLyBwb3NpdGlvbnMgaW5zdGVhZCBvZiBzaGlmdHMsIGRvIG5vdCBsb29wIGFsbCBjaGlsZHJlblxuICAgICAgICBtYXRjaCA9IGNoaWxkVGVzdHMuZXZlcnkodHQgPT4gdGVzdChjaGlsZHJlbiwgdHQucG9zaXRpb24sIHR0KS5tYXRjaCk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIC8vIHdlIG1heSBuZWVkIHBvc2l0aW9uIG9mIGNoaWxkIGluIHRyYW5zZm9ybVxuICAgICAgICAgIGxldCBqID0gbGFzdChjaGlsZFRlc3RzKS5wb3NpdGlvbjtcbiAgICAgICAgICByZXMuaiA9IGogPj0gMCA/IGogOiBjaGlsZHJlbi5sZW5ndGggKyBqO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgbWF0Y2ggPSBjaGlsZFRlc3RzLmV2ZXJ5KHR0ID0+IHRlc3QoY2hpbGRyZW4sIGosIHR0KS5tYXRjaCk7XG4gICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICByZXMuaiA9IGo7XG4gICAgICAgICAgICAvLyBhbGwgdGVzdHMgdHJ1ZSwgY29udGludWUgd2l0aCBuZXh0IGtleSBvZiBwYXR0ZXJuIHRcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobWF0Y2ggPT09IGZhbHNlKSB7IHJldHVybiByZXM7IH1cblxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlb2YgdFtrZXldKSB7XG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgaWYgKHRva2VuW2tleV0gIT09IHRba2V5XSkgeyByZXR1cm4gcmVzOyB9XG4gICAgICBicmVhaztcbiAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICBpZiAoIXRba2V5XSh0b2tlbltrZXldKSkgeyByZXR1cm4gcmVzOyB9XG4gICAgICBicmVhaztcbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAgaWYgKGlzQXJyYXlPZkZ1bmN0aW9ucyh0W2tleV0pKSB7XG4gICAgICAgIGxldCByID0gdFtrZXldLmV2ZXJ5KHR0ID0+IHR0KHRva2VuW2tleV0pKTtcbiAgICAgICAgaWYgKHIgPT09IGZhbHNlKSB7IHJldHVybiByZXM7IH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgLy8gZmFsbCB0aHJvdWdoIGZvciBvYmplY3RzICE9PSBhcnJheXMgb2YgZnVuY3Rpb25zXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biB0eXBlIG9mIHBhdHRlcm4gdGVzdCAoa2V5OiAke2tleX0pLiBUZXN0IHNob3VsZCBiZSBvZiB0eXBlIGJvb2xlYW4sIG51bWJlciwgc3RyaW5nLCBmdW5jdGlvbiBvciBhcnJheSBvZiBmdW5jdGlvbnMuYCk7XG4gICAgfVxuICB9XG5cbiAgLy8gbm8gdGVzdHMgcmV0dXJuZWQgZmFsc2UgLT4gYWxsIHRlc3RzIHJldHVybnMgdHJ1ZVxuICByZXMubWF0Y2ggPSB0cnVlO1xuICByZXR1cm4gcmVzO1xufVxuXG5mdW5jdGlvbiBpc0FycmF5T2ZPYmplY3RzKGFycikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpICYmIGFyci5sZW5ndGggJiYgYXJyLmV2ZXJ5KGkgPT4gdHlwZW9mIGkgPT09ICdvYmplY3QnKTtcbn1cblxuZnVuY3Rpb24gaXNBcnJheU9mRnVuY3Rpb25zKGFycikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpICYmIGFyci5sZW5ndGggJiYgYXJyLmV2ZXJ5KGkgPT4gdHlwZW9mIGkgPT09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIEdldCBuIGl0ZW0gb2YgYXJyYXkuIFN1cHBvcnRzIG5lZ2F0aXZlIG4sIHdoZXJlIC0xIGlzIGxhc3RcbiAqIGVsZW1lbnQgaW4gYXJyYXkuXG4gKiBAcGFyYW0ge2FycmF5fSBhcnJcbiAqIEBwYXJhbSB7bnVtYmVyfSBuXG4gKi9cbmZ1bmN0aW9uIGdldChhcnIsIG4pIHtcbiAgcmV0dXJuIG4gPj0gMCA/IGFycltuXSA6IGFyclthcnIubGVuZ3RoICsgbl07XG59XG5cbi8vIGdldCBsYXN0IGVsZW1lbnQgb2YgYXJyYXksIHNhZmUgLSByZXR1cm5zIHt9IGlmIG5vdCBmb3VuZFxuZnVuY3Rpb24gbGFzdChhcnIpIHtcbiAgcmV0dXJuIGFyci5zbGljZSgtMSlbMF0gfHwge307XG59XG4iLCIndXNlIHN0cmljdCc7XG4vKipcbiAqIElmIGEgcGF0dGVybiBtYXRjaGVzIHRoZSB0b2tlbiBzdHJlYW0sXG4gKiB0aGVuIHJ1biB0cmFuc2Zvcm0uXG4gKi9cblxuY29uc3QgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gb3B0aW9ucyA9PiB7XG4gIGNvbnN0IF9faHIgPSBuZXcgUmVnRXhwKCdeIHswLDN9Wy0qX117Myx9ID8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICsgdXRpbHMuZXNjYXBlUmVnRXhwKG9wdGlvbnMubGVmdERlbGltaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnW14nICsgdXRpbHMuZXNjYXBlUmVnRXhwKG9wdGlvbnMucmlnaHREZWxpbWl0ZXIpICsgJ10nKTtcblxuICByZXR1cm4gKFtcbiAgICB7XG4gICAgICAvKipcbiAgICAgICAqIGBgYHB5dGhvbiB7LmNsc31cbiAgICAgICAqIGZvciBpIGluIHJhbmdlKDEwKTpcbiAgICAgICAqICAgICBwcmludChpKVxuICAgICAgICogYGBgXG4gICAgICAgKi9cbiAgICAgIG5hbWU6ICdmZW5jZWQgY29kZSBibG9ja3MnLFxuICAgICAgdGVzdHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHNoaWZ0OiAwLFxuICAgICAgICAgIGJsb2NrOiB0cnVlLFxuICAgICAgICAgIGluZm86IHV0aWxzLmhhc0RlbGltaXRlcnMoJ2VuZCcsIG9wdGlvbnMpXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0cmFuc2Zvcm06ICh0b2tlbnMsIGkpID0+IHtcbiAgICAgICAgbGV0IHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgICBsZXQgc3RhcnQgPSB0b2tlbi5pbmZvLmxhc3RJbmRleE9mKG9wdGlvbnMubGVmdERlbGltaXRlcik7XG4gICAgICAgIGxldCBhdHRycyA9IHV0aWxzLmdldEF0dHJzKHRva2VuLmluZm8sIHN0YXJ0LCBvcHRpb25zKTtcbiAgICAgICAgdXRpbHMuYWRkQXR0cnMoYXR0cnMsIHRva2VuKTtcbiAgICAgICAgdG9rZW4uaW5mbyA9IHV0aWxzLnJlbW92ZURlbGltaXRlcih0b2tlbi5pbmZvLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICAvKipcbiAgICAgICAqIGJsYSBgY2xpY2soKWB7LmN9ICFbXShpbWcucG5nKXsuZH1cbiAgICAgICAqXG4gICAgICAgKiBkaWZmZXJzIGZyb20gJ2lubGluZSBhdHRyaWJ1dGVzJyBhcyBpdCBkb2VzXG4gICAgICAgKiBub3QgaGF2ZSBhIGNsb3NpbmcgdGFnIChuZXN0aW5nOiAtMSlcbiAgICAgICAqL1xuICAgICAgbmFtZTogJ2lubGluZSBuZXN0aW5nIDAnLFxuICAgICAgdGVzdHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHNoaWZ0OiAwLFxuICAgICAgICAgIHR5cGU6ICdpbmxpbmUnLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNoaWZ0OiAtMSxcbiAgICAgICAgICAgICAgdHlwZTogKHN0cikgPT4gc3RyID09PSAnaW1hZ2UnIHx8IHN0ciA9PT0gJ2NvZGVfaW5saW5lJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBzaGlmdDogMCxcbiAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICBjb250ZW50OiB1dGlscy5oYXNEZWxpbWl0ZXJzKCdzdGFydCcsIG9wdGlvbnMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgdHJhbnNmb3JtOiAodG9rZW5zLCBpLCBqKSA9PiB7XG4gICAgICAgIGxldCB0b2tlbiA9IHRva2Vuc1tpXS5jaGlsZHJlbltqXTtcbiAgICAgICAgbGV0IGVuZENoYXIgPSB0b2tlbi5jb250ZW50LmluZGV4T2Yob3B0aW9ucy5yaWdodERlbGltaXRlcik7XG4gICAgICAgIGxldCBhdHRyVG9rZW4gPSB0b2tlbnNbaV0uY2hpbGRyZW5baiAtIDFdO1xuICAgICAgICBsZXQgYXR0cnMgPSB1dGlscy5nZXRBdHRycyh0b2tlbi5jb250ZW50LCAwLCBvcHRpb25zKTtcbiAgICAgICAgdXRpbHMuYWRkQXR0cnMoYXR0cnMsIGF0dHJUb2tlbik7XG4gICAgICAgIGlmICh0b2tlbi5jb250ZW50Lmxlbmd0aCA9PT0gKGVuZENoYXIgKyBvcHRpb25zLnJpZ2h0RGVsaW1pdGVyLmxlbmd0aCkpIHtcbiAgICAgICAgICB0b2tlbnNbaV0uY2hpbGRyZW4uc3BsaWNlKGosIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2VuLmNvbnRlbnQgPSB0b2tlbi5jb250ZW50LnNsaWNlKGVuZENoYXIgKyBvcHRpb25zLnJpZ2h0RGVsaW1pdGVyLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICAvKipcbiAgICAgICAqIHwgaDEgfFxuICAgICAgICogfCAtLSB8XG4gICAgICAgKiB8IGMxIHxcbiAgICAgICAqXG4gICAgICAgKiB7LmN9XG4gICAgICAgKi9cbiAgICAgIG5hbWU6ICd0YWJsZXMnLFxuICAgICAgdGVzdHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIC8vIGxldCB0aGlzIHRva2VuIGJlIGksIHN1Y2ggdGhhdCBmb3ItbG9vcCBjb250aW51ZXMgYXRcbiAgICAgICAgICAvLyBuZXh0IHRva2VuIGFmdGVyIHRva2Vucy5zcGxpY2VcbiAgICAgICAgICBzaGlmdDogMCxcbiAgICAgICAgICB0eXBlOiAndGFibGVfY2xvc2UnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBzaGlmdDogMSxcbiAgICAgICAgICB0eXBlOiAncGFyYWdyYXBoX29wZW4nXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBzaGlmdDogMixcbiAgICAgICAgICB0eXBlOiAnaW5saW5lJyxcbiAgICAgICAgICBjb250ZW50OiB1dGlscy5oYXNEZWxpbWl0ZXJzKCdvbmx5Jywgb3B0aW9ucylcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHRyYW5zZm9ybTogKHRva2VucywgaSkgPT4ge1xuICAgICAgICBsZXQgdG9rZW4gPSB0b2tlbnNbaSArIDJdO1xuICAgICAgICBsZXQgdGFibGVPcGVuID0gdXRpbHMuZ2V0TWF0Y2hpbmdPcGVuaW5nVG9rZW4odG9rZW5zLCBpKTtcbiAgICAgICAgbGV0IGF0dHJzID0gdXRpbHMuZ2V0QXR0cnModG9rZW4uY29udGVudCwgMCwgb3B0aW9ucyk7XG4gICAgICAgIC8vIGFkZCBhdHRyaWJ1dGVzXG4gICAgICAgIHV0aWxzLmFkZEF0dHJzKGF0dHJzLCB0YWJsZU9wZW4pO1xuICAgICAgICAvLyByZW1vdmUgPHA+ey5jfTwvcD5cbiAgICAgICAgdG9rZW5zLnNwbGljZShpICsgMSwgMyk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAgLyoqXG4gICAgICAgKiAqZW1waGFzaXMqey53aXRoIGF0dHJzPTF9XG4gICAgICAgKi9cbiAgICAgIG5hbWU6ICdpbmxpbmUgYXR0cmlidXRlcycsXG4gICAgICB0ZXN0czogW1xuICAgICAgICB7XG4gICAgICAgICAgc2hpZnQ6IDAsXG4gICAgICAgICAgdHlwZTogJ2lubGluZScsXG4gICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2hpZnQ6IC0xLFxuICAgICAgICAgICAgICBuZXN0aW5nOiAtMSAgLy8gY2xvc2luZyBpbmxpbmUgdGFnLCA8L2VtPnsuYX1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgc2hpZnQ6IDAsXG4gICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgY29udGVudDogdXRpbHMuaGFzRGVsaW1pdGVycygnc3RhcnQnLCBvcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHRyYW5zZm9ybTogKHRva2VucywgaSwgaikgPT4ge1xuICAgICAgICBsZXQgdG9rZW4gPSB0b2tlbnNbaV0uY2hpbGRyZW5bal07XG4gICAgICAgIGxldCBjb250ZW50ID0gdG9rZW4uY29udGVudDtcbiAgICAgICAgbGV0IGF0dHJzID0gdXRpbHMuZ2V0QXR0cnMoY29udGVudCwgMCwgb3B0aW9ucyk7XG4gICAgICAgIGxldCBvcGVuaW5nVG9rZW4gPSB1dGlscy5nZXRNYXRjaGluZ09wZW5pbmdUb2tlbih0b2tlbnNbaV0uY2hpbGRyZW4sIGogLSAxKTtcbiAgICAgICAgdXRpbHMuYWRkQXR0cnMoYXR0cnMsIG9wZW5pbmdUb2tlbik7XG4gICAgICAgIHRva2VuLmNvbnRlbnQgPSBjb250ZW50LnNsaWNlKGNvbnRlbnQuaW5kZXhPZihvcHRpb25zLnJpZ2h0RGVsaW1pdGVyKSArIG9wdGlvbnMucmlnaHREZWxpbWl0ZXIubGVuZ3RoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICAvKipcbiAgICAgICAqIC0gaXRlbVxuICAgICAgICogey5hfVxuICAgICAgICovXG4gICAgICBuYW1lOiAnbGlzdCBzb2Z0YnJlYWsnLFxuICAgICAgdGVzdHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHNoaWZ0OiAtMixcbiAgICAgICAgICB0eXBlOiAnbGlzdF9pdGVtX29wZW4nXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBzaGlmdDogMCxcbiAgICAgICAgICB0eXBlOiAnaW5saW5lJyxcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBwb3NpdGlvbjogLTIsXG4gICAgICAgICAgICAgIHR5cGU6ICdzb2Z0YnJlYWsnXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiAtMSxcbiAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICBjb250ZW50OiB1dGlscy5oYXNEZWxpbWl0ZXJzKCdvbmx5Jywgb3B0aW9ucylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0cmFuc2Zvcm06ICh0b2tlbnMsIGksIGopID0+IHtcbiAgICAgICAgbGV0IHRva2VuID0gdG9rZW5zW2ldLmNoaWxkcmVuW2pdO1xuICAgICAgICBsZXQgY29udGVudCA9IHRva2VuLmNvbnRlbnQ7XG4gICAgICAgIGxldCBhdHRycyA9IHV0aWxzLmdldEF0dHJzKGNvbnRlbnQsIDAsIG9wdGlvbnMpO1xuICAgICAgICBsZXQgaWkgPSBpIC0gMjtcbiAgICAgICAgd2hpbGUgKHRva2Vuc1tpaSAtIDFdICYmXG4gICAgICAgICAgdG9rZW5zW2lpIC0gMV0udHlwZSAhPT0gJ29yZGVyZWRfbGlzdF9vcGVuJyAmJlxuICAgICAgICAgIHRva2Vuc1tpaSAtIDFdLnR5cGUgIT09ICdidWxsZXRfbGlzdF9vcGVuJykgeyBpaS0tOyB9XG4gICAgICAgIHV0aWxzLmFkZEF0dHJzKGF0dHJzLCB0b2tlbnNbaWkgLSAxXSk7XG4gICAgICAgIHRva2Vuc1tpXS5jaGlsZHJlbiA9IHRva2Vuc1tpXS5jaGlsZHJlbi5zbGljZSgwLCAtMik7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAgLyoqXG4gICAgICAgKiAtIG5lc3RlZCBsaXN0XG4gICAgICAgKiAgIC0gd2l0aCBkb3VibGUgXFxuXG4gICAgICAgKiAgIHsuYX0gPC0tIGFwcGx5IHRvIG5lc3RlZCB1bFxuICAgICAgICpcbiAgICAgICAqIHsuYn0gPC0tIGFwcGx5IHRvIHJvb3QgPHVsPlxuICAgICAgICovXG4gICAgICBuYW1lOiAnbGlzdCBkb3VibGUgc29mdGJyZWFrJyxcbiAgICAgIHRlc3RzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAvLyBsZXQgdGhpcyB0b2tlbiBiZSBpID0gMCBzbyB0aGF0IHdlIGNhbiBlcmFzZVxuICAgICAgICAgIC8vIHRoZSA8cD57LmF9PC9wPiB0b2tlbnMgYmVsb3dcbiAgICAgICAgICBzaGlmdDogMCxcbiAgICAgICAgICB0eXBlOiAoc3RyKSA9PlxuICAgICAgICAgICAgc3RyID09PSAnYnVsbGV0X2xpc3RfY2xvc2UnIHx8XG4gICAgICAgICAgICBzdHIgPT09ICdvcmRlcmVkX2xpc3RfY2xvc2UnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBzaGlmdDogMSxcbiAgICAgICAgICB0eXBlOiAncGFyYWdyYXBoX29wZW4nXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBzaGlmdDogMixcbiAgICAgICAgICB0eXBlOiAnaW5saW5lJyxcbiAgICAgICAgICBjb250ZW50OiB1dGlscy5oYXNEZWxpbWl0ZXJzKCdvbmx5Jywgb3B0aW9ucyksXG4gICAgICAgICAgY2hpbGRyZW46IChhcnIpID0+IGFyci5sZW5ndGggPT09IDFcbiAgICAgICAgfSwge1xuICAgICAgICAgIHNoaWZ0OiAzLFxuICAgICAgICAgIHR5cGU6ICdwYXJhZ3JhcGhfY2xvc2UnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0cmFuc2Zvcm06ICh0b2tlbnMsIGkpID0+IHtcbiAgICAgICAgbGV0IHRva2VuID0gdG9rZW5zW2kgKyAyXTtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0b2tlbi5jb250ZW50O1xuICAgICAgICBsZXQgYXR0cnMgPSB1dGlscy5nZXRBdHRycyhjb250ZW50LCAwLCBvcHRpb25zKTtcbiAgICAgICAgbGV0IG9wZW5pbmdUb2tlbiA9IHV0aWxzLmdldE1hdGNoaW5nT3BlbmluZ1Rva2VuKHRva2VucywgaSk7XG4gICAgICAgIHV0aWxzLmFkZEF0dHJzKGF0dHJzLCBvcGVuaW5nVG9rZW4pO1xuICAgICAgICB0b2tlbnMuc3BsaWNlKGkgKyAxLCAzKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICAvKipcbiAgICAgICAqIC0gZW5kIG9mIHsubGlzdC1pdGVtfVxuICAgICAgICovXG4gICAgICBuYW1lOiAnbGlzdCBpdGVtIGVuZCcsXG4gICAgICB0ZXN0czogW1xuICAgICAgICB7XG4gICAgICAgICAgc2hpZnQ6IC0yLFxuICAgICAgICAgIHR5cGU6ICdsaXN0X2l0ZW1fb3BlbidcbiAgICAgICAgfSwge1xuICAgICAgICAgIHNoaWZ0OiAwLFxuICAgICAgICAgIHR5cGU6ICdpbmxpbmUnLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiAtMSxcbiAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICBjb250ZW50OiB1dGlscy5oYXNEZWxpbWl0ZXJzKCdlbmQnLCBvcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHRyYW5zZm9ybTogKHRva2VucywgaSwgaikgPT4ge1xuICAgICAgICBsZXQgdG9rZW4gPSB0b2tlbnNbaV0uY2hpbGRyZW5bal07XG4gICAgICAgIGxldCBjb250ZW50ID0gdG9rZW4uY29udGVudDtcbiAgICAgICAgbGV0IGF0dHJzID0gdXRpbHMuZ2V0QXR0cnMoY29udGVudCwgY29udGVudC5sYXN0SW5kZXhPZihvcHRpb25zLmxlZnREZWxpbWl0ZXIpLCBvcHRpb25zKTtcbiAgICAgICAgdXRpbHMuYWRkQXR0cnMoYXR0cnMsIHRva2Vuc1tpIC0gMl0pO1xuICAgICAgICBsZXQgdHJpbW1lZCA9IGNvbnRlbnQuc2xpY2UoMCwgY29udGVudC5sYXN0SW5kZXhPZihvcHRpb25zLmxlZnREZWxpbWl0ZXIpKTtcbiAgICAgICAgdG9rZW4uY29udGVudCA9IGxhc3QodHJpbW1lZCkgIT09ICcgJyA/XG4gICAgICAgICAgdHJpbW1lZCA6IHRyaW1tZWQuc2xpY2UoMCwgLTEpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIC8qKlxuICAgICAgICogc29tZXRoaW5nIHdpdGggc29mdGJyZWFrXG4gICAgICAgKiB7LmNsc31cbiAgICAgICAqL1xuICAgICAgbmFtZTogJ1xcbnsuYX0gc29mdGJyZWFrIHRoZW4gY3VybHkgaW4gc3RhcnQnLFxuICAgICAgdGVzdHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHNoaWZ0OiAwLFxuICAgICAgICAgIHR5cGU6ICdpbmxpbmUnLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiAtMixcbiAgICAgICAgICAgICAgdHlwZTogJ3NvZnRicmVhaydcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgcG9zaXRpb246IC0xLFxuICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHV0aWxzLmhhc0RlbGltaXRlcnMoJ29ubHknLCBvcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHRyYW5zZm9ybTogKHRva2VucywgaSwgaikgPT4ge1xuICAgICAgICBsZXQgdG9rZW4gPSB0b2tlbnNbaV0uY2hpbGRyZW5bal07XG4gICAgICAgIGxldCBhdHRycyA9IHV0aWxzLmdldEF0dHJzKHRva2VuLmNvbnRlbnQsIDAsIG9wdGlvbnMpO1xuICAgICAgICAvLyBmaW5kIGxhc3QgY2xvc2luZyB0YWdcbiAgICAgICAgbGV0IGlpID0gaSArIDE7XG4gICAgICAgIHdoaWxlICh0b2tlbnNbaWkgKyAxXSAmJiB0b2tlbnNbaWkgKyAxXS5uZXN0aW5nID09PSAtMSkgeyBpaSsrOyB9XG4gICAgICAgIGxldCBvcGVuaW5nVG9rZW4gPSB1dGlscy5nZXRNYXRjaGluZ09wZW5pbmdUb2tlbih0b2tlbnMsIGlpKTtcbiAgICAgICAgdXRpbHMuYWRkQXR0cnMoYXR0cnMsIG9wZW5pbmdUb2tlbik7XG4gICAgICAgIHRva2Vuc1tpXS5jaGlsZHJlbiA9IHRva2Vuc1tpXS5jaGlsZHJlbi5zbGljZSgwLCAtMik7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAgLyoqXG4gICAgICAgKiBob3Jpem9udGFsIHJ1bGUgLS0tIHsjaWR9XG4gICAgICAgKi9cbiAgICAgIG5hbWU6ICdob3Jpem9udGFsIHJ1bGUnLFxuICAgICAgdGVzdHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHNoaWZ0OiAwLFxuICAgICAgICAgIHR5cGU6ICdwYXJhZ3JhcGhfb3BlbidcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHNoaWZ0OiAxLFxuICAgICAgICAgIHR5cGU6ICdpbmxpbmUnLFxuICAgICAgICAgIGNoaWxkcmVuOiAoYXJyKSA9PiBhcnIubGVuZ3RoID09PSAxLFxuICAgICAgICAgIGNvbnRlbnQ6IChzdHIpID0+IHN0ci5tYXRjaChfX2hyKSAhPT0gbnVsbCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHNoaWZ0OiAyLFxuICAgICAgICAgIHR5cGU6ICdwYXJhZ3JhcGhfY2xvc2UnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0cmFuc2Zvcm06ICh0b2tlbnMsIGkpID0+IHtcbiAgICAgICAgbGV0IHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgICB0b2tlbi50eXBlID0gJ2hyJztcbiAgICAgICAgdG9rZW4udGFnID0gJ2hyJztcbiAgICAgICAgdG9rZW4ubmVzdGluZyA9IDA7XG4gICAgICAgIGxldCBjb250ZW50ID0gdG9rZW5zW2kgKyAxXS5jb250ZW50O1xuICAgICAgICBsZXQgc3RhcnQgPSBjb250ZW50Lmxhc3RJbmRleE9mKG9wdGlvbnMubGVmdERlbGltaXRlcik7XG4gICAgICAgIHRva2VuLmF0dHJzID0gdXRpbHMuZ2V0QXR0cnMoY29udGVudCwgc3RhcnQsIG9wdGlvbnMpO1xuICAgICAgICB0b2tlbi5tYXJrdXAgPSBjb250ZW50O1xuICAgICAgICB0b2tlbnMuc3BsaWNlKGkgKyAxLCAyKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICAvKipcbiAgICAgICAqIGVuZCBvZiB7LmJsb2NrfVxuICAgICAgICovXG4gICAgICBuYW1lOiAnZW5kIG9mIGJsb2NrJyxcbiAgICAgIHRlc3RzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBzaGlmdDogMCxcbiAgICAgICAgICB0eXBlOiAnaW5saW5lJyxcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBwb3NpdGlvbjogLTEsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHV0aWxzLmhhc0RlbGltaXRlcnMoJ2VuZCcsIG9wdGlvbnMpLFxuICAgICAgICAgICAgICB0eXBlOiAodCkgPT4gdCAhPT0gJ2NvZGVfaW5saW5lJyAmJiB0ICE9PSAnbWF0aF9pbmxpbmUnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgdHJhbnNmb3JtOiAodG9rZW5zLCBpLCBqKSA9PiB7XG4gICAgICAgIGxldCB0b2tlbiA9IHRva2Vuc1tpXS5jaGlsZHJlbltqXTtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0b2tlbi5jb250ZW50O1xuICAgICAgICBsZXQgYXR0cnMgPSB1dGlscy5nZXRBdHRycyhjb250ZW50LCBjb250ZW50Lmxhc3RJbmRleE9mKG9wdGlvbnMubGVmdERlbGltaXRlciksIG9wdGlvbnMpO1xuICAgICAgICBsZXQgaWkgPSBpICsgMTtcbiAgICAgICAgd2hpbGUgKHRva2Vuc1tpaSArIDFdICYmIHRva2Vuc1tpaSArIDFdLm5lc3RpbmcgPT09IC0xKSB7IGlpKys7IH1cbiAgICAgICAgbGV0IG9wZW5pbmdUb2tlbiA9IHV0aWxzLmdldE1hdGNoaW5nT3BlbmluZ1Rva2VuKHRva2VucywgaWkpO1xuICAgICAgICB1dGlscy5hZGRBdHRycyhhdHRycywgb3BlbmluZ1Rva2VuKTtcbiAgICAgICAgbGV0IHRyaW1tZWQgPSBjb250ZW50LnNsaWNlKDAsIGNvbnRlbnQubGFzdEluZGV4T2Yob3B0aW9ucy5sZWZ0RGVsaW1pdGVyKSk7XG4gICAgICAgIHRva2VuLmNvbnRlbnQgPSBsYXN0KHRyaW1tZWQpICE9PSAnICcgP1xuICAgICAgICAgIHRyaW1tZWQgOiB0cmltbWVkLnNsaWNlKDAsIC0xKTtcbiAgICAgIH1cbiAgICB9XG4gIF0pO1xufTtcblxuLy8gZ2V0IGxhc3QgZWxlbWVudCBvZiBhcnJheSBvciBzdHJpbmdcbmZ1bmN0aW9uIGxhc3QoYXJyKSB7XG4gIHJldHVybiBhcnIuc2xpY2UoLTEpWzBdO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuLyoqXG4gKiBwYXJzZSB7LmNsYXNzICNpZCBrZXk9dmFsfSBzdHJpbmdzXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyOiBzdHJpbmcgdG8gcGFyc2VcbiAqIEBwYXJhbSB7aW50fSBzdGFydDogd2hlcmUgdG8gc3RhcnQgcGFyc2luZyAoaW5jbHVkaW5nIHspXG4gKiBAcmV0dXJucyB7MmQgYXJyYXl9OiBbWydrZXknLCAndmFsJ10sIFsnY2xhc3MnLCAncmVkJ11dXG4gKi9cbmV4cG9ydHMuZ2V0QXR0cnMgPSBmdW5jdGlvbiAoc3RyLCBzdGFydCwgb3B0aW9ucykge1xuICAvLyBub3QgdGFiLCBsaW5lIGZlZWQsIGZvcm0gZmVlZCwgc3BhY2UsIHNvbGlkdXMsIGdyZWF0ZXIgdGhhbiBzaWduLCBxdW90YXRpb24gbWFyaywgYXBvc3Ryb3BoZSBhbmQgZXF1YWxzIHNpZ25cbiAgY29uc3QgYWxsb3dlZEtleUNoYXJzID0gL1teXFx0XFxuXFxmIC8+XCInPV0vO1xuICBjb25zdCBwYWlyU2VwYXJhdG9yID0gJyAnO1xuICBjb25zdCBrZXlTZXBhcmF0b3IgPSAnPSc7XG4gIGNvbnN0IGNsYXNzQ2hhciA9ICcuJztcbiAgY29uc3QgaWRDaGFyID0gJyMnO1xuXG4gIGNvbnN0IGF0dHJzID0gW107XG4gIGxldCBrZXkgPSAnJztcbiAgbGV0IHZhbHVlID0gJyc7XG4gIGxldCBwYXJzaW5nS2V5ID0gdHJ1ZTtcbiAgbGV0IHZhbHVlSW5zaWRlUXVvdGVzID0gZmFsc2U7XG5cbiAgLy8gcmVhZCBpbnNpZGUge31cbiAgLy8gc3RhcnQgKyBsZWZ0IGRlbGltaXRlciBsZW5ndGggdG8gYXZvaWQgYmVnaW5uaW5nIHtcbiAgLy8gYnJlYWtzIHdoZW4gfSBpcyBmb3VuZCBvciBlbmQgb2Ygc3RyaW5nXG4gIGZvciAobGV0IGkgPSBzdGFydCArIG9wdGlvbnMubGVmdERlbGltaXRlci5sZW5ndGg7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3RyLnNsaWNlKGksIGkgKyBvcHRpb25zLnJpZ2h0RGVsaW1pdGVyLmxlbmd0aCkgPT09IG9wdGlvbnMucmlnaHREZWxpbWl0ZXIpIHtcbiAgICAgIGlmIChrZXkgIT09ICcnKSB7IGF0dHJzLnB1c2goW2tleSwgdmFsdWVdKTsgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGxldCBjaGFyXyA9IHN0ci5jaGFyQXQoaSk7XG5cbiAgICAvLyBzd2l0Y2ggdG8gcmVhZGluZyB2YWx1ZSBpZiBlcXVhbCBzaWduXG4gICAgaWYgKGNoYXJfID09PSBrZXlTZXBhcmF0b3IgJiYgcGFyc2luZ0tleSkge1xuICAgICAgcGFyc2luZ0tleSA9IGZhbHNlO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gey5jbGFzc30gey4uY3NzLW1vZHVsZX1cbiAgICBpZiAoY2hhcl8gPT09IGNsYXNzQ2hhciAmJiBrZXkgPT09ICcnKSB7XG4gICAgICBpZiAoc3RyLmNoYXJBdChpICsgMSkgPT09IGNsYXNzQ2hhcikge1xuICAgICAgICBrZXkgPSAnY3NzLW1vZHVsZSc7XG4gICAgICAgIGkgKz0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGtleSA9ICdjbGFzcyc7XG4gICAgICB9XG4gICAgICBwYXJzaW5nS2V5ID0gZmFsc2U7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyB7I2lkfVxuICAgIGlmIChjaGFyXyA9PT0gaWRDaGFyICYmIGtleSA9PT0gJycpIHtcbiAgICAgIGtleSA9ICdpZCc7XG4gICAgICBwYXJzaW5nS2V5ID0gZmFsc2U7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyB7dmFsdWU9XCJpbnNpZGUgcXVvdGVzXCJ9XG4gICAgaWYgKGNoYXJfID09PSAnXCInICYmIHZhbHVlID09PSAnJykge1xuICAgICAgdmFsdWVJbnNpZGVRdW90ZXMgPSB0cnVlO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChjaGFyXyA9PT0gJ1wiJyAmJiB2YWx1ZUluc2lkZVF1b3Rlcykge1xuICAgICAgdmFsdWVJbnNpZGVRdW90ZXMgPSBmYWxzZTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIHJlYWQgbmV4dCBrZXkvdmFsdWUgcGFpclxuICAgIGlmICgoY2hhcl8gPT09IHBhaXJTZXBhcmF0b3IgJiYgIXZhbHVlSW5zaWRlUXVvdGVzKSkge1xuICAgICAgaWYgKGtleSA9PT0gJycpIHtcbiAgICAgICAgLy8gYmVnaW5uaW5nIG9yIGVuZGluZyBzcGFjZTogeyAucmVkIH0gdnMgey5yZWR9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgYXR0cnMucHVzaChba2V5LCB2YWx1ZV0pO1xuICAgICAga2V5ID0gJyc7XG4gICAgICB2YWx1ZSA9ICcnO1xuICAgICAgcGFyc2luZ0tleSA9IHRydWU7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBjb250aW51ZSBpZiBjaGFyYWN0ZXIgbm90IGFsbG93ZWRcbiAgICBpZiAocGFyc2luZ0tleSAmJiBjaGFyXy5zZWFyY2goYWxsb3dlZEtleUNoYXJzKSA9PT0gLTEpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIG5vIG90aGVyIGNvbmRpdGlvbnMgbWV0OyBhcHBlbmQgdG8ga2V5L3ZhbHVlXG4gICAgaWYgKHBhcnNpbmdLZXkpIHtcbiAgICAgIGtleSArPSBjaGFyXztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YWx1ZSArPSBjaGFyXztcbiAgfVxuXG4gIGlmIChvcHRpb25zLmFsbG93ZWRBdHRyaWJ1dGVzICYmIG9wdGlvbnMuYWxsb3dlZEF0dHJpYnV0ZXMubGVuZ3RoKSB7XG4gICAgbGV0IGFsbG93ZWRBdHRyaWJ1dGVzID0gb3B0aW9ucy5hbGxvd2VkQXR0cmlidXRlcztcblxuICAgIHJldHVybiBhdHRycy5maWx0ZXIoZnVuY3Rpb24gKGF0dHJQYWlyKSB7XG4gICAgICBsZXQgYXR0ciA9IGF0dHJQYWlyWzBdO1xuXG4gICAgICBmdW5jdGlvbiBpc0FsbG93ZWRBdHRyaWJ1dGUgKGFsbG93ZWRBdHRyaWJ1dGUpIHtcbiAgICAgICAgcmV0dXJuIChhdHRyID09PSBhbGxvd2VkQXR0cmlidXRlXG4gICAgICAgICAgfHwgKGFsbG93ZWRBdHRyaWJ1dGUgaW5zdGFuY2VvZiBSZWdFeHAgJiYgYWxsb3dlZEF0dHJpYnV0ZS50ZXN0KGF0dHIpKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYWxsb3dlZEF0dHJpYnV0ZXMuc29tZShpc0FsbG93ZWRBdHRyaWJ1dGUpO1xuICAgIH0pO1xuXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGF0dHJzO1xuICB9XG59O1xuXG4vKipcbiAqIGFkZCBhdHRyaWJ1dGVzIGZyb20gW1sna2V5JywgJ3ZhbCddXSBsaXN0XG4gKiBAcGFyYW0ge2FycmF5fSBhdHRyczogW1sna2V5JywgJ3ZhbCddXVxuICogQHBhcmFtIHt0b2tlbn0gdG9rZW46IHdoaWNoIHRva2VuIHRvIGFkZCBhdHRyaWJ1dGVzXG4gKiBAcmV0dXJucyB0b2tlblxuICovXG5leHBvcnRzLmFkZEF0dHJzID0gZnVuY3Rpb24gKGF0dHJzLCB0b2tlbikge1xuICBmb3IgKGxldCBqID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaiA8IGw7ICsraikge1xuICAgIGxldCBrZXkgPSBhdHRyc1tqXVswXTtcbiAgICBpZiAoa2V5ID09PSAnY2xhc3MnKSB7XG4gICAgICB0b2tlbi5hdHRySm9pbignY2xhc3MnLCBhdHRyc1tqXVsxXSk7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09ICdjc3MtbW9kdWxlJykge1xuICAgICAgdG9rZW4uYXR0ckpvaW4oJ2Nzcy1tb2R1bGUnLCBhdHRyc1tqXVsxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRva2VuLmF0dHJQdXNoKGF0dHJzW2pdKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRva2VuO1xufTtcblxuLyoqXG4gKiBEb2VzIHN0cmluZyBoYXZlIHByb3Blcmx5IGZvcm1hdHRlZCBjdXJseT9cbiAqXG4gKiBzdGFydDogJ3suYX0gYXNkZidcbiAqIG1pZGRsZTogJ2F7LmJ9YydcbiAqIGVuZDogJ2FzZGYgey5hfSdcbiAqIG9ubHk6ICd7LmF9J1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB3aGVyZSB0byBleHBlY3Qge30gY3VybHkuIHN0YXJ0LCBtaWRkbGUsIGVuZCBvciBvbmx5LlxuICogQHJldHVybiB7ZnVuY3Rpb24oc3RyaW5nKX0gRnVuY3Rpb24gd2hpY2ggdGVzdGVzIGlmIHN0cmluZyBoYXMgY3VybHkuXG4gKi9cbmV4cG9ydHMuaGFzRGVsaW1pdGVycyA9IGZ1bmN0aW9uICh3aGVyZSwgb3B0aW9ucykge1xuXG4gIGlmICghd2hlcmUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhcmFtZXRlciBgd2hlcmVgIG5vdCBwYXNzZWQuIFNob3VsZCBiZSBcInN0YXJ0XCIsIFwibWlkZGxlXCIsIFwiZW5kXCIgb3IgXCJvbmx5XCIuJyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgcmV0dXJuIGZ1bmN0aW9uIChzdHIpIHtcbiAgICAvLyB3ZSBuZWVkIG1pbmltdW0gdGhyZWUgY2hhcnMsIGZvciBleGFtcGxlIHtifVxuICAgIGxldCBtaW5DdXJseUxlbmd0aCA9IG9wdGlvbnMubGVmdERlbGltaXRlci5sZW5ndGggKyAxICsgb3B0aW9ucy5yaWdodERlbGltaXRlci5sZW5ndGg7XG4gICAgaWYgKCFzdHIgfHwgdHlwZW9mIHN0ciAhPT0gJ3N0cmluZycgfHwgc3RyLmxlbmd0aCA8IG1pbkN1cmx5TGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmFsaWRDdXJseUxlbmd0aCAoY3VybHkpIHtcbiAgICAgIGxldCBpc0NsYXNzID0gY3VybHkuY2hhckF0KG9wdGlvbnMubGVmdERlbGltaXRlci5sZW5ndGgpID09PSAnLic7XG4gICAgICBsZXQgaXNJZCA9IGN1cmx5LmNoYXJBdChvcHRpb25zLmxlZnREZWxpbWl0ZXIubGVuZ3RoKSA9PT0gJyMnO1xuICAgICAgcmV0dXJuIChpc0NsYXNzIHx8IGlzSWQpXG4gICAgICAgID8gY3VybHkubGVuZ3RoID49IChtaW5DdXJseUxlbmd0aCArIDEpXG4gICAgICAgIDogY3VybHkubGVuZ3RoID49IG1pbkN1cmx5TGVuZ3RoO1xuICAgIH1cblxuICAgIGxldCBzdGFydCwgZW5kLCBzbGljZSwgbmV4dENoYXI7XG4gICAgbGV0IHJpZ2h0RGVsaW1pdGVyTWluaW11bVNoaWZ0ID0gbWluQ3VybHlMZW5ndGggLSBvcHRpb25zLnJpZ2h0RGVsaW1pdGVyLmxlbmd0aDtcbiAgICBzd2l0Y2ggKHdoZXJlKSB7XG4gICAgY2FzZSAnc3RhcnQnOlxuICAgICAgLy8gZmlyc3QgY2hhciBzaG91bGQgYmUgeywgfSBmb3VuZCBpbiBjaGFyIDIgb3IgbW9yZVxuICAgICAgc2xpY2UgPSBzdHIuc2xpY2UoMCwgb3B0aW9ucy5sZWZ0RGVsaW1pdGVyLmxlbmd0aCk7XG4gICAgICBzdGFydCA9IHNsaWNlID09PSBvcHRpb25zLmxlZnREZWxpbWl0ZXIgPyAwIDogLTE7XG4gICAgICBlbmQgPSBzdGFydCA9PT0gLTEgPyAtMSA6IHN0ci5pbmRleE9mKG9wdGlvbnMucmlnaHREZWxpbWl0ZXIsIHJpZ2h0RGVsaW1pdGVyTWluaW11bVNoaWZ0KTtcbiAgICAgIC8vIGNoZWNrIGlmIG5leHQgY2hhcmFjdGVyIGlzIG5vdCBvbmUgb2YgdGhlIGRlbGltaXRlcnNcbiAgICAgIG5leHRDaGFyID0gc3RyLmNoYXJBdChlbmQgKyBvcHRpb25zLnJpZ2h0RGVsaW1pdGVyLmxlbmd0aCk7XG4gICAgICBpZiAobmV4dENoYXIgJiYgb3B0aW9ucy5yaWdodERlbGltaXRlci5pbmRleE9mKG5leHRDaGFyKSAhPT0gLTEpIHtcbiAgICAgICAgZW5kID0gLTE7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2VuZCc6XG4gICAgICAvLyBsYXN0IGNoYXIgc2hvdWxkIGJlIH1cbiAgICAgIHN0YXJ0ID0gc3RyLmxhc3RJbmRleE9mKG9wdGlvbnMubGVmdERlbGltaXRlcik7XG4gICAgICBlbmQgPSBzdGFydCA9PT0gLTEgPyAtMSA6IHN0ci5pbmRleE9mKG9wdGlvbnMucmlnaHREZWxpbWl0ZXIsIHN0YXJ0ICsgcmlnaHREZWxpbWl0ZXJNaW5pbXVtU2hpZnQpO1xuICAgICAgZW5kID0gZW5kID09PSBzdHIubGVuZ3RoIC0gb3B0aW9ucy5yaWdodERlbGltaXRlci5sZW5ndGggPyBlbmQgOiAtMTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnb25seSc6XG4gICAgICAvLyAney5hfSdcbiAgICAgIHNsaWNlID0gc3RyLnNsaWNlKDAsIG9wdGlvbnMubGVmdERlbGltaXRlci5sZW5ndGgpO1xuICAgICAgc3RhcnQgPSBzbGljZSA9PT0gb3B0aW9ucy5sZWZ0RGVsaW1pdGVyID8gMCA6IC0xO1xuICAgICAgc2xpY2UgPSBzdHIuc2xpY2Uoc3RyLmxlbmd0aCAtIG9wdGlvbnMucmlnaHREZWxpbWl0ZXIubGVuZ3RoKTtcbiAgICAgIGVuZCA9IHNsaWNlID09PSBvcHRpb25zLnJpZ2h0RGVsaW1pdGVyID8gc3RyLmxlbmd0aCAtIG9wdGlvbnMucmlnaHREZWxpbWl0ZXIubGVuZ3RoIDogLTE7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gc3RhcnQgIT09IC0xICYmIGVuZCAhPT0gLTEgJiYgdmFsaWRDdXJseUxlbmd0aChzdHIuc3Vic3RyaW5nKHN0YXJ0LCBlbmQgKyBvcHRpb25zLnJpZ2h0RGVsaW1pdGVyLmxlbmd0aCkpO1xuICB9O1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGxhc3QgY3VybHkgZnJvbSBzdHJpbmcuXG4gKi9cbmV4cG9ydHMucmVtb3ZlRGVsaW1pdGVyID0gZnVuY3Rpb24gKHN0ciwgb3B0aW9ucykge1xuICBjb25zdCBzdGFydCA9IGVzY2FwZVJlZ0V4cChvcHRpb25zLmxlZnREZWxpbWl0ZXIpO1xuICBjb25zdCBlbmQgPSBlc2NhcGVSZWdFeHAob3B0aW9ucy5yaWdodERlbGltaXRlcik7XG5cbiAgbGV0IGN1cmx5ID0gbmV3IFJlZ0V4cChcbiAgICAnWyBcXFxcbl0/JyArIHN0YXJ0ICsgJ1teJyArIHN0YXJ0ICsgZW5kICsgJ10rJyArIGVuZCArICckJ1xuICApO1xuICBsZXQgcG9zID0gc3RyLnNlYXJjaChjdXJseSk7XG5cbiAgcmV0dXJuIHBvcyAhPT0gLTEgPyBzdHIuc2xpY2UoMCwgcG9zKSA6IHN0cjtcbn07XG5cbi8qKlxuICogRXNjYXBlcyBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gc3RyaW5nIHMgc3VjaCB0aGF0IHRoZSBzdHJpbmdcbiAqIGNhbiBiZSB1c2VkIGluIGBuZXcgUmVnRXhwYC4gRm9yIGV4YW1wbGUgXCJbXCIgYmVjb21lcyBcIlxcXFxbXCIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHMgUmVnZXggc3RyaW5nLlxuICogQHJldHVybiB7c3RyaW5nfSBFc2NhcGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gZXNjYXBlUmVnRXhwIChzKSB7XG4gIHJldHVybiBzLnJlcGxhY2UoL1stL1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKTtcbn1cbmV4cG9ydHMuZXNjYXBlUmVnRXhwID0gZXNjYXBlUmVnRXhwO1xuXG4vKipcbiAqIGZpbmQgY29ycmVzcG9uZGluZyBvcGVuaW5nIGJsb2NrXG4gKi9cbmV4cG9ydHMuZ2V0TWF0Y2hpbmdPcGVuaW5nVG9rZW4gPSBmdW5jdGlvbiAodG9rZW5zLCBpKSB7XG4gIGlmICh0b2tlbnNbaV0udHlwZSA9PT0gJ3NvZnRicmVhaycpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gbm9uIGNsb3NpbmcgYmxvY2tzLCBleGFtcGxlIGltZ1xuICBpZiAodG9rZW5zW2ldLm5lc3RpbmcgPT09IDApIHtcbiAgICByZXR1cm4gdG9rZW5zW2ldO1xuICB9XG5cbiAgbGV0IGxldmVsID0gdG9rZW5zW2ldLmxldmVsO1xuICBsZXQgdHlwZSA9IHRva2Vuc1tpXS50eXBlLnJlcGxhY2UoJ19jbG9zZScsICdfb3BlbicpO1xuXG4gIGZvciAoOyBpID49IDA7IC0taSkge1xuICAgIGlmICh0b2tlbnNbaV0udHlwZSA9PT0gdHlwZSAmJiB0b2tlbnNbaV0ubGV2ZWwgPT09IGxldmVsKSB7XG4gICAgICByZXR1cm4gdG9rZW5zW2ldO1xuICAgIH1cbiAgfVxufTtcblxuXG4vKipcbiAqIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL21hcmtkb3duLWl0L21hcmtkb3duLWl0L2Jsb2IvbWFzdGVyL2xpYi9jb21tb24vdXRpbHMuanNcbiAqL1xubGV0IEhUTUxfRVNDQVBFX1RFU1RfUkUgPSAvWyY8PlwiXS87XG5sZXQgSFRNTF9FU0NBUEVfUkVQTEFDRV9SRSA9IC9bJjw+XCJdL2c7XG5sZXQgSFRNTF9SRVBMQUNFTUVOVFMgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7J1xufTtcblxuZnVuY3Rpb24gcmVwbGFjZVVuc2FmZUNoYXIoY2gpIHtcbiAgcmV0dXJuIEhUTUxfUkVQTEFDRU1FTlRTW2NoXTtcbn1cblxuZXhwb3J0cy5lc2NhcGVIdG1sID0gZnVuY3Rpb24gKHN0cikge1xuICBpZiAoSFRNTF9FU0NBUEVfVEVTVF9SRS50ZXN0KHN0cikpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoSFRNTF9FU0NBUEVfUkVQTEFDRV9SRSwgcmVwbGFjZVVuc2FmZUNoYXIpO1xuICB9XG4gIHJldHVybiBzdHI7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnJhY2tldGVkX3NwYW5zX3BsdWdpbihtZCkge1xuXG4gIGZ1bmN0aW9uIHNwYW4oc3RhdGUpIHtcbiAgICB2YXIgbWF4ID0gc3RhdGUucG9zTWF4XG5cbiAgICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhdGUucG9zKSAhPT0gMHg1Qikge1xuICAgICAgLy8gb3BlbmluZyBbXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGxhYmVsU3RhcnQgPSBzdGF0ZS5wb3MgKyAxO1xuICAgIHZhciBsYWJlbEVuZCAgID0gc3RhdGUubWQuaGVscGVycy5wYXJzZUxpbmtMYWJlbChzdGF0ZSwgc3RhdGUucG9zLCB0cnVlKTtcblxuICAgIGlmIChsYWJlbEVuZCA8IDApIHtcbiAgICAgIC8vIHBhcnNlciBmYWlsZWQgdG8gZmluZCBjbG9zaW5nIF1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgcG9zID0gbGFiZWxFbmQgKyAxO1xuICAgIGlmIChwb3MgPCBtYXggJiYgc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHg3QiAvKiB7ICovKSB7XG4gICAgICAvLyBwcm9iYWJseSBmb3VuZCBzcGFuXG5cbiAgICAgIHN0YXRlLnBvcyA9IGxhYmVsU3RhcnQ7XG4gICAgICBzdGF0ZS5wb3NNYXggPSBsYWJlbEVuZDtcblxuICAgICAgc3RhdGUucHVzaCgnc3Bhbl9vcGVuJywgJ3NwYW4nLCAxKTtcbiAgICAgIHN0YXRlLm1kLmlubGluZS50b2tlbml6ZShzdGF0ZSk7XG4gICAgICBzdGF0ZS5wdXNoKCdzcGFuX2Nsb3NlJywgJ3NwYW4nLCAtMSk7XG5cbiAgICAgIHN0YXRlLnBvcyA9IHBvcztcbiAgICAgIHN0YXRlLnBvc01heCA9IG1heDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIG1kLmlubGluZS5ydWxlci5wdXNoKCdicmFja2V0ZWQtc3BhbnMnLCBzcGFuKTtcbn1cbiIsImV4cG9ydCBjb25zdCBNQUtSRE9XTl9JVF9BVFRSU19DT05GSUcgPSB7XG4gIGFsbG93ZWRBdHRyaWJ1dGVzOiBbJ2lkJ10sXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==