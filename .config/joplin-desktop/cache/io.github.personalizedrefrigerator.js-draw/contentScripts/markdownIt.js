(()=>{"use strict";var e={843:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const r={insertDrawing:"Insert Drawing",restoreFromAutosave:"Restore from autosaved drawing",deleteAutosave:"Delete all autosaved drawings",noSuchAutosaveExists:"No autosave exists",discardChanges:"Discard changes",defaultImageTitle:"Freehand Drawing",edit:"Edit",close:"Close",save:"Save",overwriteExisting:"Overwrite existing",saveAsNewDrawing:"Save as a new drawing",clickOkToContinue:"Done! Click ‚ÄúOk‚Äù to continue.",discardUnsavedChanges:"Discard unsaved changes?",resumeEditing:"Resume editing"},n={de:Object.assign(Object.assign({},r),{insertDrawing:"Zeichnung einf√ºgen",restoreFromAutosave:"Automatische Sicherung wiederherstellen",deleteAutosave:"Alle automatischen Sicherungen l√∂schen",noSuchAutosaveExists:"Keine automatischen Sicherungen vorhanden",discardChanges:"√Ñnderungen verwerfen",defaultImageTitle:"Freihand-Zeichnen",edit:"Bearbeiten",close:"Schlie√üen",save:"Speichern",overwriteExisting:"Existierende Zeichnung √ºberschreiben",saveAsNewDrawing:"Als neue Zeichnung speichern",clickOkToContinue:"Fertig! Klicke auf ‚ÄûOk‚Äú um fortzufahen.",discardUnsavedChanges:"Ungespeicherte √Ñnderungen verwerfen?",resumeEditing:"Bearbeiten fortfahren"}),en:r,es:Object.assign(Object.assign({},r),{insertDrawing:"A√±ada dibujo",restoreFromAutosave:"Resturar al autoguardado",deleteAutosave:"Borrar el autoguardado",noSuchAutosaveExists:"No autoguardado existe",discardChanges:"Descartar cambios",defaultImageTitle:"Dibujo",edit:"Editar",close:"Cerrar",save:"Guardar",overwriteExisting:"Sobrescribir existente",saveAsNewDrawing:"Guardar como dibujo nuevo",clickOkToContinue:"Guardado. Ponga ¬´ok¬ª para continuar.",discardUnsavedChanges:"¬øDescartar cambios no guardados?",resumeEditing:"Continuar editando"})};let a;const s=[...navigator.languages];for(const e of navigator.languages){const t=e.indexOf("-");-1!==t&&s.push(e.substring(0,t))}for(const e of s)if(e in n){a=n[e];break}a||(console.log("No supported localization found. Falling back to default."),a=r),t.default=a}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}var n={};(()=>{var e=n;const t=r(843),a=(e,t,r)=>{var n;const a=null!==(n=t.querySelector("img"))&&void 0!==n?n:document.querySelector(`img#${r}`);if(!(null==a?void 0:a.src))throw new Error(`${a} lacks an src attribute. Unable to edit!`);const s=e=>{var t;const r=/^(.*)\?t=(\d+)$/.exec(e),n=r?r[1]:e,a=r?parseInt(r[2]):0,s=(new Date).getTime();return null!==(t=window.outOfDateCacheBreakers)&&void 0!==t||(window.outOfDateCacheBreakers={}),window.outOfDateCacheBreakers[n]={outdated:a,suggested:s},`${n}?t=${s}`},o=a.src,i=`imageelem-${(new Date).getTime()}`;a.classList.add(i);try{(0,webviewApi.postMessage)(e,o).then((e=>{const t=document.querySelectorAll(`img[data-resource-id="${e}"]`);for(const e of t){const t=e;t.src=s(t.src)}})).catch((e=>{console.error("Error posting message!",e,"\nMessage: ",o)}))}catch(e){console.warn("Error posting message",e),console.log("Retrying...")}},s=(e,t)=>{var r,n,a;let s=e.querySelector("button.jsdraw--editButton");const o=e.querySelector("img");s||(s=document.querySelector(`#${t}`),s.remove(),e.appendChild(s)),e.classList.add("jsdraw--svgWrapper");const i=null!==(r=window.outOfDateCacheBreakers)&&void 0!==r?r:{},d=/^(.*)\?t=(\d+)$/.exec(o.src);if(!d)throw new Error(`${null==o?void 0:o.src} doesn't have a cachebreaker! Unable to update it.`);const c=d[1],u=parseInt(null!==(n=d[2])&&void 0!==n?n:"0"),l=null!==(a=i[c])&&void 0!==a?a:{};(isNaN(u)||u<=(null==l?void 0:l.outdated))&&(o.src=`${c}?t=${l.suggested}`);let g=!0;try{g="function"==typeof webviewApi.postMessage}catch(e){console.error(e),g=!1}g||(console.log("The webview library either doesn't exist or lacks a postMessage function. Unable to display an edit button."),null==s||s.remove())};e.default=e=>({plugin:(r,n)=>{const o=e.contentScriptId;let i=0;const d=a.toString().replace(/["]/g,"&quot;"),c=s.toString().replace(/["]/g,"&quot;"),u=r.renderer.rules.image;r.renderer.rules.image=(e,r,n,a,s)=>{const l=u(e,r,n,a,s);if(!/.*['"](file:[/][/])?[^'"]*[.]svg([?].*)?['"]/i.exec(null!=l?l:""))return l;const g=`io-github-personalizedrefrigerator-js-draw-edit-button-${i}`,v=`io-github-personalizedrefrigerator-js-draw-editable-svg-${i}`;return i++,`\n\t\t\t\t<span class='jsdraw--svgWrapper' contentEditable='false'>\n\t\t\t\t\t${l.replace("<img ",`<img id="${v}" onload="(${c})(this.parentElement, '${g}')" `)}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass='jsdraw--editButton'\n\t\t\t\t\t\tonclick="(${d})('${o}', this.parentElement, '${v}')"\n\t\t\t\t\t\tid="${g}"\n\t\t\t\t\t>\n\t\t\t\t\t\t${t.default.edit} üñäÔ∏è\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t`}},assets:()=>[{name:"markdownIt.css"}]})})(),exports.default=n.default})();