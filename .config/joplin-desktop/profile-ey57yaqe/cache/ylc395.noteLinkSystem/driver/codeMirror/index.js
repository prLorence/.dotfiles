exports.default=function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CODE_MIRROR_SCRIPT_ID=e.MARKDOWN_SCRIPT_ID=e.FOOTNOTE_ITEM_CLASS_NAME=e.FOOTNOTE_ID_PREFIX=e.MAIN_MARK_CLASS_NAME=e.REFERRER_SEARCH_PATTERN_PLACEHOLDER=e.NOTE_SEARCH_PATTERN_PLACEHOLDER=e.URL_FOLD_ICON_SETTING=e.PREVIEWER_URL_BLACKLIST_LOCAL=e.PREVIEWER_URL_BLACKLIST_SETTING=e.URL_ICON_ENABLED_SETTING=e.EXTRA_SYNTAX_ENABLED_SETTING=e.PREVIEWER_HOVER_DELAY_SETTING=e.PREVIEWER_ENABLED_SETTING=e.QUICK_LINK_CREATE_NOTE_SETTING=e.QUICK_LINK_AFTER_COMPLETION_SETTING=e.QUICK_LINK_ELEMENTS_ENABLED_SETTING=e.QUICK_LINK_SHOW_PATH_SETTING=e.QUICK_LINK_SYMBOL_SETTING=e.REFERRER_IDENTIFIER_ENABLED_SETTING=e.REFERRER_PANEL_MENTION_TEXT_MAX_LENGTH=e.REFERRER_PANEL_REFERENCE_EXPAND_SETTING=e.REFERRER_PANEL_STYLESHEET_SETTING=e.REFERRER_PANEL_TITLE_SETTING=e.REFERRER_PANEL_ENABLED_SETTING=e.REFERRER_VIEW_REFERENCE_EXPAND_SETTING=e.REFERRER_AUTO_LIST_POSITION_SETTING=e.REFERRER_ELEMENT_MENTION_TEXT_MAX_LENGTH=e.REFERRER_ELEMENT_NUMBER_TYPE=e.REFERRER_ELEMENT_NUMBER_ENABLED=e.REFERRER_LIST_MENTION_TEXT_MAX_LENGTH=e.REFERRER_LIST_HEADING_SETTING=e.REFERRER_SEARCH_PATTERN_SETTING=e.QUICK_LINK_SEARCH_PATTERN_SETTING=void 0,e.QUICK_LINK_SEARCH_PATTERN_SETTING="QUICK_LINK_SEARCH_PATTERN_SETTING",e.REFERRER_SEARCH_PATTERN_SETTING="REFERRER_SEARCH_PATTERN_SETTING",e.REFERRER_LIST_HEADING_SETTING="REFERRER_LIST_HEADING_SETTING",e.REFERRER_LIST_MENTION_TEXT_MAX_LENGTH="REFERRER_LIST_MENTION_TEXT_MAX_LENGTH",e.REFERRER_ELEMENT_NUMBER_ENABLED="REFERRER_ELEMENT_NUMBER_ENABLED",e.REFERRER_ELEMENT_NUMBER_TYPE="REFERRER_ELEMENT_NUMBER_TYPE",e.REFERRER_ELEMENT_MENTION_TEXT_MAX_LENGTH="REFERRER_ELEMENT_MENTION_TEXT_MAX_LENGTH",e.REFERRER_AUTO_LIST_POSITION_SETTING="REFERRER_AUTO_LIST_POSITION_SETTING",e.REFERRER_VIEW_REFERENCE_EXPAND_SETTING="REFERRER_VIEW_REFERENCE_EXPAND_SETTING",e.REFERRER_PANEL_ENABLED_SETTING="REFERRER_PANEL_ENABLED_SETTING",e.REFERRER_PANEL_TITLE_SETTING="REFERRER_PANEL_TITLE_SETTING",e.REFERRER_PANEL_STYLESHEET_SETTING="REFERRER_PANEL_STYLESHEET_SETTING",e.REFERRER_PANEL_REFERENCE_EXPAND_SETTING="REFERRER_PANEL_REFERENCE_EXPAND_SETTING",e.REFERRER_PANEL_MENTION_TEXT_MAX_LENGTH="REFERRER_PANEL_MENTION_TEXT_MAX_LENGTH",e.REFERRER_IDENTIFIER_ENABLED_SETTING="REFERRER_IDENTIFIER_ENABLED_SETTING",e.QUICK_LINK_SYMBOL_SETTING="QUICK_LINK_SYMBOL_SETTING",e.QUICK_LINK_SHOW_PATH_SETTING="QUICK_LINK_SHOW_PATH_SETTING",e.QUICK_LINK_ELEMENTS_ENABLED_SETTING="QUICK_LINK_ELEMENTS_ENABLED_SETTING",e.QUICK_LINK_AFTER_COMPLETION_SETTING="QUICK_LINK_AFTER_COMPLETION_SETTING",e.QUICK_LINK_CREATE_NOTE_SETTING="QUICK_LINK_CREATE_NOTE_SETTING",e.PREVIEWER_ENABLED_SETTING="PREVIEWER_ENABLED_SETTING",e.PREVIEWER_HOVER_DELAY_SETTING="PREVIEWER_HOVER_DELAY_SETTING",e.EXTRA_SYNTAX_ENABLED_SETTING="EXTRA_SYNTAX_ENABLED_SETTING",e.URL_ICON_ENABLED_SETTING="URL_ICON_ENABLED_SETTING",e.PREVIEWER_URL_BLACKLIST_SETTING="PREVIEWER_URL_BLACKLIST_SETTING",e.PREVIEWER_URL_BLACKLIST_LOCAL="joplin",e.URL_FOLD_ICON_SETTING="URL_FOLD_ICON_SETTING",e.NOTE_SEARCH_PATTERN_PLACEHOLDER="$keyword",e.REFERRER_SEARCH_PATTERN_PLACEHOLDER="$noteId",e.MAIN_MARK_CLASS_NAME="note-link-mark-main",e.FOOTNOTE_ID_PREFIX="fnref",e.FOOTNOTE_ITEM_CLASS_NAME="footnote-item",e.MARKDOWN_SCRIPT_ID="ylc395.noteLinkSystem.MARKDOWN_SCRIPT_ID",e.CODE_MIRROR_SCRIPT_ID="ylc395.noteLinkSystem.CODE_MIRROR_SCRIPT_ID"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FoldUrlIconType=e.ActionAfterCompletion=void 0,function(t){t[t.MoveCursorToEnd=0]="MoveCursorToEnd",t[t.SelectText=1]="SelectText"}(e.ActionAfterCompletion||(e.ActionAfterCompletion={})),function(t){t[t.None=0]="None",t[t.Ellipsis=1]="Ellipsis",t[t.Icon=2]="Icon"}(e.FoldUrlIconType||(e.FoldUrlIconType={}))},function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(n(3)),r=i(n(10)),s=i(n(16));e.default=function(t){return{plugin:function(e){e.defineOption("noteLinkSystem",!1,n=>{new o.default(t,n,e),new r.default(t,n);const i=new s.default(n);e.defineExtension("setElementId",i.setElementId.bind(i))})},codeMirrorOptions:{noteLinkSystem:!0},codeMirrorResources:["addon/hint/show-hint"],assets:()=>[{name:"./style.css"}]}}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{E(i.next(t))}catch(t){r(t)}}function l(t){try{E(i.throw(t))}catch(t){r(t)}}function E(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}E((i=i.apply(t,e||[])).next())}))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(4)),s=o(n(5)),l=o(n(6)),E=o(n(7)),c=o(n(8)),a=o(n(9)),h=n(0),_=n(1);e.default=class{constructor(t,e,n){this.context=t,this.editor=e,this.cm=n,this.doc=this.editor.getDoc(),this.editor.on("cursorActivity",this.triggerHints.bind(this)),setTimeout(this.init.bind(this),100)}init(){return i(this,void 0,void 0,(function*(){this.triggerSymbol=yield this.context.postMessage({event:"querySetting",payload:{key:h.QUICK_LINK_SYMBOL_SETTING}}),this.triggerSymbol&&(this.linkToElementEnabled=yield this.context.postMessage({event:"querySetting",payload:{key:h.QUICK_LINK_ELEMENTS_ENABLED_SETTING}}),this.actionAfterCompletion=yield this.context.postMessage({event:"querySetting",payload:{key:h.QUICK_LINK_AFTER_COMPLETION_SETTING}}),this.createNoteEnabled=yield this.context.postMessage({event:"querySetting",payload:{key:h.QUICK_LINK_CREATE_NOTE_SETTING}}))}))}isUrlToken(){var t;return(null===(t=this.editor.getTokenTypeAt(this.editor.getCursor()))||void 0===t?void 0:t.includes("string url"))||!1}triggerHints(){if(!this.triggerSymbol)return;const t=this.doc.getCursor(),e=[{line:t.line,ch:t.ch-this.triggerSymbol.length},t];this.doc.getRange(...e)===this.triggerSymbol&&(this.symbolRange={from:e[0],to:e[1]},this.isUrlOnly=this.isUrlToken(),this.editor.showHint({closeCharacters:/[()\[\]{};:>,]/,closeOnUnfocus:!0,completeSingle:!1,hint:this.getNoteCompletion.bind(this)}))}getElementsList(t,e){return i(this,void 0,void 0,(function*(){const n=yield this.context.postMessage({event:"fetchNoteHtml",payload:{id:t}}),i=(new DOMParser).parseFromString(n,"text/html"),o=t=>["H1","H2","H3","H4","H5","H6"].includes(t.tagName);return[...i.querySelectorAll("[id]")].filter(t=>!function(t){return t.id.startsWith(h.FOOTNOTE_ID_PREFIX)||t.classList.contains(h.FOOTNOTE_ITEM_CLASS_NAME)}(t)).map((t,n,i)=>{const a=o(t)?Number(t.tagName[1]):(()=>{for(let t=n;i[t];t--)if(o(i[t]))return Number(i[t].tagName[1]);return 1})(),h=(()=>{if(!o(t))return c.default;switch(a){case 1:return r.default;case 2:return s.default;case 3:return l.default;default:return E.default}})();return{text:e?`[${t.id}](#${t.id})`:"#"+t.id,className:"note-link-hint",elId:t.id,render:e=>{e.innerHTML=`${" ".repeat(a-1)}${h}${t.id}`}}})}))}hintForElements({id:t,title:e},n,o){return i(this,void 0,void 0,(function*(){if(!this.symbolRange)throw new Error("no symbol");const i=!n,r=yield this.getElementsList(t,i);if(0===r.length)return void(o&&this.afterCompletion(o));const s=n||this.symbolRange.to,l=n||this.symbolRange.from;this.editor.showHint({completeSingle:!1,closeCharacters:/[()\[\]{};:>,]/,closeOnUnfocus:!0,hint:()=>{if(!i&&!this.isUrlToken())return;const n=this.doc.getCursor(),o=this.doc.getRange(s,n),E=r.findIndex(({text:t})=>t.slice(1).includes(o));if(E<0)return;const c={from:l,to:n,list:r,selectedHint:E},a=()=>{if(!this.symbolRange)throw new Error("no symbolRange");const{from:t}=this.symbolRange;i||o||this.afterCompletion([{line:t.line,ch:t.ch+1},{line:t.line,ch:t.ch+1+e.length}])};return this.cm.on(c,"close",a),this.cm.on(c,"pick",({text:n,elId:o})=>{this.cm.off(c,"close",a);const{line:r,ch:s}=this.doc.getCursor();if(i)return void this.afterCompletion([{line:r,ch:s-n.length+1},{line:r,ch:s-`](#${o})`.length}]);const l=s-`(:/${t}${n})`.length;this.isUrlOnly||this.doc.replaceRange(n,{line:r,ch:l}),this.afterCompletion([{line:r,ch:l-e.length},{line:r,ch:l+n.length}])}),c}})}))}afterCompletion(t){const{line:e,ch:n}=this.doc.getCursor();this.actionAfterCompletion===_.ActionAfterCompletion.MoveCursorToEnd||this.isUrlOnly?this.doc.setCursor({line:e,ch:n+1}):this.actionAfterCompletion===_.ActionAfterCompletion.SelectText&&this.doc.setSelection(...t)}getNewNoteHints(t){const e=e=>{if(!this.symbolRange)throw new Error("no symbolRange");const{from:n,to:i}=this.symbolRange;if(this.isUrlOnly){const t=this.editor.getTokenAt(n);this.doc.replaceRange(":/"+e.id,{line:n.line,ch:t.start},{line:n.line,ch:t.end})}else this.doc.replaceRange(`[${e.title}](:/${e.id})`,n,{line:i.line,ch:i.ch+t.length});this.afterCompletion([{line:n.line,ch:n.ch+1},{line:n.line,ch:n.ch+1+e.title.length}])},n=n=>()=>i(this,void 0,void 0,(function*(){const i=yield this.context.postMessage({event:"createNote",payload:{title:t,type:n}});e(i)}));return[{className:"note-link-hint",text:"",render:e=>e.innerHTML=`${a.default}new Note: ${t}`,hint:n("note")},{text:"",className:"note-link-hint",render:e=>e.innerHTML=`${a.default}new Todo: ${t}`,hint:n("todo")}]}getNoteCompletion(){return i(this,void 0,void 0,(function*(){if(!this.symbolRange)throw new Error("no symbolRange");const{line:t,ch:e}=this.symbolRange.to,{line:n,ch:i}=this.doc.getCursor();if(n<t||i<e)return;const o=this.doc.getRange({line:t,ch:e},{line:n,ch:i}),r=o&&this.createNoteEnabled,s=(yield this.context.postMessage({event:"searchNotes",payload:{keyword:o}})).map(t=>Object.assign({text:this.isUrlOnly?":/"+t.id:`[${t.title}](:/${t.id})`,className:"note-link-hint",render(e){e.innerHTML=t.title+(t.isCurrent?'<span class="note-link-hint-self">SELF</span>':t.path?`<span class="note-link-hint-path">${t.path}</span>`:"")},note:t},t.isCurrent?{hint:()=>this.hintForElements(t)}:null)),{from:l}=this.symbolRange,E={line:t,ch:e+o.length},c={from:l,to:E,list:s.concat(r?this.getNewNoteHints(o):[])};return this.cm.on(c,"pick",t=>{if(!function(t){return"note"in t}(t)||t.note.isCurrent)return;const e={line:E.line,ch:l.ch+t.text.length-1};if(this.isUrlOnly){const o=this.editor.getTokenAt({line:n,ch:i});this.doc.replaceRange(t.text,{line:E.line,ch:o.start},{line:E.line,ch:o.end}),e.ch=o.start+t.text.length}const o=[{line:E.line,ch:l.ch+1},{line:E.line,ch:l.ch+t.note.title.length+1}];this.linkToElementEnabled?(this.doc.setCursor(e),this.hintForElements(t.note,e,o)):this.afterCompletion(o)}),c}))}}},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-type-h1" viewBox="0 0 16 16"><path d="M8.637 13V3.669H7.379V7.62H2.758V3.67H1.5V13h1.258V8.728h4.62V13h1.259zm5.329 0V3.669h-1.244L10.5 5.316v1.265l2.16-1.565h.062V13h1.244z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-type-h2" viewBox="0 0 16 16"><path d="M7.638 13V3.669H6.38V7.62H1.759V3.67H.5V13h1.258V8.728h4.62V13h1.259zm3.022-6.733v-.048c0-.889.63-1.668 1.716-1.668.957 0 1.675.608 1.675 1.572 0 .855-.554 1.504-1.067 2.085l-3.513 3.999V13H15.5v-1.094h-4.245v-.075l2.481-2.844c.875-.998 1.586-1.784 1.586-2.953 0-1.463-1.155-2.556-2.919-2.556-1.941 0-2.966 1.326-2.966 2.74v.049h1.223z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-type-h3" viewBox="0 0 16 16"><path d="M7.637 13V3.669H6.379V7.62H1.758V3.67H.5V13h1.258V8.728h4.62V13h1.259zm3.625-4.272h1.018c1.142 0 1.935.67 1.949 1.674.013 1.005-.78 1.737-2.01 1.73-1.08-.007-1.853-.588-1.935-1.32H9.108c.069 1.327 1.224 2.386 3.083 2.386 1.935 0 3.343-1.155 3.309-2.789-.027-1.51-1.251-2.16-2.037-2.249v-.068c.704-.123 1.764-.91 1.723-2.229-.035-1.353-1.176-2.4-2.954-2.385-1.873.006-2.857 1.162-2.898 2.358h1.196c.062-.69.711-1.299 1.696-1.299.998 0 1.695.622 1.695 1.525.007.922-.718 1.592-1.695 1.592h-.964v1.074z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-card-heading" viewBox="0 0 16 16"><path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"></path><path d="M3 8.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0-5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-1z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-box" viewBox="0 0 16 16"><path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5 8 5.961 14.154 3.5 8.186 1.113zM15 4.239l-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-file-earmark-plus" viewBox="0 0 16 16"><path d="M8 6.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 .5-.5z"></path><path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"></path></svg>'},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{E(i.next(t))}catch(t){r(t)}}function l(t){try{E(i.throw(t))}catch(t){r(t)}}function E(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}E((i=i.apply(t,e||[])).next())}))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(11)),s=n(0),l=n(1),E=n(12);function c(t,e){const n=e[t-1],i=e[t-2];return!(!n||!i)&&(" "===n.string&&"]:"===i.string)}e.default=class{constructor(t,e){this.context=t,this.editor=e,setTimeout(this.init.bind(this),100)}init(){return i(this,void 0,void 0,(function*(){this.foldType=yield this.context.postMessage({event:"querySetting",payload:{key:s.URL_FOLD_ICON_SETTING}}),this.foldType!==l.FoldUrlIconType.None&&(this.foldAll(),this.editor.on("cursorActivity",this.unfoldAtCursor.bind(this)),this.editor.on("cursorActivity",r.default(this.foldAll.bind(this),200)))}))}foldAll(){return i(this,void 0,void 0,(function*(){const t=this.editor.getDoc(),e=this.editor.getCursor(),n=this.editor.getTokenTypeAt(e);t.eachLine(i=>{var o;const r=t.getLineNumber(i);if(null===r)return;const s=this.editor.getLineTokens(r);for(const[i,l]of s.entries())(null===(o=l.type)||void 0===o?void 0:o.includes("string url"))&&1!==l.string.length&&(this.editor.findMarksAt({line:r,ch:l.start}).find(t=>"note-link-folded-url"===t.className)||c(i,s)||(null==n?void 0:n.includes("string url"))&&e.line===r&&e.ch<=l.end&&e.ch>=l.start||t.markText({line:r,ch:l.start},{line:r,ch:l.end},{replacedWith:this.createFoldMarker(l.string),handleMouseEvents:!0,className:"note-link-folded-url"}))})}))}unfoldAtCursor(){const t=this.editor.getCursor(),e=this.editor.findMarksAt(t);for(const t of e)"note-link-folded-url"===t.className&&t.clear()}createFoldMarker(t){const e=document.createElement("span");if(e.classList.add("note-link-folded-url"),this.foldType===l.FoldUrlIconType.Ellipsis&&e.classList.add("fa","fa-ellipsis-h","fa-xs"),this.foldType===l.FoldUrlIconType.Icon)if(t.startsWith(":/")){const t=document.createElement("span");t.classList.add("note-link-joplin-icon"),e.appendChild(t)}else new E.UrlIcon(t,e);return e}}},function(t,e){var n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,r=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof global&&global&&global.Object===Object&&global,E="object"==typeof self&&self&&self.Object===Object&&self,c=l||E||Function("return this")(),a=Object.prototype.toString,h=Math.max,_=Math.min,T=function(){return c.Date.now()};function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function R(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==a.call(t)}(t))return NaN;if(u(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=u(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var l=o.test(t);return l||r.test(t)?s(t.slice(2),l?2:8):i.test(t)?NaN:+t}t.exports=function(t,e,n){var i,o,r,s,l,E,c=0,a=!1,d=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function N(e){var n=i,r=o;return i=o=void 0,c=e,s=t.apply(r,n)}function I(t){return c=t,l=setTimeout(p,e),a?N(t):s}function g(t){var n=t-E;return void 0===E||n>=e||n<0||d&&t-c>=r}function p(){var t=T();if(g(t))return L(t);l=setTimeout(p,function(t){var n=e-(t-E);return d?_(n,r-(t-c)):n}(t))}function L(t){return l=void 0,f&&i?N(t):(i=o=void 0,s)}function S(){var t=T(),n=g(t);if(i=arguments,o=this,E=t,n){if(void 0===l)return I(E);if(d)return l=setTimeout(p,e),N(E)}return void 0===l&&(l=setTimeout(p,e)),s}return e=R(e)||0,u(n)&&(a=!!n.leading,r=(d="maxWait"in n)?h(R(n.maxWait)||0,e):r,f="trailing"in n?!!n.trailing:f),S.cancel=function(){void 0!==l&&clearTimeout(l),c=0,i=E=o=l=void 0},S.flush=function(){return void 0===l?s:L(T())},S}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{E(i.next(t))}catch(t){r(t)}}function l(t){try{E(i.throw(t))}catch(t){r(t)}}function E(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}E((i=i.apply(t,e||[])).next())}))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UrlIcon=void 0;const r=o(n(13)),s=o(n(14)),l=n(15);class E{constructor(t,e){this.href=t,this.containerEl=e,this.pageUrl=l.getRemoteUrl(this.href);try{this.origin=new URL(this.pageUrl).origin}catch(t){this.origin=""}this.iconEl=this.createIconEl(),this.loadIcon()}get faviconUrl(){return this.origin+"/favicon.ico"}isHash(){return this.href.startsWith("#")&&this.href.length>1}createIconEl(){const t=this.containerEl.querySelector(".note-link-external-website-icon");t&&t.remove();const e=document.createElement("span");return e.innerHTML=this.isHash()?s.default:r.default,e.classList.add("note-link-external-website-icon"),this.containerEl.prepend(e),e}setIconUrl(t){const e=document.createElement("img");e.src=t,this.iconEl.innerHTML=e.outerHTML,this.iconUrl=t}loadIcon(){return i(this,void 0,void 0,(function*(){if(!this.origin||this.isHash())return;const t=E.getIconKey(this.origin),e=localStorage.getItem(t);if("DEFAULT"===e)return;let n;this.abortController=new AbortController;try{n=yield fetch(e||this.faviconUrl,{signal:this.abortController.signal})}catch(t){return}if(200===n.status){const t=yield n.blob();if(t.type.includes("image"))return void this.setIconUrl(URL.createObjectURL(t))}try{const e=yield fetch(this.pageUrl,{signal:this.abortController.signal}),n=yield e.text(),i=l.parseHtml(n).querySelector('link[rel="icon"]');if(!i)throw new Error("no icon linkEl");const o=new URL(i.getAttribute("href"),this.pageUrl).toString(),r=yield fetch(o,{signal:this.abortController.signal,redirect:"error"});if(200!==r.status)throw new Error("fetch icon failed");const s=yield r.blob();if(!s.type.includes("image"))throw new Error("fetch icon failed");{const e=URL.createObjectURL(s);this.setIconUrl(e),localStorage.setItem(t,e)}}catch(e){localStorage.setItem(t,"DEFAULT")}this.abortController=void 0}))}destroy(){this.abortController&&this.abortController.abort(),this.iconUrl&&URL.revokeObjectURL(this.iconUrl)}static getIconKey(t){return"note-link-system-icon-url-"+t}}e.UrlIcon=E},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-globe" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-hash" viewBox="0 0 16 16"><path d="M8.39 12.648a1.32 1.32 0 0 0-.015.18c0 .305.21.508.5.508.266 0 .492-.172.555-.477l.554-2.703h1.204c.421 0 .617-.234.617-.547 0-.312-.188-.53-.617-.53h-.985l.516-2.524h1.265c.43 0 .618-.227.618-.547 0-.313-.188-.524-.618-.524h-1.046l.476-2.304a1.06 1.06 0 0 0 .016-.164.51.51 0 0 0-.516-.516.54.54 0 0 0-.539.43l-.523 2.554H7.617l.477-2.304c.008-.04.015-.118.015-.164a.512.512 0 0 0-.523-.516.539.539 0 0 0-.531.43L6.53 5.484H5.414c-.43 0-.617.22-.617.532 0 .312.187.539.617.539h.906l-.515 2.523H4.609c-.421 0-.609.219-.609.531 0 .313.188.547.61.547h.976l-.516 2.492c-.008.04-.015.125-.015.18 0 .305.21.508.5.508.265 0 .492-.172.554-.477l.555-2.703h2.242l-.515 2.492zm-1-6.109h2.266l-.515 2.563H6.859l.532-2.563z"></path></svg>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRemoteUrl=e.parseHtml=void 0,e.parseHtml=function(t){return(new DOMParser).parseFromString(t,"text/html")},e.getRemoteUrl=function(t){return t.startsWith("http://")||t.startsWith("https://")?t:"https://"+t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){this.editor=t,this.doc=this.editor.getDoc()}setElementId(){const[t]=this.doc.listSelections(),{anchor:e,head:n}=t;if(this.editor.focus(),e.line!==n.line)return;const i=e.line;if(e.ch===n.ch){const t="id-of-block",e=this.doc.getLine(i);this.doc.replaceRange(` {#${t}}`,{line:i,ch:e.length}),this.doc.setSelection({line:i,ch:e.length+" {#".length},{line:i,ch:e.length+(" {#"+t).length})}else{const t="id-of-element",o=this.doc.getRange({line:i,ch:e.ch},{line:i,ch:n.ch});this.doc.replaceRange(`[${o}]{#${t}}`,{line:i,ch:e.ch},{line:i,ch:n.ch}),this.doc.setSelection({line:i,ch:e.ch+`[${o}]{#`.length},{line:i,ch:e.ch+` [${o}]{#${t}`.length-1})}}}}]).default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZWZhdWx0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2RlZmF1bHQvLi9zcmMvZHJpdmVyL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly9kZWZhdWx0Ly4vc3JjL2RyaXZlci9jb2RlTWlycm9yL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly9kZWZhdWx0Ly4vc3JjL2RyaXZlci9jb2RlTWlycm9yL2luZGV4LnRzIiwid2VicGFjazovL2RlZmF1bHQvLi9zcmMvZHJpdmVyL2NvZGVNaXJyb3IvUXVpY2tMaW5rZXIudHMiLCJ3ZWJwYWNrOi8vZGVmYXVsdC8uL25vZGVfbW9kdWxlcy9ib290c3RyYXAtaWNvbnMvaWNvbnMvdHlwZS1oMS5zdmciLCJ3ZWJwYWNrOi8vZGVmYXVsdC8uL25vZGVfbW9kdWxlcy9ib290c3RyYXAtaWNvbnMvaWNvbnMvdHlwZS1oMi5zdmciLCJ3ZWJwYWNrOi8vZGVmYXVsdC8uL25vZGVfbW9kdWxlcy9ib290c3RyYXAtaWNvbnMvaWNvbnMvdHlwZS1oMy5zdmciLCJ3ZWJwYWNrOi8vZGVmYXVsdC8uL25vZGVfbW9kdWxlcy9ib290c3RyYXAtaWNvbnMvaWNvbnMvY2FyZC1oZWFkaW5nLnN2ZyIsIndlYnBhY2s6Ly9kZWZhdWx0Ly4vbm9kZV9tb2R1bGVzL2Jvb3RzdHJhcC1pY29ucy9pY29ucy9ib3guc3ZnIiwid2VicGFjazovL2RlZmF1bHQvLi9ub2RlX21vZHVsZXMvYm9vdHN0cmFwLWljb25zL2ljb25zL2ZpbGUtZWFybWFyay1wbHVzLnN2ZyIsIndlYnBhY2s6Ly9kZWZhdWx0Ly4vc3JjL2RyaXZlci9jb2RlTWlycm9yL1VybEZvbGRlci50cyIsIndlYnBhY2s6Ly9kZWZhdWx0Ly4vbm9kZV9tb2R1bGVzL2xvZGFzaC5kZWJvdW5jZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9kZWZhdWx0Ly4vc3JjL2RyaXZlci9VcmxJY29uLnRzIiwid2VicGFjazovL2RlZmF1bHQvLi9ub2RlX21vZHVsZXMvYm9vdHN0cmFwLWljb25zL2ljb25zL2dsb2JlLnN2ZyIsIndlYnBhY2s6Ly9kZWZhdWx0Ly4vbm9kZV9tb2R1bGVzL2Jvb3RzdHJhcC1pY29ucy9pY29ucy9oYXNoLnN2ZyIsIndlYnBhY2s6Ly9kZWZhdWx0Ly4vc3JjL2RyaXZlci91dGlscy50cyIsIndlYnBhY2s6Ly9kZWZhdWx0Ly4vc3JjL2RyaXZlci9jb2RlTWlycm9yL0lkU2V0dGVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUVVJQ0tfTElOS19TRUFSQ0hfUEFUVEVSTl9TRVRUSU5HIiwiUkVGRVJSRVJfU0VBUkNIX1BBVFRFUk5fU0VUVElORyIsIlJFRkVSUkVSX0xJU1RfSEVBRElOR19TRVRUSU5HIiwiUkVGRVJSRVJfTElTVF9NRU5USU9OX1RFWFRfTUFYX0xFTkdUSCIsIlJFRkVSUkVSX0VMRU1FTlRfTlVNQkVSX0VOQUJMRUQiLCJSRUZFUlJFUl9FTEVNRU5UX05VTUJFUl9UWVBFIiwiUkVGRVJSRVJfRUxFTUVOVF9NRU5USU9OX1RFWFRfTUFYX0xFTkdUSCIsIlJFRkVSUkVSX0FVVE9fTElTVF9QT1NJVElPTl9TRVRUSU5HIiwiUkVGRVJSRVJfVklFV19SRUZFUkVOQ0VfRVhQQU5EX1NFVFRJTkciLCJSRUZFUlJFUl9QQU5FTF9FTkFCTEVEX1NFVFRJTkciLCJSRUZFUlJFUl9QQU5FTF9USVRMRV9TRVRUSU5HIiwiUkVGRVJSRVJfUEFORUxfU1RZTEVTSEVFVF9TRVRUSU5HIiwiUkVGRVJSRVJfUEFORUxfUkVGRVJFTkNFX0VYUEFORF9TRVRUSU5HIiwiUkVGRVJSRVJfUEFORUxfTUVOVElPTl9URVhUX01BWF9MRU5HVEgiLCJSRUZFUlJFUl9JREVOVElGSUVSX0VOQUJMRURfU0VUVElORyIsIlFVSUNLX0xJTktfU1lNQk9MX1NFVFRJTkciLCJRVUlDS19MSU5LX1NIT1dfUEFUSF9TRVRUSU5HIiwiUVVJQ0tfTElOS19FTEVNRU5UU19FTkFCTEVEX1NFVFRJTkciLCJRVUlDS19MSU5LX0FGVEVSX0NPTVBMRVRJT05fU0VUVElORyIsIlFVSUNLX0xJTktfQ1JFQVRFX05PVEVfU0VUVElORyIsIlBSRVZJRVdFUl9FTkFCTEVEX1NFVFRJTkciLCJQUkVWSUVXRVJfSE9WRVJfREVMQVlfU0VUVElORyIsIkVYVFJBX1NZTlRBWF9FTkFCTEVEX1NFVFRJTkciLCJVUkxfSUNPTl9FTkFCTEVEX1NFVFRJTkciLCJQUkVWSUVXRVJfVVJMX0JMQUNLTElTVF9TRVRUSU5HIiwiUFJFVklFV0VSX1VSTF9CTEFDS0xJU1RfTE9DQUwiLCJVUkxfRk9MRF9JQ09OX1NFVFRJTkciLCJOT1RFX1NFQVJDSF9QQVRURVJOX1BMQUNFSE9MREVSIiwiUkVGRVJSRVJfU0VBUkNIX1BBVFRFUk5fUExBQ0VIT0xERVIiLCJNQUlOX01BUktfQ0xBU1NfTkFNRSIsIkZPT1ROT1RFX0lEX1BSRUZJWCIsIkZPT1ROT1RFX0lURU1fQ0xBU1NfTkFNRSIsIk1BUktET1dOX1NDUklQVF9JRCIsIkNPREVfTUlSUk9SX1NDUklQVF9JRCIsIkFjdGlvbkFmdGVyQ29tcGxldGlvbiIsIkZvbGRVcmxJY29uVHlwZSIsImNvbnRleHQiLCJwbHVnaW4iLCJjb2RlbWlycm9yIiwiZGVmaW5lT3B0aW9uIiwiY20iLCJpZFNldHRlciIsImRlZmluZUV4dGVuc2lvbiIsInNldEVsZW1lbnRJZCIsImNvZGVNaXJyb3JPcHRpb25zIiwibm90ZUxpbmtTeXN0ZW0iLCJjb2RlTWlycm9yUmVzb3VyY2VzIiwiYXNzZXRzIiwiZWRpdG9yIiwiZG9jIiwidGhpcyIsImdldERvYyIsIm9uIiwidHJpZ2dlckhpbnRzIiwic2V0VGltZW91dCIsImluaXQiLCJ0cmlnZ2VyU3ltYm9sIiwicG9zdE1lc3NhZ2UiLCJldmVudCIsInBheWxvYWQiLCJsaW5rVG9FbGVtZW50RW5hYmxlZCIsImFjdGlvbkFmdGVyQ29tcGxldGlvbiIsImNyZWF0ZU5vdGVFbmFibGVkIiwiZ2V0VG9rZW5UeXBlQXQiLCJnZXRDdXJzb3IiLCJpbmNsdWRlcyIsInBvcyIsInN5bWJvbFJhbmdlIiwibGluZSIsImNoIiwibGVuZ3RoIiwiZ2V0UmFuZ2UiLCJmcm9tIiwidG8iLCJpc1VybE9ubHkiLCJpc1VybFRva2VuIiwic2hvd0hpbnQiLCJjbG9zZUNoYXJhY3RlcnMiLCJjbG9zZU9uVW5mb2N1cyIsImNvbXBsZXRlU2luZ2xlIiwiaGludCIsImdldE5vdGVDb21wbGV0aW9uIiwibm90ZUlkIiwiaXNMaW5rIiwiaHRtbCIsImlkIiwiZG9jdW1lbnQiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJpc0hlYWRpbmciLCJlbCIsInRhZ05hbWUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZmlsdGVyIiwic3RhcnRzV2l0aCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiaXNGb290bm90ZSIsIm1hcCIsImluZGV4IiwiZWxzIiwibGV2ZWwiLCJOdW1iZXIiLCJpY29uIiwidGV4dCIsImNsYXNzTmFtZSIsImVsSWQiLCJyZW5kZXIiLCJjb250YWluZXIiLCJpbm5lckhUTUwiLCJyZXBlYXQiLCJ0aXRsZSIsImVsZW1lbnRJZFN0YXJ0IiwidGl0bGVSYW5nZSIsIkVycm9yIiwiaXNIaW50aW5nRm9yU2VsZiIsImxpc3QiLCJnZXRFbGVtZW50c0xpc3QiLCJhZnRlckNvbXBsZXRpb24iLCJrZXl3b3JkU3RhcnQiLCJjb21wbGV0aW9uU3RhcnQiLCJjdXJzb3JQb3MiLCJrZXl3b3JkIiwic2VsZWN0ZWRIaW50IiwiZmluZEluZGV4Iiwic2xpY2UiLCJjb21wbGV0aW9uIiwiaGFuZGxlQ2xvc2UiLCJvZmYiLCJjdXJzb3JMaW5lIiwiY3Vyc29yQ2giLCJ0aXRsZUVuZCIsInJlcGxhY2VSYW5nZSIsIk1vdmVDdXJzb3JUb0VuZCIsInNldEN1cnNvciIsIlNlbGVjdFRleHQiLCJzZXRTZWxlY3Rpb24iLCJhZnRlckNyZWF0ZSIsIm5vdGUiLCJ0b2tlbiIsImdldFRva2VuQXQiLCJzdGFydCIsImVuZCIsInR5cGUiLCJjb250YWluZXJFbCIsImlzQ3JlYXRpbmdOZXdOb3RlIiwiaGludExpc3QiLCJpc0N1cnJlbnQiLCJwYXRoIiwiaGludEZvckVsZW1lbnRzIiwiY29tcGxldGlvbkZyb20iLCJjb21wbGV0aW9uVG8iLCJjb25jYXQiLCJnZXROZXdOb3RlSGludHMiLCJpc05vdGVIaW50Iiwibm90ZUlkRW5kIiwidG9rZW5JbmRleCIsImxpbmVUb2tlbnMiLCJwcmVUb2tlbjEiLCJwcmVUb2tlbjIiLCJzdHJpbmciLCJmb2xkVHlwZSIsIk5vbmUiLCJmb2xkQWxsIiwidW5mb2xkQXRDdXJzb3IiLCJjdXJzb3IiLCJ0b2tlblR5cGVBdEN1cnNvciIsImVhY2hMaW5lIiwibGluZU5vIiwiZ2V0TGluZU51bWJlciIsImdldExpbmVUb2tlbnMiLCJlbnRyaWVzIiwiZmluZE1hcmtzQXQiLCJmaW5kIiwibWFya2VyIiwibWFya1RleHQiLCJyZXBsYWNlZFdpdGgiLCJjcmVhdGVGb2xkTWFya2VyIiwiaGFuZGxlTW91c2VFdmVudHMiLCJtYXJrZXJzIiwiY2xlYXIiLCJocmVmIiwibWFya0VsIiwiY3JlYXRlRWxlbWVudCIsImFkZCIsIkVsbGlwc2lzIiwiSWNvbiIsImljb25FbCIsImFwcGVuZENoaWxkIiwiVXJsSWNvbiIsInJlVHJpbSIsInJlSXNCYWRIZXgiLCJyZUlzQmluYXJ5IiwicmVJc09jdGFsIiwiZnJlZVBhcnNlSW50IiwicGFyc2VJbnQiLCJmcmVlR2xvYmFsIiwiZ2xvYmFsIiwiZnJlZVNlbGYiLCJzZWxmIiwicm9vdCIsIkZ1bmN0aW9uIiwib2JqZWN0VG9TdHJpbmciLCJ0b1N0cmluZyIsIm5hdGl2ZU1heCIsIk1hdGgiLCJtYXgiLCJuYXRpdmVNaW4iLCJtaW4iLCJub3ciLCJEYXRlIiwiaXNPYmplY3QiLCJ0b051bWJlciIsImlzT2JqZWN0TGlrZSIsImlzU3ltYm9sIiwib3RoZXIiLCJ2YWx1ZU9mIiwicmVwbGFjZSIsImlzQmluYXJ5IiwidGVzdCIsImZ1bmMiLCJ3YWl0Iiwib3B0aW9ucyIsImxhc3RBcmdzIiwibGFzdFRoaXMiLCJtYXhXYWl0IiwicmVzdWx0IiwidGltZXJJZCIsImxhc3RDYWxsVGltZSIsImxhc3RJbnZva2VUaW1lIiwibGVhZGluZyIsIm1heGluZyIsInRyYWlsaW5nIiwiVHlwZUVycm9yIiwiaW52b2tlRnVuYyIsInRpbWUiLCJhcmdzIiwidGhpc0FyZyIsInVuZGVmaW5lZCIsImFwcGx5IiwibGVhZGluZ0VkZ2UiLCJ0aW1lckV4cGlyZWQiLCJzaG91bGRJbnZva2UiLCJ0aW1lU2luY2VMYXN0Q2FsbCIsInRyYWlsaW5nRWRnZSIsInJlbWFpbmluZ1dhaXQiLCJkZWJvdW5jZWQiLCJpc0ludm9raW5nIiwiYXJndW1lbnRzIiwiY2FuY2VsIiwiY2xlYXJUaW1lb3V0IiwiZmx1c2giLCJwYWdlVXJsIiwiZ2V0UmVtb3RlVXJsIiwib3JpZ2luIiwiVVJMIiwiY3JlYXRlSWNvbkVsIiwibG9hZEljb24iLCJxdWVyeVNlbGVjdG9yIiwicmVtb3ZlIiwiaXNIYXNoIiwicHJlcGVuZCIsInNyYyIsImltZ0VsIiwib3V0ZXJIVE1MIiwiaWNvblVybCIsImljb25LZXkiLCJnZXRJY29uS2V5IiwicGVyc2lzdGVkSWNvbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJyZXMiLCJhYm9ydENvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJmZXRjaCIsImZhdmljb25VcmwiLCJzaWduYWwiLCJlcnJvciIsInN0YXR1cyIsImJsb2IiLCJzZXRJY29uVXJsIiwiY3JlYXRlT2JqZWN0VVJMIiwiaWNvbkxpbmtFbCIsInBhcnNlSHRtbCIsImdldEF0dHJpYnV0ZSIsImljb25SZXMiLCJyZWRpcmVjdCIsInNldEl0ZW0iLCJhYm9ydCIsInJldm9rZU9iamVjdFVSTCIsInNlbGVjdGlvbiIsImxpc3RTZWxlY3Rpb25zIiwiYW5jaG9yIiwiaGVhZCIsImZvY3VzIiwicGxhY2Vob2xkZXIiLCJsaW5lQ29udGVudCIsImdldExpbmUiXSwibWFwcGluZ3MiOiI0QkFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUEwRGYsT0FyREFGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcs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SW1DLE9BQVVsQyxRQUN0QyxDQUFFRixPQUFNQyxHQUFJK04sRUFBTy9OLEdBQUssS0FBS21DLE9BQVUrTCxJQUFjak8sT0FBUyxVIiwiZmlsZSI6ImRyaXZlci9jb2RlTWlycm9yL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiaW1wb3J0IHR5cGUgeyBSZWZlcmVuY2UsIFJlZmVycmVyIH0gZnJvbSAnbW9kZWwvUmVmZXJyZXInO1xuXG5leHBvcnQgY29uc3QgUVVJQ0tfTElOS19TRUFSQ0hfUEFUVEVSTl9TRVRUSU5HID0gJ1FVSUNLX0xJTktfU0VBUkNIX1BBVFRFUk5fU0VUVElORyc7XG5leHBvcnQgY29uc3QgUkVGRVJSRVJfU0VBUkNIX1BBVFRFUk5fU0VUVElORyA9ICdSRUZFUlJFUl9TRUFSQ0hfUEFUVEVSTl9TRVRUSU5HJztcbmV4cG9ydCBjb25zdCBSRUZFUlJFUl9MSVNUX0hFQURJTkdfU0VUVElORyA9ICdSRUZFUlJFUl9MSVNUX0hFQURJTkdfU0VUVElORyc7XG5leHBvcnQgY29uc3QgUkVGRVJSRVJfTElTVF9NRU5USU9OX1RFWFRfTUFYX0xFTkdUSCA9ICdSRUZFUlJFUl9MSVNUX01FTlRJT05fVEVYVF9NQVhfTEVOR1RIJztcbmV4cG9ydCBjb25zdCBSRUZFUlJFUl9FTEVNRU5UX05VTUJFUl9FTkFCTEVEID0gJ1JFRkVSUkVSX0VMRU1FTlRfTlVNQkVSX0VOQUJMRUQnO1xuZXhwb3J0IGNvbnN0IFJFRkVSUkVSX0VMRU1FTlRfTlVNQkVSX1RZUEUgPSAnUkVGRVJSRVJfRUxFTUVOVF9OVU1CRVJfVFlQRSc7XG5leHBvcnQgY29uc3QgUkVGRVJSRVJfRUxFTUVOVF9NRU5USU9OX1RFWFRfTUFYX0xFTkdUSCA9ICdSRUZFUlJFUl9FTEVNRU5UX01FTlRJT05fVEVYVF9NQVhfTEVOR1RIJztcbmV4cG9ydCBjb25zdCBSRUZFUlJFUl9BVVRPX0xJU1RfUE9TSVRJT05fU0VUVElORyA9ICdSRUZFUlJFUl9BVVRPX0xJU1RfUE9TSVRJT05fU0VUVElORyc7XG5leHBvcnQgY29uc3QgUkVGRVJSRVJfVklFV19SRUZFUkVOQ0VfRVhQQU5EX1NFVFRJTkcgPSAnUkVGRVJSRVJfVklFV19SRUZFUkVOQ0VfRVhQQU5EX1NFVFRJTkcnO1xuZXhwb3J0IGNvbnN0IFJFRkVSUkVSX1BBTkVMX0VOQUJMRURfU0VUVElORyA9ICdSRUZFUlJFUl9QQU5FTF9FTkFCTEVEX1NFVFRJTkcnO1xuZXhwb3J0IGNvbnN0IFJFRkVSUkVSX1BBTkVMX1RJVExFX1NFVFRJTkcgPSAnUkVGRVJSRVJfUEFORUxfVElUTEVfU0VUVElORyc7XG5leHBvcnQgY29uc3QgUkVGRVJSRVJfUEFORUxfU1RZTEVTSEVFVF9TRVRUSU5HID0gJ1JFRkVSUkVSX1BBTkVMX1NUWUxFU0hFRVRfU0VUVElORyc7XG5leHBvcnQgY29uc3QgUkVGRVJSRVJfUEFORUxfUkVGRVJFTkNFX0VYUEFORF9TRVRUSU5HID0gJ1JFRkVSUkVSX1BBTkVMX1JFRkVSRU5DRV9FWFBBTkRfU0VUVElORyc7XG5leHBvcnQgY29uc3QgUkVGRVJSRVJfUEFORUxfTUVOVElPTl9URVhUX01BWF9MRU5HVEggPSAnUkVGRVJSRVJfUEFORUxfTUVOVElPTl9URVhUX01BWF9MRU5HVEgnO1xuZXhwb3J0IGNvbnN0IFJFRkVSUkVSX0lERU5USUZJRVJfRU5BQkxFRF9TRVRUSU5HID0gJ1JFRkVSUkVSX0lERU5USUZJRVJfRU5BQkxFRF9TRVRUSU5HJztcbmV4cG9ydCBjb25zdCBRVUlDS19MSU5LX1NZTUJPTF9TRVRUSU5HID0gJ1FVSUNLX0xJTktfU1lNQk9MX1NFVFRJTkcnO1xuZXhwb3J0IGNvbnN0IFFVSUNLX0xJTktfU0hPV19QQVRIX1NFVFRJTkcgPSAnUVVJQ0tfTElOS19TSE9XX1BBVEhfU0VUVElORyc7XG5leHBvcnQgY29uc3QgUVVJQ0tfTElOS19FTEVNRU5UU19FTkFCTEVEX1NFVFRJTkcgPSAnUVVJQ0tfTElOS19FTEVNRU5UU19FTkFCTEVEX1NFVFRJTkcnO1xuZXhwb3J0IGNvbnN0IFFVSUNLX0xJTktfQUZURVJfQ09NUExFVElPTl9TRVRUSU5HID0gJ1FVSUNLX0xJTktfQUZURVJfQ09NUExFVElPTl9TRVRUSU5HJztcbmV4cG9ydCBjb25zdCBRVUlDS19MSU5LX0NSRUFURV9OT1RFX1NFVFRJTkcgPSAnUVVJQ0tfTElOS19DUkVBVEVfTk9URV9TRVRUSU5HJztcbmV4cG9ydCBjb25zdCBQUkVWSUVXRVJfRU5BQkxFRF9TRVRUSU5HID0gJ1BSRVZJRVdFUl9FTkFCTEVEX1NFVFRJTkcnO1xuZXhwb3J0IGNvbnN0IFBSRVZJRVdFUl9IT1ZFUl9ERUxBWV9TRVRUSU5HID0gJ1BSRVZJRVdFUl9IT1ZFUl9ERUxBWV9TRVRUSU5HJztcbmV4cG9ydCBjb25zdCBFWFRSQV9TWU5UQVhfRU5BQkxFRF9TRVRUSU5HID0gJ0VYVFJBX1NZTlRBWF9FTkFCTEVEX1NFVFRJTkcnO1xuZXhwb3J0IGNvbnN0IFVSTF9JQ09OX0VOQUJMRURfU0VUVElORyA9ICdVUkxfSUNPTl9FTkFCTEVEX1NFVFRJTkcnO1xuZXhwb3J0IGNvbnN0IFBSRVZJRVdFUl9VUkxfQkxBQ0tMSVNUX1NFVFRJTkcgPSAnUFJFVklFV0VSX1VSTF9CTEFDS0xJU1RfU0VUVElORyc7XG5leHBvcnQgY29uc3QgUFJFVklFV0VSX1VSTF9CTEFDS0xJU1RfTE9DQUwgPSAnam9wbGluJztcbmV4cG9ydCBjb25zdCBVUkxfRk9MRF9JQ09OX1NFVFRJTkcgPSAnVVJMX0ZPTERfSUNPTl9TRVRUSU5HJztcblxuZXhwb3J0IGNvbnN0IE5PVEVfU0VBUkNIX1BBVFRFUk5fUExBQ0VIT0xERVIgPSAnJGtleXdvcmQnO1xuZXhwb3J0IGNvbnN0IFJFRkVSUkVSX1NFQVJDSF9QQVRURVJOX1BMQUNFSE9MREVSID0gJyRub3RlSWQnO1xuZXhwb3J0IGNvbnN0IE1BSU5fTUFSS19DTEFTU19OQU1FID0gJ25vdGUtbGluay1tYXJrLW1haW4nO1xuZXhwb3J0IGNvbnN0IEZPT1ROT1RFX0lEX1BSRUZJWCA9ICdmbnJlZic7XG5cbmV4cG9ydCBjb25zdCBGT09UTk9URV9JVEVNX0NMQVNTX05BTUUgPSAnZm9vdG5vdGUtaXRlbSc7XG5leHBvcnQgY29uc3QgTUFSS0RPV05fU0NSSVBUX0lEID0gJ3lsYzM5NS5ub3RlTGlua1N5c3RlbS5NQVJLRE9XTl9TQ1JJUFRfSUQnO1xuZXhwb3J0IGNvbnN0IENPREVfTUlSUk9SX1NDUklQVF9JRCA9ICd5bGMzOTUubm90ZUxpbmtTeXN0ZW0uQ09ERV9NSVJST1JfU0NSSVBUX0lEJztcblxuZXhwb3J0IHR5cGUgUmVxdWVzdCA9XG4gIHwgU2VhcmNoTm90ZXNSZXF1ZXN0XG4gIHwgU2VhcmNoUmVmZXJyZXJzUmVxdWVzdFxuICB8IE9wZW5Ob3RlUmVxdWVzdFxuICB8IFF1ZXJ5RnJvbVJlZmVyZW5jZVJlcXVlc3RcbiAgfCBRdWVyeVNldHRpbmdSZXF1ZXN0XG4gIHwgV3JpdGVDbGlwYm9hcmRSZXF1ZXN0XG4gIHwgRmV0Y2hOb3RlSHRtbFJlcXVlc3RcbiAgfCBDcmVhdGVOb3RlUmVxdWVzdFxuICB8IFF1ZXJ5Tm90ZVJlcXVlc3RcbiAgfCBTY3JvbGxUb0hhc2hSZXF1ZXN0XG4gIHwgUXVlcnlOb3RlUmVzb3VyY2VzUmVxdWVzdFxuICB8IFF1ZXJ5Q3VycmVudE5vdGVSZXF1ZXN0O1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlYXJjaE5vdGVzUmVxdWVzdCB7XG4gIGV2ZW50OiAnc2VhcmNoTm90ZXMnO1xuICBwYXlsb2FkOiB7IGtleXdvcmQ6IHN0cmluZyB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlYXJjaFJlZmVycmVyc1JlcXVlc3Qge1xuICBldmVudDogJ3NlYXJjaFJlZmVycmVycyc7XG4gIHBheWxvYWQ6IHtcbiAgICB0eXBlOiAnbm90ZScgfCAncGFuZWwnO1xuICAgIGVsZW1lbnRJZHM/OiBzdHJpbmdbXTtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcGVuTm90ZVJlcXVlc3Qge1xuICBldmVudDogJ29wZW5Ob3RlJztcbiAgcGF5bG9hZDoge1xuICAgIG5vdGVJZDogc3RyaW5nO1xuICAgIHJlZmVyZW5jZT86IFJlZmVyZW5jZTtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeUZyb21SZWZlcmVuY2VSZXF1ZXN0IHtcbiAgZXZlbnQ6ICdxdWVyeUZyb21SZWZlcmVuY2UnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNjcm9sbFRvSGFzaFJlcXVlc3Qge1xuICBldmVudDogJ3Njcm9sbFRvSGFzaCc7XG4gIHBheWxvYWQ6IHsgaGFzaDogc3RyaW5nIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV3JpdGVDbGlwYm9hcmRSZXF1ZXN0IHtcbiAgZXZlbnQ6ICd3cml0ZUNsaXBib2FyZCc7XG4gIHBheWxvYWQ6IHtcbiAgICBjb250ZW50OiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VhcmNoRWxlbWVudFJlZmVycmVyc1Jlc3BvbnNlIHtcbiAgW2luZGV4OiBzdHJpbmddOiBSZWZlcnJlcltdO1xufVxuXG5leHBvcnQgdHlwZSBTZWFyY2hOb3RlUmVmZXJyZXJzUmVzcG9uc2UgPSBSZWZlcnJlcltdO1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5U2V0dGluZ1JlcXVlc3Qge1xuICBldmVudDogJ3F1ZXJ5U2V0dGluZyc7XG4gIHBheWxvYWQ6IHsga2V5OiBzdHJpbmcgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeUN1cnJlbnROb3RlUmVxdWVzdCB7XG4gIGV2ZW50OiAncXVlcnlDdXJyZW50Tm90ZSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmV0Y2hOb3RlSHRtbFJlcXVlc3Qge1xuICBldmVudDogJ2ZldGNoTm90ZUh0bWwnO1xuICBwYXlsb2FkOiB7IGlkOiBzdHJpbmcgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVOb3RlUmVxdWVzdCB7XG4gIGV2ZW50OiAnY3JlYXRlTm90ZSc7XG4gIHBheWxvYWQ6IHsgdGl0bGU6IHN0cmluZzsgdHlwZTogJ3RvZG8nIHwgJ25vdGUnIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlOb3RlUmVxdWVzdCB7XG4gIGV2ZW50OiAncXVlcnlOb3RlJztcbiAgcGF5bG9hZDogeyBpZDogc3RyaW5nIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlOb3RlUmVzb3VyY2VzUmVxdWVzdCB7XG4gIGV2ZW50OiAncXVlcnlOb3RlUmVzb3VyY2VzJztcbiAgcGF5bG9hZDogeyBub3RlSWQ6IHN0cmluZyB9O1xufVxuIiwiZXhwb3J0IGVudW0gQWN0aW9uQWZ0ZXJDb21wbGV0aW9uIHtcbiAgTW92ZUN1cnNvclRvRW5kLFxuICBTZWxlY3RUZXh0LFxufVxuXG5leHBvcnQgZW51bSBGb2xkVXJsSWNvblR5cGUge1xuICBOb25lLFxuICBFbGxpcHNpcyxcbiAgSWNvbixcbn1cbiIsImltcG9ydCB0eXBlIENvZGVNaXJyb3IgZnJvbSAnY29kZW1pcnJvcic7XG5pbXBvcnQgdHlwZSB7IEVkaXRvciB9IGZyb20gJ2NvZGVtaXJyb3InO1xuaW1wb3J0IHR5cGUge1xuICBRdWVyeVNldHRpbmdSZXF1ZXN0LFxuICBTZWFyY2hOb3Rlc1JlcXVlc3QsXG4gIEZldGNoTm90ZUh0bWxSZXF1ZXN0LFxuICBDcmVhdGVOb3RlUmVxdWVzdCxcbiAgUXVlcnlDdXJyZW50Tm90ZVJlcXVlc3QsXG59IGZyb20gJ2RyaXZlci9jb25zdGFudHMnO1xuaW1wb3J0IFF1aWNrTGlua2VyLCB7IEV4dGVuZGVkRWRpdG9yIH0gZnJvbSAnLi9RdWlja0xpbmtlcic7XG5pbXBvcnQgVXJsRm9sZGVyIGZyb20gJy4vVXJsRm9sZGVyJztcbmltcG9ydCBJZFNldHRlciBmcm9tICcuL0lkU2V0dGVyJztcblxuZXhwb3J0IGludGVyZmFjZSBDb250ZXh0IHtcbiAgcG9zdE1lc3NhZ2U6IDxUPihcbiAgICByZXF1ZXN0OlxuICAgICAgfCBRdWVyeVNldHRpbmdSZXF1ZXN0XG4gICAgICB8IFNlYXJjaE5vdGVzUmVxdWVzdFxuICAgICAgfCBGZXRjaE5vdGVIdG1sUmVxdWVzdFxuICAgICAgfCBDcmVhdGVOb3RlUmVxdWVzdFxuICAgICAgfCBRdWVyeUN1cnJlbnROb3RlUmVxdWVzdCxcbiAgKSA9PiBQcm9taXNlPFQ+O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoY29udGV4dDogQ29udGV4dCkge1xuICByZXR1cm4ge1xuICAgIHBsdWdpbjogZnVuY3Rpb24gKGNvZGVtaXJyb3I6IHR5cGVvZiBDb2RlTWlycm9yKSB7XG4gICAgICBjb2RlbWlycm9yLmRlZmluZU9wdGlvbignbm90ZUxpbmtTeXN0ZW0nLCBmYWxzZSwgKGNtKSA9PiB7XG4gICAgICAgIG5ldyBRdWlja0xpbmtlcihjb250ZXh0LCBjbSBhcyBFZGl0b3IgJiBFeHRlbmRlZEVkaXRvciwgY29kZW1pcnJvcik7XG4gICAgICAgIG5ldyBVcmxGb2xkZXIoY29udGV4dCwgY20pO1xuICAgICAgICBjb25zdCBpZFNldHRlciA9IG5ldyBJZFNldHRlcihjbSk7XG5cbiAgICAgICAgY29kZW1pcnJvci5kZWZpbmVFeHRlbnNpb24oJ3NldEVsZW1lbnRJZCcsIGlkU2V0dGVyLnNldEVsZW1lbnRJZC5iaW5kKGlkU2V0dGVyKSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNvZGVNaXJyb3JPcHRpb25zOiB7XG4gICAgICBub3RlTGlua1N5c3RlbTogdHJ1ZSxcbiAgICB9LFxuICAgIGNvZGVNaXJyb3JSZXNvdXJjZXM6IFsnYWRkb24vaGludC9zaG93LWhpbnQnXSxcbiAgICBhc3NldHM6ICgpID0+IFt7IG5hbWU6ICcuL3N0eWxlLmNzcycgfV0sXG4gIH07XG59XG4iLCJpbXBvcnQgdHlwZSB7IEVkaXRvciwgUG9zaXRpb24gfSBmcm9tICdjb2RlbWlycm9yJztcbmltcG9ydCB0eXBlIENvZGVNaXJyb3IgZnJvbSAnY29kZW1pcnJvcic7XG5pbXBvcnQgaDFJY29uIGZyb20gJ2Jvb3RzdHJhcC1pY29ucy9pY29ucy90eXBlLWgxLnN2Zyc7XG5pbXBvcnQgaDJJY29uIGZyb20gJ2Jvb3RzdHJhcC1pY29ucy9pY29ucy90eXBlLWgyLnN2Zyc7XG5pbXBvcnQgaDNJY29uIGZyb20gJ2Jvb3RzdHJhcC1pY29ucy9pY29ucy90eXBlLWgzLnN2Zyc7XG5pbXBvcnQgY2FyZEhlYWRpbmdJY29uIGZyb20gJ2Jvb3RzdHJhcC1pY29ucy9pY29ucy9jYXJkLWhlYWRpbmcuc3ZnJztcbmltcG9ydCBib3hJY29uIGZyb20gJ2Jvb3RzdHJhcC1pY29ucy9pY29ucy9ib3guc3ZnJztcbmltcG9ydCBwbHVzSWNvbiBmcm9tICdib290c3RyYXAtaWNvbnMvaWNvbnMvZmlsZS1lYXJtYXJrLXBsdXMuc3ZnJztcbmltcG9ydCB7XG4gIFFVSUNLX0xJTktfU1lNQk9MX1NFVFRJTkcsXG4gIFFVSUNLX0xJTktfRUxFTUVOVFNfRU5BQkxFRF9TRVRUSU5HLFxuICBRVUlDS19MSU5LX0FGVEVSX0NPTVBMRVRJT05fU0VUVElORyxcbiAgUVVJQ0tfTElOS19DUkVBVEVfTk9URV9TRVRUSU5HLFxuICBGT09UTk9URV9JRF9QUkVGSVgsXG4gIEZPT1ROT1RFX0lURU1fQ0xBU1NfTkFNRSxcbn0gZnJvbSAnZHJpdmVyL2NvbnN0YW50cyc7XG5pbXBvcnQgdHlwZSB7IFNlYXJjaFJlc3VsdCwgTm90ZSB9IGZyb20gJ21vZGVsL1JlZmVycmVyJztcbmltcG9ydCB7IEFjdGlvbkFmdGVyQ29tcGxldGlvbiB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB0eXBlIHsgQ29udGV4dCB9IGZyb20gJy4vaW5kZXgnO1xuXG4vLyBAc2VlIGh0dHBzOi8vY29kZW1pcnJvci5uZXQvZG9jL21hbnVhbC5odG1sI2FkZG9uX3Nob3ctaGludFxuaW50ZXJmYWNlIEhpbnQge1xuICB0ZXh0OiBzdHJpbmc7XG4gIGRpc3BsYXlUZXh0Pzogc3RyaW5nO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIHJlbmRlcj86IChjb250YWluZXI6IEVsZW1lbnQsIGNvbXBsZXRpb246IENvbXBsZXRpb24sIGhpbnQ6IEhpbnQpID0+IHZvaWQ7XG4gIGhpbnQ/OiAoY206IHR5cGVvZiBDb2RlTWlycm9yLCBjb21wbGV0aW9uOiBDb21wbGV0aW9uLCBoaW50OiBIaW50KSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgTm90ZUhpbnQgZXh0ZW5kcyBIaW50IHtcbiAgbm90ZTogU2VhcmNoUmVzdWx0O1xufVxuXG5pbnRlcmZhY2UgRWxIaW50IGV4dGVuZHMgSGludCB7XG4gIGVsSWQ6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIENvbXBsZXRpb24ge1xuICBmcm9tOiBQb3NpdGlvbjtcbiAgdG86IFBvc2l0aW9uO1xuICBsaXN0OiAoSGludCB8IHN0cmluZylbXTtcbiAgc2VsZWN0ZWRIaW50PzogbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBFeHRlbmRlZEVkaXRvciA9IHtcbiAgc2hvd0hpbnQob3B0aW9uczoge1xuICAgIGNvbXBsZXRlU2luZ2xlOiBib29sZWFuO1xuICAgIGNsb3NlQ2hhcmFjdGVyczogUmVnRXhwO1xuICAgIGNsb3NlT25VbmZvY3VzOiBib29sZWFuO1xuICAgIGhpbnQ6IChjbTogRWRpdG9yKSA9PiBDb21wbGV0aW9uIHwgdW5kZWZpbmVkIHwgUHJvbWlzZTxDb21wbGV0aW9uIHwgdW5kZWZpbmVkPjtcbiAgfSk6IHZvaWQ7XG59O1xuXG5jb25zdCBISU5UX0lURU1fQ0xBU1MgPSAnbm90ZS1saW5rLWhpbnQnO1xuY29uc3QgSElOVF9JVEVNX1BBVEhfQ0xBU1MgPSAnbm90ZS1saW5rLWhpbnQtcGF0aCc7XG5jb25zdCBISU5UX0lURU1fU0VMRl9DTEFTUyA9ICdub3RlLWxpbmstaGludC1zZWxmJztcbmZ1bmN0aW9uIGlzTm90ZUhpbnQoaGludDogSGludCk6IGhpbnQgaXMgTm90ZUhpbnQge1xuICByZXR1cm4gJ25vdGUnIGluIGhpbnQ7XG59XG5cbmZ1bmN0aW9uIGlzRm9vdG5vdGUoZWw6IEhUTUxFbGVtZW50KSB7XG4gIHJldHVybiBlbC5pZC5zdGFydHNXaXRoKEZPT1ROT1RFX0lEX1BSRUZJWCkgfHwgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKEZPT1ROT1RFX0lURU1fQ0xBU1NfTkFNRSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFF1aWNrTGlua2VyIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBjb250ZXh0OiBDb250ZXh0LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZWRpdG9yOiBFeHRlbmRlZEVkaXRvciAmIEVkaXRvcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IGNtOiB0eXBlb2YgQ29kZU1pcnJvcixcbiAgKSB7XG4gICAgdGhpcy5lZGl0b3Iub24oJ2N1cnNvckFjdGl2aXR5JywgdGhpcy50cmlnZ2VySGludHMuYmluZCh0aGlzKSk7XG4gICAgLy8gaGFjazogZG9uJ3Qga25vdyB3aHkgZmV0Y2hpbmcgbXVzdCBoYXBwZW4gaW4gbmV4dCBtaWNybyB0YXNrXG4gICAgc2V0VGltZW91dCh0aGlzLmluaXQuYmluZCh0aGlzKSwgMTAwKTtcbiAgfVxuXG4gIGFzeW5jIGluaXQoKSB7XG4gICAgdGhpcy50cmlnZ2VyU3ltYm9sID0gYXdhaXQgdGhpcy5jb250ZXh0LnBvc3RNZXNzYWdlPHN0cmluZz4oe1xuICAgICAgZXZlbnQ6ICdxdWVyeVNldHRpbmcnLFxuICAgICAgcGF5bG9hZDogeyBrZXk6IFFVSUNLX0xJTktfU1lNQk9MX1NFVFRJTkcgfSxcbiAgICB9KTtcblxuICAgIGlmICghdGhpcy50cmlnZ2VyU3ltYm9sKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5saW5rVG9FbGVtZW50RW5hYmxlZCA9IGF3YWl0IHRoaXMuY29udGV4dC5wb3N0TWVzc2FnZTxib29sZWFuPih7XG4gICAgICBldmVudDogJ3F1ZXJ5U2V0dGluZycsXG4gICAgICBwYXlsb2FkOiB7IGtleTogUVVJQ0tfTElOS19FTEVNRU5UU19FTkFCTEVEX1NFVFRJTkcgfSxcbiAgICB9KTtcbiAgICB0aGlzLmFjdGlvbkFmdGVyQ29tcGxldGlvbiA9IGF3YWl0IHRoaXMuY29udGV4dC5wb3N0TWVzc2FnZTxBY3Rpb25BZnRlckNvbXBsZXRpb24+KHtcbiAgICAgIGV2ZW50OiAncXVlcnlTZXR0aW5nJyxcbiAgICAgIHBheWxvYWQ6IHsga2V5OiBRVUlDS19MSU5LX0FGVEVSX0NPTVBMRVRJT05fU0VUVElORyB9LFxuICAgIH0pO1xuICAgIHRoaXMuY3JlYXRlTm90ZUVuYWJsZWQgPSBhd2FpdCB0aGlzLmNvbnRleHQucG9zdE1lc3NhZ2U8Ym9vbGVhbj4oe1xuICAgICAgZXZlbnQ6ICdxdWVyeVNldHRpbmcnLFxuICAgICAgcGF5bG9hZDogeyBrZXk6IFFVSUNLX0xJTktfQ1JFQVRFX05PVEVfU0VUVElORyB9LFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZWFkb25seSBkb2MgPSB0aGlzLmVkaXRvci5nZXREb2MoKTtcbiAgcHJpdmF0ZSB0cmlnZ2VyU3ltYm9sPzogc3RyaW5nO1xuICBwcml2YXRlIHN5bWJvbFJhbmdlPzogeyBmcm9tOiBQb3NpdGlvbjsgdG86IFBvc2l0aW9uIH07XG4gIHByaXZhdGUgbGlua1RvRWxlbWVudEVuYWJsZWQ/OiBib29sZWFuO1xuICBwcml2YXRlIGFjdGlvbkFmdGVyQ29tcGxldGlvbj86IEFjdGlvbkFmdGVyQ29tcGxldGlvbjtcbiAgcHJpdmF0ZSBjcmVhdGVOb3RlRW5hYmxlZD86IGJvb2xlYW47XG4gIHByaXZhdGUgaXNVcmxPbmx5PzogYm9vbGVhbjtcblxuICBwcml2YXRlIGlzVXJsVG9rZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuZWRpdG9yLmdldFRva2VuVHlwZUF0KHRoaXMuZWRpdG9yLmdldEN1cnNvcigpKT8uaW5jbHVkZXMoJ3N0cmluZyB1cmwnKSB8fCBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgdHJpZ2dlckhpbnRzKCkge1xuICAgIGlmICghdGhpcy50cmlnZ2VyU3ltYm9sKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcG9zID0gdGhpcy5kb2MuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3Qgc3ltYm9sUmFuZ2UgPSBbeyBsaW5lOiBwb3MubGluZSwgY2g6IHBvcy5jaCAtIHRoaXMudHJpZ2dlclN5bWJvbC5sZW5ndGggfSwgcG9zXSBhcyBjb25zdDtcbiAgICBjb25zdCBjaGFycyA9IHRoaXMuZG9jLmdldFJhbmdlKC4uLnN5bWJvbFJhbmdlKTtcblxuICAgIGlmIChjaGFycyA9PT0gdGhpcy50cmlnZ2VyU3ltYm9sKSB7XG4gICAgICB0aGlzLnN5bWJvbFJhbmdlID0geyBmcm9tOiBzeW1ib2xSYW5nZVswXSwgdG86IHN5bWJvbFJhbmdlWzFdIH07XG4gICAgICB0aGlzLmlzVXJsT25seSA9IHRoaXMuaXNVcmxUb2tlbigpO1xuICAgICAgdGhpcy5lZGl0b3Iuc2hvd0hpbnQoe1xuICAgICAgICBjbG9zZUNoYXJhY3RlcnM6IC9bKClcXFtcXF17fTs6PixdLyxcbiAgICAgICAgY2xvc2VPblVuZm9jdXM6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgICAgIGNvbXBsZXRlU2luZ2xlOiBmYWxzZSxcbiAgICAgICAgaGludDogdGhpcy5nZXROb3RlQ29tcGxldGlvbi5iaW5kKHRoaXMpLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRFbGVtZW50c0xpc3Qobm90ZUlkOiBzdHJpbmcsIGlzTGluazogYm9vbGVhbik6IFByb21pc2U8RWxIaW50W10+IHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgdGhpcy5jb250ZXh0LnBvc3RNZXNzYWdlPHN0cmluZz4oe1xuICAgICAgZXZlbnQ6ICdmZXRjaE5vdGVIdG1sJyxcbiAgICAgIHBheWxvYWQ6IHsgaWQ6IG5vdGVJZCB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgZG9jdW1lbnQgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGh0bWwsICd0ZXh0L2h0bWwnKTtcbiAgICBjb25zdCBpc0hlYWRpbmcgPSAoZWw6IEVsZW1lbnQpID0+IFsnSDEnLCAnSDInLCAnSDMnLCAnSDQnLCAnSDUnLCAnSDYnXS5pbmNsdWRlcyhlbC50YWdOYW1lKTtcblxuICAgIHJldHVybiAoWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpZF0nKV0gYXMgSFRNTEVsZW1lbnRbXSlcbiAgICAgIC5maWx0ZXIoKGVsKSA9PiAhaXNGb290bm90ZShlbCkpXG4gICAgICAubWFwKChlbCwgaW5kZXgsIGVscykgPT4ge1xuICAgICAgICBjb25zdCBsZXZlbCA9IGlzSGVhZGluZyhlbClcbiAgICAgICAgICA/IE51bWJlcihlbC50YWdOYW1lWzFdKVxuICAgICAgICAgIDogKCgpID0+IHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBlbHNbaV07IGktLSkge1xuICAgICAgICAgICAgICAgIGlmIChpc0hlYWRpbmcoZWxzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihlbHNbaV0udGFnTmFtZVsxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICBjb25zdCBpY29uID0gKCgpID0+IHtcbiAgICAgICAgICBpZiAoIWlzSGVhZGluZyhlbCkpIHtcbiAgICAgICAgICAgIHJldHVybiBib3hJY29uO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN3aXRjaCAobGV2ZWwpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgcmV0dXJuIGgxSWNvbjtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgcmV0dXJuIGgySWNvbjtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgcmV0dXJuIGgzSWNvbjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHJldHVybiBjYXJkSGVhZGluZ0ljb247XG4gICAgICAgICAgfVxuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdGV4dDogaXNMaW5rID8gYFske2VsLmlkfV0oIyR7ZWwuaWR9KWAgOiBgIyR7ZWwuaWR9YCxcbiAgICAgICAgICBjbGFzc05hbWU6IEhJTlRfSVRFTV9DTEFTUyxcbiAgICAgICAgICBlbElkOiBlbC5pZCxcbiAgICAgICAgICByZW5kZXI6IChjb250YWluZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgJHsnICcucmVwZWF0KGxldmVsIC0gMSl9JHtpY29ufSR7ZWwuaWR9YDtcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhpbnRGb3JFbGVtZW50cyhcbiAgICB7IGlkOiBub3RlSWQsIHRpdGxlIH06IFNlYXJjaFJlc3VsdCxcbiAgICBlbGVtZW50SWRTdGFydD86IFBvc2l0aW9uLFxuICAgIHRpdGxlUmFuZ2U/OiBbUG9zaXRpb24sIFBvc2l0aW9uXSxcbiAgKSB7XG4gICAgaWYgKCF0aGlzLnN5bWJvbFJhbmdlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIHN5bWJvbCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGlzSGludGluZ0ZvclNlbGYgPSAhZWxlbWVudElkU3RhcnQ7XG4gICAgY29uc3QgbGlzdCA9IGF3YWl0IHRoaXMuZ2V0RWxlbWVudHNMaXN0KG5vdGVJZCwgaXNIaW50aW5nRm9yU2VsZik7XG5cbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmICh0aXRsZVJhbmdlKSB7XG4gICAgICAgIHRoaXMuYWZ0ZXJDb21wbGV0aW9uKHRpdGxlUmFuZ2UpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGtleXdvcmRTdGFydCA9IGVsZW1lbnRJZFN0YXJ0IHx8IHRoaXMuc3ltYm9sUmFuZ2UudG87XG4gICAgY29uc3QgY29tcGxldGlvblN0YXJ0ID0gZWxlbWVudElkU3RhcnQgfHwgdGhpcy5zeW1ib2xSYW5nZS5mcm9tO1xuXG4gICAgdGhpcy5lZGl0b3Iuc2hvd0hpbnQoe1xuICAgICAgY29tcGxldGVTaW5nbGU6IGZhbHNlLFxuICAgICAgY2xvc2VDaGFyYWN0ZXJzOiAvWygpXFxbXFxde307Oj4sXS8sXG4gICAgICBjbG9zZU9uVW5mb2N1czogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbiAgICAgIGhpbnQ6ICgpID0+IHtcbiAgICAgICAgaWYgKCFpc0hpbnRpbmdGb3JTZWxmICYmICF0aGlzLmlzVXJsVG9rZW4oKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGN1cnNvclBvcyA9IHRoaXMuZG9jLmdldEN1cnNvcigpO1xuICAgICAgICBjb25zdCBrZXl3b3JkID0gdGhpcy5kb2MuZ2V0UmFuZ2Uoa2V5d29yZFN0YXJ0LCBjdXJzb3JQb3MpO1xuICAgICAgICBjb25zdCBzZWxlY3RlZEhpbnQgPSBsaXN0LmZpbmRJbmRleCgoeyB0ZXh0IH0pID0+IHRleHQuc2xpY2UoMSkuaW5jbHVkZXMoa2V5d29yZCkpO1xuXG4gICAgICAgIGlmIChzZWxlY3RlZEhpbnQgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29tcGxldGlvbiA9IHtcbiAgICAgICAgICBmcm9tOiBjb21wbGV0aW9uU3RhcnQsXG4gICAgICAgICAgdG86IGN1cnNvclBvcyxcbiAgICAgICAgICBsaXN0LFxuICAgICAgICAgIHNlbGVjdGVkSGludCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBoYW5kbGVDbG9zZTogYW55ID0gKCkgPT4ge1xuICAgICAgICAgIGlmICghdGhpcy5zeW1ib2xSYW5nZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBzeW1ib2xSYW5nZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHsgZnJvbSB9ID0gdGhpcy5zeW1ib2xSYW5nZTtcblxuICAgICAgICAgIGlmICghaXNIaW50aW5nRm9yU2VsZiAmJiAha2V5d29yZCkge1xuICAgICAgICAgICAgdGhpcy5hZnRlckNvbXBsZXRpb24oW1xuICAgICAgICAgICAgICB7IGxpbmU6IGZyb20ubGluZSwgY2g6IGZyb20uY2ggKyAxIH0sXG4gICAgICAgICAgICAgIHsgbGluZTogZnJvbS5saW5lLCBjaDogZnJvbS5jaCArIDEgKyB0aXRsZS5sZW5ndGggfSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNtLm9uKGNvbXBsZXRpb24sICdjbG9zZScsIGhhbmRsZUNsb3NlKTtcbiAgICAgICAgdGhpcy5jbS5vbihjb21wbGV0aW9uLCAncGljaycsICgoeyB0ZXh0LCBlbElkIH06IEVsSGludCkgPT4ge1xuICAgICAgICAgIHRoaXMuY20ub2ZmKGNvbXBsZXRpb24sICdjbG9zZScsIGhhbmRsZUNsb3NlKTtcblxuICAgICAgICAgIGNvbnN0IHsgbGluZTogY3Vyc29yTGluZSwgY2g6IGN1cnNvckNoIH0gPSB0aGlzLmRvYy5nZXRDdXJzb3IoKTtcblxuICAgICAgICAgIGlmIChpc0hpbnRpbmdGb3JTZWxmKSB7XG4gICAgICAgICAgICB0aGlzLmFmdGVyQ29tcGxldGlvbihbXG4gICAgICAgICAgICAgIHsgbGluZTogY3Vyc29yTGluZSwgY2g6IGN1cnNvckNoIC0gdGV4dC5sZW5ndGggKyAxIH0sXG4gICAgICAgICAgICAgIHsgbGluZTogY3Vyc29yTGluZSwgY2g6IGN1cnNvckNoIC0gYF0oIyR7ZWxJZH0pYC5sZW5ndGggfSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHRpdGxlRW5kID0gY3Vyc29yQ2ggLSBgKDovJHtub3RlSWR9JHt0ZXh0fSlgLmxlbmd0aDtcblxuICAgICAgICAgIGlmICghdGhpcy5pc1VybE9ubHkpIHtcbiAgICAgICAgICAgIHRoaXMuZG9jLnJlcGxhY2VSYW5nZSh0ZXh0LCB7XG4gICAgICAgICAgICAgIGxpbmU6IGN1cnNvckxpbmUsXG4gICAgICAgICAgICAgIGNoOiB0aXRsZUVuZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuYWZ0ZXJDb21wbGV0aW9uKFtcbiAgICAgICAgICAgIHsgbGluZTogY3Vyc29yTGluZSwgY2g6IHRpdGxlRW5kIC0gdGl0bGUubGVuZ3RoIH0sXG4gICAgICAgICAgICB7IGxpbmU6IGN1cnNvckxpbmUsIGNoOiB0aXRsZUVuZCArIHRleHQubGVuZ3RoIH0sXG4gICAgICAgICAgXSk7XG4gICAgICAgIH0pIGFzIGFueSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbXBsZXRpb247XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhZnRlckNvbXBsZXRpb24odGl0bGVSYW5nZTogW1Bvc2l0aW9uLCBQb3NpdGlvbl0pIHtcbiAgICBjb25zdCB7IGxpbmUsIGNoIH0gPSB0aGlzLmRvYy5nZXRDdXJzb3IoKTtcblxuICAgIGlmICh0aGlzLmFjdGlvbkFmdGVyQ29tcGxldGlvbiA9PT0gQWN0aW9uQWZ0ZXJDb21wbGV0aW9uLk1vdmVDdXJzb3JUb0VuZCB8fCB0aGlzLmlzVXJsT25seSkge1xuICAgICAgdGhpcy5kb2Muc2V0Q3Vyc29yKHsgbGluZSwgY2g6IGNoICsgMSB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3Rpb25BZnRlckNvbXBsZXRpb24gPT09IEFjdGlvbkFmdGVyQ29tcGxldGlvbi5TZWxlY3RUZXh0KSB7XG4gICAgICB0aGlzLmRvYy5zZXRTZWxlY3Rpb24oLi4udGl0bGVSYW5nZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXROZXdOb3RlSGludHMoa2V5d29yZDogc3RyaW5nKTogSGludFtdIHtcbiAgICBjb25zdCBhZnRlckNyZWF0ZSA9IChub3RlOiBOb3RlKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuc3ltYm9sUmFuZ2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBzeW1ib2xSYW5nZScpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IGZyb20sIHRvIH0gPSB0aGlzLnN5bWJvbFJhbmdlO1xuXG4gICAgICBpZiAodGhpcy5pc1VybE9ubHkpIHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLmVkaXRvci5nZXRUb2tlbkF0KGZyb20pO1xuICAgICAgICB0aGlzLmRvYy5yZXBsYWNlUmFuZ2UoXG4gICAgICAgICAgYDovJHtub3RlLmlkfWAsXG4gICAgICAgICAgeyBsaW5lOiBmcm9tLmxpbmUsIGNoOiB0b2tlbi5zdGFydCB9LFxuICAgICAgICAgIHsgbGluZTogZnJvbS5saW5lLCBjaDogdG9rZW4uZW5kIH0sXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRvYy5yZXBsYWNlUmFuZ2UoYFske25vdGUudGl0bGV9XSg6LyR7bm90ZS5pZH0pYCwgZnJvbSwge1xuICAgICAgICAgIGxpbmU6IHRvLmxpbmUsXG4gICAgICAgICAgY2g6IHRvLmNoICsga2V5d29yZC5sZW5ndGgsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5hZnRlckNvbXBsZXRpb24oW1xuICAgICAgICB7IGxpbmU6IGZyb20ubGluZSwgY2g6IGZyb20uY2ggKyAxIH0sXG4gICAgICAgIHsgbGluZTogZnJvbS5saW5lLCBjaDogZnJvbS5jaCArIDEgKyBub3RlLnRpdGxlLmxlbmd0aCB9LFxuICAgICAgXSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhpbnQgPSAodHlwZTogJ3RvZG8nIHwgJ25vdGUnKSA9PiB7XG4gICAgICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBub3RlID0gYXdhaXQgdGhpcy5jb250ZXh0LnBvc3RNZXNzYWdlPE5vdGU+KHtcbiAgICAgICAgICBldmVudDogJ2NyZWF0ZU5vdGUnLFxuICAgICAgICAgIHBheWxvYWQ6IHsgdGl0bGU6IGtleXdvcmQsIHR5cGUgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGFmdGVyQ3JlYXRlKG5vdGUpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgY2xhc3NOYW1lOiBISU5UX0lURU1fQ0xBU1MsXG4gICAgICAgIHRleHQ6ICcnLFxuICAgICAgICByZW5kZXI6IChjb250YWluZXJFbCkgPT4gKGNvbnRhaW5lckVsLmlubmVySFRNTCA9IGAke3BsdXNJY29ufW5ldyBOb3RlOiAke2tleXdvcmR9YCksXG4gICAgICAgIGhpbnQ6IGhpbnQoJ25vdGUnKSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRleHQ6ICcnLFxuICAgICAgICBjbGFzc05hbWU6IEhJTlRfSVRFTV9DTEFTUyxcbiAgICAgICAgcmVuZGVyOiAoY29udGFpbmVyRWwpID0+IChjb250YWluZXJFbC5pbm5lckhUTUwgPSBgJHtwbHVzSWNvbn1uZXcgVG9kbzogJHtrZXl3b3JkfWApLFxuICAgICAgICBoaW50OiBoaW50KCd0b2RvJyksXG4gICAgICB9LFxuICAgIF07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldE5vdGVDb21wbGV0aW9uKCk6IFByb21pc2U8Q29tcGxldGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIGlmICghdGhpcy5zeW1ib2xSYW5nZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBzeW1ib2xSYW5nZScpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgbGluZSwgY2ggfSA9IHRoaXMuc3ltYm9sUmFuZ2UudG87XG4gICAgY29uc3QgeyBsaW5lOiBjdXJzb3JMaW5lLCBjaDogY3Vyc29yQ2ggfSA9IHRoaXMuZG9jLmdldEN1cnNvcigpO1xuXG4gICAgaWYgKGN1cnNvckxpbmUgPCBsaW5lIHx8IGN1cnNvckNoIDwgY2gpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBrZXl3b3JkID0gdGhpcy5kb2MuZ2V0UmFuZ2UoeyBsaW5lLCBjaCB9LCB7IGxpbmU6IGN1cnNvckxpbmUsIGNoOiBjdXJzb3JDaCB9KTtcbiAgICBjb25zdCBpc0NyZWF0aW5nTmV3Tm90ZSA9IGtleXdvcmQgJiYgdGhpcy5jcmVhdGVOb3RlRW5hYmxlZDtcbiAgICBjb25zdCBub3RlcyA9IGF3YWl0IHRoaXMuY29udGV4dC5wb3N0TWVzc2FnZTxTZWFyY2hSZXN1bHRbXT4oe1xuICAgICAgZXZlbnQ6ICdzZWFyY2hOb3RlcycsXG4gICAgICBwYXlsb2FkOiB7IGtleXdvcmQ6IGtleXdvcmQgfSxcbiAgICB9KTtcbiAgICBjb25zdCBoaW50TGlzdDogSGludFtdID0gbm90ZXMubWFwKChub3RlKSA9PiAoe1xuICAgICAgdGV4dDogdGhpcy5pc1VybE9ubHkgPyBgOi8ke25vdGUuaWR9YCA6IGBbJHtub3RlLnRpdGxlfV0oOi8ke25vdGUuaWR9KWAsXG4gICAgICBjbGFzc05hbWU6IEhJTlRfSVRFTV9DTEFTUyxcbiAgICAgIHJlbmRlcihjb250YWluZXIpIHtcbiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9XG4gICAgICAgICAgbm90ZS50aXRsZSArXG4gICAgICAgICAgKG5vdGUuaXNDdXJyZW50XG4gICAgICAgICAgICA/IGA8c3BhbiBjbGFzcz1cIiR7SElOVF9JVEVNX1NFTEZfQ0xBU1N9XCI+U0VMRjwvc3Bhbj5gXG4gICAgICAgICAgICA6IG5vdGUucGF0aFxuICAgICAgICAgICAgPyBgPHNwYW4gY2xhc3M9XCIke0hJTlRfSVRFTV9QQVRIX0NMQVNTfVwiPiR7bm90ZS5wYXRofTwvc3Bhbj5gXG4gICAgICAgICAgICA6ICcnKTtcbiAgICAgIH0sXG4gICAgICBub3RlLFxuICAgICAgLi4uKG5vdGUuaXNDdXJyZW50ID8geyBoaW50OiAoKSA9PiB0aGlzLmhpbnRGb3JFbGVtZW50cyhub3RlKSB9IDogbnVsbCksXG4gICAgfSkpO1xuXG4gICAgY29uc3QgeyBmcm9tOiBjb21wbGV0aW9uRnJvbSB9ID0gdGhpcy5zeW1ib2xSYW5nZTtcbiAgICBjb25zdCBjb21wbGV0aW9uVG8gPSB7IGxpbmUsIGNoOiBjaCArIGtleXdvcmQubGVuZ3RoIH07XG4gICAgY29uc3QgY29tcGxldGlvbjogQ29tcGxldGlvbiA9IHtcbiAgICAgIGZyb206IGNvbXBsZXRpb25Gcm9tLFxuICAgICAgdG86IGNvbXBsZXRpb25UbyxcbiAgICAgIGxpc3Q6IGhpbnRMaXN0LmNvbmNhdChpc0NyZWF0aW5nTmV3Tm90ZSA/IHRoaXMuZ2V0TmV3Tm90ZUhpbnRzKGtleXdvcmQpIDogW10pLFxuICAgIH07XG5cbiAgICB0aGlzLmNtLm9uKGNvbXBsZXRpb24sICdwaWNrJywgKChoaW50OiBIaW50KSA9PiB7XG4gICAgICBpZiAoIWlzTm90ZUhpbnQoaGludCkgfHwgaGludC5ub3RlLmlzQ3VycmVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBub3RlSWRFbmQgPSB7XG4gICAgICAgIGxpbmU6IGNvbXBsZXRpb25Uby5saW5lLFxuICAgICAgICBjaDogY29tcGxldGlvbkZyb20uY2ggKyBoaW50LnRleHQubGVuZ3RoIC0gMSxcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLmlzVXJsT25seSkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHRoaXMuZWRpdG9yLmdldFRva2VuQXQoeyBsaW5lOiBjdXJzb3JMaW5lLCBjaDogY3Vyc29yQ2ggfSk7XG4gICAgICAgIHRoaXMuZG9jLnJlcGxhY2VSYW5nZShcbiAgICAgICAgICBoaW50LnRleHQsXG4gICAgICAgICAgeyBsaW5lOiBjb21wbGV0aW9uVG8ubGluZSwgY2g6IHRva2VuLnN0YXJ0IH0sXG4gICAgICAgICAgeyBsaW5lOiBjb21wbGV0aW9uVG8ubGluZSwgY2g6IHRva2VuLmVuZCB9LFxuICAgICAgICApO1xuXG4gICAgICAgIG5vdGVJZEVuZC5jaCA9IHRva2VuLnN0YXJ0ICsgaGludC50ZXh0Lmxlbmd0aDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGl0bGVSYW5nZTogW1Bvc2l0aW9uLCBQb3NpdGlvbl0gPSBbXG4gICAgICAgIHsgbGluZTogY29tcGxldGlvblRvLmxpbmUsIGNoOiBjb21wbGV0aW9uRnJvbS5jaCArIDEgfSxcbiAgICAgICAge1xuICAgICAgICAgIGxpbmU6IGNvbXBsZXRpb25Uby5saW5lLFxuICAgICAgICAgIGNoOiBjb21wbGV0aW9uRnJvbS5jaCArIGhpbnQubm90ZS50aXRsZS5sZW5ndGggKyAxLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgaWYgKCF0aGlzLmxpbmtUb0VsZW1lbnRFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuYWZ0ZXJDb21wbGV0aW9uKHRpdGxlUmFuZ2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZG9jLnNldEN1cnNvcihub3RlSWRFbmQpO1xuICAgICAgdGhpcy5oaW50Rm9yRWxlbWVudHMoaGludC5ub3RlLCBub3RlSWRFbmQsIHRpdGxlUmFuZ2UpO1xuICAgIH0pIGFzIGFueSk7XG5cbiAgICByZXR1cm4gY29tcGxldGlvbjtcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJjdXJyZW50Q29sb3JcXFwiIGNsYXNzPVxcXCJiaSBiaS10eXBlLWgxXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGQ9XFxcIk04LjYzNyAxM1YzLjY2OUg3LjM3OVY3LjYySDIuNzU4VjMuNjdIMS41VjEzaDEuMjU4VjguNzI4aDQuNjJWMTNoMS4yNTl6bTUuMzI5IDBWMy42NjloLTEuMjQ0TDEwLjUgNS4zMTZ2MS4yNjVsMi4xNi0xLjU2NWguMDYyVjEzaDEuMjQ0elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJjdXJyZW50Q29sb3JcXFwiIGNsYXNzPVxcXCJiaSBiaS10eXBlLWgyXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGQ9XFxcIk03LjYzOCAxM1YzLjY2OUg2LjM4VjcuNjJIMS43NTlWMy42N0guNVYxM2gxLjI1OFY4LjcyOGg0LjYyVjEzaDEuMjU5em0zLjAyMi02LjczM3YtLjA0OGMwLS44ODkuNjMtMS42NjggMS43MTYtMS42NjguOTU3IDAgMS42NzUuNjA4IDEuNjc1IDEuNTcyIDAgLjg1NS0uNTU0IDEuNTA0LTEuMDY3IDIuMDg1bC0zLjUxMyAzLjk5OVYxM0gxNS41di0xLjA5NGgtNC4yNDV2LS4wNzVsMi40ODEtMi44NDRjLjg3NS0uOTk4IDEuNTg2LTEuNzg0IDEuNTg2LTIuOTUzIDAtMS40NjMtMS4xNTUtMi41NTYtMi45MTktMi41NTYtMS45NDEgMC0yLjk2NiAxLjMyNi0yLjk2NiAyLjc0di4wNDloMS4yMjN6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcImN1cnJlbnRDb2xvclxcXCIgY2xhc3M9XFxcImJpIGJpLXR5cGUtaDNcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZD1cXFwiTTcuNjM3IDEzVjMuNjY5SDYuMzc5VjcuNjJIMS43NThWMy42N0guNVYxM2gxLjI1OFY4LjcyOGg0LjYyVjEzaDEuMjU5em0zLjYyNS00LjI3MmgxLjAxOGMxLjE0MiAwIDEuOTM1LjY3IDEuOTQ5IDEuNjc0LjAxMyAxLjAwNS0uNzggMS43MzctMi4wMSAxLjczLTEuMDgtLjAwNy0xLjg1My0uNTg4LTEuOTM1LTEuMzJIOS4xMDhjLjA2OSAxLjMyNyAxLjIyNCAyLjM4NiAzLjA4MyAyLjM4NiAxLjkzNSAwIDMuMzQzLTEuMTU1IDMuMzA5LTIuNzg5LS4wMjctMS41MS0xLjI1MS0yLjE2LTIuMDM3LTIuMjQ5di0uMDY4Yy43MDQtLjEyMyAxLjc2NC0uOTEgMS43MjMtMi4yMjktLjAzNS0xLjM1My0xLjE3Ni0yLjQtMi45NTQtMi4zODUtMS44NzMuMDA2LTIuODU3IDEuMTYyLTIuODk4IDIuMzU4aDEuMTk2Yy4wNjItLjY5LjcxMS0xLjI5OSAxLjY5Ni0xLjI5OS45OTggMCAxLjY5NS42MjIgMS42OTUgMS41MjUuMDA3LjkyMi0uNzE4IDEuNTkyLTEuNjk1IDEuNTkyaC0uOTY0djEuMDc0elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJjdXJyZW50Q29sb3JcXFwiIGNsYXNzPVxcXCJiaSBiaS1jYXJkLWhlYWRpbmdcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZD1cXFwiTTE0LjUgM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTEzYS41LjUgMCAwIDEtLjUtLjV2LTlhLjUuNSAwIDAgMSAuNS0uNWgxM3ptLTEzLTFBMS41IDEuNSAwIDAgMCAwIDMuNXY5QTEuNSAxLjUgMCAwIDAgMS41IDE0aDEzYTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtOUExLjUgMS41IDAgMCAwIDE0LjUgMmgtMTN6XFxcIj48L3BhdGg+PHBhdGggZD1cXFwiTTMgOC41YS41LjUgMCAwIDEgLjUtLjVoOWEuNS41IDAgMCAxIDAgMWgtOWEuNS41IDAgMCAxLS41LS41em0wIDJhLjUuNSAwIDAgMSAuNS0uNWg2YS41LjUgMCAwIDEgMCAxaC02YS41LjUgMCAwIDEtLjUtLjV6bTAtNWEuNS41IDAgMCAxIC41LS41aDlhLjUuNSAwIDAgMSAuNS41djFhLjUuNSAwIDAgMS0uNS41aC05YS41LjUgMCAwIDEtLjUtLjV2LTF6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcImN1cnJlbnRDb2xvclxcXCIgY2xhc3M9XFxcImJpIGJpLWJveFxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBkPVxcXCJNOC4xODYgMS4xMTNhLjUuNSAwIDAgMC0uMzcyIDBMMS44NDYgMy41IDggNS45NjEgMTQuMTU0IDMuNSA4LjE4NiAxLjExM3pNMTUgNC4yMzlsLTYuNSAyLjZ2Ny45MjJsNi41LTIuNlY0LjI0ek03LjUgMTQuNzYyVjYuODM4TDEgNC4yMzl2Ny45MjNsNi41IDIuNnpNNy40NDMuMTg0YTEuNSAxLjUgMCAwIDEgMS4xMTQgMGw3LjEyOSAyLjg1MkEuNS41IDAgMCAxIDE2IDMuNXY4LjY2MmExIDEgMCAwIDEtLjYyOS45MjhsLTcuMTg1IDIuODc0YS41LjUgMCAwIDEtLjM3MiAwTC42MyAxMy4wOWExIDEgMCAwIDEtLjYzLS45MjhWMy41YS41LjUgMCAwIDEgLjMxNC0uNDY0TDcuNDQzLjE4NHpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwiY3VycmVudENvbG9yXFxcIiBjbGFzcz1cXFwiYmkgYmktZmlsZS1lYXJtYXJrLXBsdXNcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZD1cXFwiTTggNi41YS41LjUgMCAwIDEgLjUuNXYxLjVIMTBhLjUuNSAwIDAgMSAwIDFIOC41VjExYS41LjUgMCAwIDEtMSAwVjkuNUg2YS41LjUgMCAwIDEgMC0xaDEuNVY3YS41LjUgMCAwIDEgLjUtLjV6XFxcIj48L3BhdGg+PHBhdGggZD1cXFwiTTE0IDQuNVYxNGEyIDIgMCAwIDEtMiAySDRhMiAyIDAgMCAxLTItMlYyYTIgMiAwIDAgMSAyLTJoNS41TDE0IDQuNXptLTMgMEExLjUgMS41IDAgMCAxIDkuNSAzVjFINGExIDEgMCAwIDAtMSAxdjEyYTEgMSAwIDAgMCAxIDFoOGExIDEgMCAwIDAgMS0xVjQuNWgtMnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsImltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2guZGVib3VuY2UnO1xuaW1wb3J0IHR5cGUgeyBFZGl0b3IsIFRva2VuIH0gZnJvbSAnY29kZW1pcnJvcic7XG5pbXBvcnQgeyBVUkxfRk9MRF9JQ09OX1NFVFRJTkcgfSBmcm9tICdkcml2ZXIvY29uc3RhbnRzJztcbmltcG9ydCB0eXBlIHsgQ29udGV4dCB9IGZyb20gJy4vaW5kZXgnO1xuaW1wb3J0IHsgRm9sZFVybEljb25UeXBlIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgVXJsSWNvbiB9IGZyb20gJy4uL1VybEljb24nO1xuXG5jb25zdCBNQVJLRVJfQ0xBU1NfTkFNRSA9ICdub3RlLWxpbmstZm9sZGVkLXVybCc7XG5cbmZ1bmN0aW9uIGlzRm9vdG5vdGUodG9rZW5JbmRleDogbnVtYmVyLCBsaW5lVG9rZW5zOiBUb2tlbltdKSB7XG4gIGNvbnN0IHByZVRva2VuMSA9IGxpbmVUb2tlbnNbdG9rZW5JbmRleCAtIDFdO1xuICBjb25zdCBwcmVUb2tlbjIgPSBsaW5lVG9rZW5zW3Rva2VuSW5kZXggLSAyXTtcblxuICBpZiAocHJlVG9rZW4xICYmIHByZVRva2VuMikge1xuICAgIHJldHVybiBwcmVUb2tlbjEuc3RyaW5nID09PSAnICcgJiYgcHJlVG9rZW4yLnN0cmluZyA9PT0gJ106JztcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXJsRm9sZGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBjb250ZXh0OiBDb250ZXh0LCBwcml2YXRlIHJlYWRvbmx5IGVkaXRvcjogRWRpdG9yKSB7XG4gICAgc2V0VGltZW91dCh0aGlzLmluaXQuYmluZCh0aGlzKSwgMTAwKTtcbiAgfVxuICBwcml2YXRlIGZvbGRUeXBlPzogRm9sZFVybEljb25UeXBlO1xuXG4gIHByaXZhdGUgYXN5bmMgaW5pdCgpIHtcbiAgICB0aGlzLmZvbGRUeXBlID0gYXdhaXQgdGhpcy5jb250ZXh0LnBvc3RNZXNzYWdlKHtcbiAgICAgIGV2ZW50OiAncXVlcnlTZXR0aW5nJyxcbiAgICAgIHBheWxvYWQ6IHsga2V5OiBVUkxfRk9MRF9JQ09OX1NFVFRJTkcgfSxcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmZvbGRUeXBlICE9PSBGb2xkVXJsSWNvblR5cGUuTm9uZSkge1xuICAgICAgdGhpcy5mb2xkQWxsKCk7XG4gICAgICB0aGlzLmVkaXRvci5vbignY3Vyc29yQWN0aXZpdHknLCB0aGlzLnVuZm9sZEF0Q3Vyc29yLmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5lZGl0b3Iub24oJ2N1cnNvckFjdGl2aXR5JywgZGVib3VuY2UodGhpcy5mb2xkQWxsLmJpbmQodGhpcyksIDIwMCkpO1xuICAgIH1cbiAgfVxuICBwcml2YXRlIGFzeW5jIGZvbGRBbGwoKSB7XG4gICAgY29uc3QgZG9jID0gdGhpcy5lZGl0b3IuZ2V0RG9jKCk7XG4gICAgY29uc3QgY3Vyc29yID0gdGhpcy5lZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgdG9rZW5UeXBlQXRDdXJzb3IgPSB0aGlzLmVkaXRvci5nZXRUb2tlblR5cGVBdChjdXJzb3IpO1xuXG4gICAgZG9jLmVhY2hMaW5lKChsaW5lKSA9PiB7XG4gICAgICBjb25zdCBsaW5lTm8gPSBkb2MuZ2V0TGluZU51bWJlcihsaW5lKTtcblxuICAgICAgaWYgKGxpbmVObyA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxpbmVUb2tlbnMgPSB0aGlzLmVkaXRvci5nZXRMaW5lVG9rZW5zKGxpbmVObyk7XG5cbiAgICAgIGZvciAoY29uc3QgW3Rva2VuSW5kZXgsIHRva2VuXSBvZiBsaW5lVG9rZW5zLmVudHJpZXMoKSkge1xuICAgICAgICBpZiAoIXRva2VuLnR5cGU/LmluY2x1ZGVzKCdzdHJpbmcgdXJsJykgfHwgdG9rZW4uc3RyaW5nLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMuZWRpdG9yXG4gICAgICAgICAgICAuZmluZE1hcmtzQXQoeyBsaW5lOiBsaW5lTm8sIGNoOiB0b2tlbi5zdGFydCB9KVxuICAgICAgICAgICAgLmZpbmQoKG1hcmtlcikgPT4gbWFya2VyLmNsYXNzTmFtZSA9PT0gTUFSS0VSX0NMQVNTX05BTUUpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGlzRm9vdG5vdGUodG9rZW5JbmRleCwgbGluZVRva2VucykgfHxcbiAgICAgICAgICAodG9rZW5UeXBlQXRDdXJzb3I/LmluY2x1ZGVzKCdzdHJpbmcgdXJsJykgJiZcbiAgICAgICAgICAgIGN1cnNvci5saW5lID09PSBsaW5lTm8gJiZcbiAgICAgICAgICAgIGN1cnNvci5jaCA8PSB0b2tlbi5lbmQgJiZcbiAgICAgICAgICAgIGN1cnNvci5jaCA+PSB0b2tlbi5zdGFydClcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBkb2MubWFya1RleHQoXG4gICAgICAgICAgeyBsaW5lOiBsaW5lTm8sIGNoOiB0b2tlbi5zdGFydCB9LFxuICAgICAgICAgIHsgbGluZTogbGluZU5vLCBjaDogdG9rZW4uZW5kIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVwbGFjZWRXaXRoOiB0aGlzLmNyZWF0ZUZvbGRNYXJrZXIodG9rZW4uc3RyaW5nKSxcbiAgICAgICAgICAgIGhhbmRsZU1vdXNlRXZlbnRzOiB0cnVlLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBNQVJLRVJfQ0xBU1NfTkFNRSwgLy8gY2xhc3MgbmFtZSBpcyBub3QgcmVuZGVyZXIgaW4gRE9NXG4gICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBwcml2YXRlIHVuZm9sZEF0Q3Vyc29yKCkge1xuICAgIGNvbnN0IGN1cnNvciA9IHRoaXMuZWRpdG9yLmdldEN1cnNvcigpO1xuICAgIGNvbnN0IG1hcmtlcnMgPSB0aGlzLmVkaXRvci5maW5kTWFya3NBdChjdXJzb3IpO1xuXG4gICAgZm9yIChjb25zdCBtYXJrZXIgb2YgbWFya2Vycykge1xuICAgICAgaWYgKG1hcmtlci5jbGFzc05hbWUgPT09IE1BUktFUl9DTEFTU19OQU1FKSB7XG4gICAgICAgIG1hcmtlci5jbGVhcigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRm9sZE1hcmtlcihocmVmOiBzdHJpbmcpIHtcbiAgICBjb25zdCBtYXJrRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgbWFya0VsLmNsYXNzTGlzdC5hZGQoTUFSS0VSX0NMQVNTX05BTUUpO1xuXG4gICAgaWYgKHRoaXMuZm9sZFR5cGUgPT09IEZvbGRVcmxJY29uVHlwZS5FbGxpcHNpcykge1xuICAgICAgbWFya0VsLmNsYXNzTGlzdC5hZGQoJ2ZhJywgJ2ZhLWVsbGlwc2lzLWgnLCAnZmEteHMnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5mb2xkVHlwZSA9PT0gRm9sZFVybEljb25UeXBlLkljb24pIHtcbiAgICAgIGlmIChocmVmLnN0YXJ0c1dpdGgoJzovJykpIHtcbiAgICAgICAgY29uc3QgaWNvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBpY29uRWwuY2xhc3NMaXN0LmFkZCgnbm90ZS1saW5rLWpvcGxpbi1pY29uJyk7XG4gICAgICAgIG1hcmtFbC5hcHBlbmRDaGlsZChpY29uRWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IFVybEljb24oaHJlZiwgbWFya0VsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbWFya0VsO1xuICB9XG59XG4iLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG52YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiByb290LkRhdGUubm93KCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2BcbiAqIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcbiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG4iLCJpbXBvcnQgZ2xvYmVJY29uIGZyb20gJ2Jvb3RzdHJhcC1pY29ucy9pY29ucy9nbG9iZS5zdmcnO1xuaW1wb3J0IGhhc2hJY29uIGZyb20gJ2Jvb3RzdHJhcC1pY29ucy9pY29ucy9oYXNoLnN2Zyc7XG5pbXBvcnQgeyBnZXRSZW1vdGVVcmwsIHBhcnNlSHRtbCB9IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBERUZBVUxUX0lDT04gPSAnREVGQVVMVCc7XG5jb25zdCBFWFRFUk5BTF9XRUJTSVRFX0lDT05fQ0xBU1NfTkFNRSA9ICdub3RlLWxpbmstZXh0ZXJuYWwtd2Vic2l0ZS1pY29uJztcblxuZXhwb3J0IGNsYXNzIFVybEljb24ge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGhyZWY6IHN0cmluZywgcHJpdmF0ZSByZWFkb25seSBjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcbiAgICB0aGlzLnBhZ2VVcmwgPSBnZXRSZW1vdGVVcmwodGhpcy5ocmVmKTtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLm9yaWdpbiA9IG5ldyBVUkwodGhpcy5wYWdlVXJsKS5vcmlnaW47XG4gICAgfSBjYXRjaCB7XG4gICAgICB0aGlzLm9yaWdpbiA9ICcnO1xuICAgIH1cblxuICAgIHRoaXMuaWNvbkVsID0gdGhpcy5jcmVhdGVJY29uRWwoKTtcbiAgICB0aGlzLmxvYWRJY29uKCk7XG4gIH1cblxuICBwcml2YXRlIGljb25FbDogSFRNTFNwYW5FbGVtZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IHBhZ2VVcmw6IHN0cmluZztcbiAgcHJpdmF0ZSBpY29uVXJsPzogc3RyaW5nO1xuICBwcml2YXRlIHJlYWRvbmx5IG9yaWdpbjogc3RyaW5nO1xuICBwcml2YXRlIGFib3J0Q29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcjtcbiAgcHJpdmF0ZSBnZXQgZmF2aWNvblVybCgpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5vcmlnaW59L2Zhdmljb24uaWNvYDtcbiAgfVxuXG4gIHByaXZhdGUgaXNIYXNoKCkge1xuICAgIHJldHVybiB0aGlzLmhyZWYuc3RhcnRzV2l0aCgnIycpICYmIHRoaXMuaHJlZi5sZW5ndGggPiAxO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVJY29uRWwoKSB7XG4gICAgY29uc3QgaWNvbkVsID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKGAuJHtFWFRFUk5BTF9XRUJTSVRFX0lDT05fQ0xBU1NfTkFNRX1gKTtcblxuICAgIGlmIChpY29uRWwpIHtcbiAgICAgIGljb25FbC5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblxuICAgIGVsLmlubmVySFRNTCA9IHRoaXMuaXNIYXNoKCkgPyBoYXNoSWNvbiA6IGdsb2JlSWNvbjtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKEVYVEVSTkFMX1dFQlNJVEVfSUNPTl9DTEFTU19OQU1FKTtcbiAgICB0aGlzLmNvbnRhaW5lckVsLnByZXBlbmQoZWwpO1xuXG4gICAgcmV0dXJuIGVsO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRJY29uVXJsKHNyYzogc3RyaW5nKSB7XG4gICAgY29uc3QgaW1nRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpbWdFbC5zcmMgPSBzcmM7XG5cbiAgICB0aGlzLmljb25FbC5pbm5lckhUTUwgPSBpbWdFbC5vdXRlckhUTUw7XG4gICAgdGhpcy5pY29uVXJsID0gc3JjO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkSWNvbigpIHtcbiAgICBpZiAoIXRoaXMub3JpZ2luIHx8IHRoaXMuaXNIYXNoKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpY29uS2V5ID0gVXJsSWNvbi5nZXRJY29uS2V5KHRoaXMub3JpZ2luKTtcbiAgICBjb25zdCBwZXJzaXN0ZWRJY29uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oaWNvbktleSk7XG5cbiAgICBpZiAocGVyc2lzdGVkSWNvbiA9PT0gREVGQVVMVF9JQ09OKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5hYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgICBsZXQgcmVzO1xuICAgIHRyeSB7XG4gICAgICByZXMgPSBhd2FpdCBmZXRjaChwZXJzaXN0ZWRJY29uIHx8IHRoaXMuZmF2aWNvblVybCwge1xuICAgICAgICBzaWduYWw6IHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgY29uc3QgaWNvbiA9IGF3YWl0IHJlcy5ibG9iKCk7XG5cbiAgICAgIGlmIChpY29uLnR5cGUuaW5jbHVkZXMoJ2ltYWdlJykpIHtcbiAgICAgICAgdGhpcy5zZXRJY29uVXJsKFVSTC5jcmVhdGVPYmplY3RVUkwoaWNvbikpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRoaXMucGFnZVVybCwgeyBzaWduYWw6IHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbCB9KTtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgICAgY29uc3QgZG9jID0gcGFyc2VIdG1sKGh0bWwpO1xuICAgICAgY29uc3QgaWNvbkxpbmtFbCA9IGRvYy5xdWVyeVNlbGVjdG9yKCdsaW5rW3JlbD1cImljb25cIl0nKTtcblxuICAgICAgaWYgKCFpY29uTGlua0VsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbm8gaWNvbiBsaW5rRWwnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaWNvblVybCA9IG5ldyBVUkwoaWNvbkxpbmtFbC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSEsIHRoaXMucGFnZVVybCkudG9TdHJpbmcoKTtcbiAgICAgIGNvbnN0IGljb25SZXMgPSBhd2FpdCBmZXRjaChpY29uVXJsLCB7XG4gICAgICAgIHNpZ25hbDogdGhpcy5hYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICByZWRpcmVjdDogJ2Vycm9yJyxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaWNvblJlcy5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZldGNoIGljb24gZmFpbGVkJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGljb24gPSBhd2FpdCBpY29uUmVzLmJsb2IoKTtcblxuICAgICAgaWYgKGljb24udHlwZS5pbmNsdWRlcygnaW1hZ2UnKSkge1xuICAgICAgICBjb25zdCBpY29uVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChpY29uKTtcbiAgICAgICAgdGhpcy5zZXRJY29uVXJsKGljb25VcmwpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShpY29uS2V5LCBpY29uVXJsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZmV0Y2ggaWNvbiBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGljb25LZXksIERFRkFVTFRfSUNPTik7XG4gICAgfVxuICAgIHRoaXMuYWJvcnRDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5hYm9ydENvbnRyb2xsZXIpIHtcbiAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaWNvblVybCkge1xuICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLmljb25VcmwpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGdldEljb25LZXkob3JpZ2luOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gYG5vdGUtbGluay1zeXN0ZW0taWNvbi11cmwtJHtvcmlnaW59YDtcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJjdXJyZW50Q29sb3JcXFwiIGNsYXNzPVxcXCJiaSBiaS1nbG9iZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBkPVxcXCJNMCA4YTggOCAwIDEgMSAxNiAwQTggOCAwIDAgMSAwIDh6bTcuNS02LjkyM2MtLjY3LjIwNC0xLjMzNS44Mi0xLjg4NyAxLjg1NUE3Ljk3IDcuOTcgMCAwIDAgNS4xNDUgNEg3LjVWMS4wNzd6TTQuMDkgNGE5LjI2NyA5LjI2NyAwIDAgMSAuNjQtMS41MzkgNi43IDYuNyAwIDAgMSAuNTk3LS45MzNBNy4wMjUgNy4wMjUgMCAwIDAgMi4yNTUgNEg0LjA5em0tLjU4MiAzLjVjLjAzLS44NzcuMTM4LTEuNzE4LjMxMi0yLjVIMS42NzRhNi45NTggNi45NTggMCAwIDAtLjY1NiAyLjVoMi40OXpNNC44NDcgNWExMi41IDEyLjUgMCAwIDAtLjMzOCAyLjVINy41VjVINC44NDd6TTguNSA1djIuNWgyLjk5YTEyLjQ5NSAxMi40OTUgMCAwIDAtLjMzNy0yLjVIOC41ek00LjUxIDguNWExMi41IDEyLjUgMCAwIDAgLjMzNyAyLjVINy41VjguNUg0LjUxem0zLjk5IDBWMTFoMi42NTNjLjE4Ny0uNzY1LjMwNi0xLjYwOC4zMzgtMi41SDguNXpNNS4xNDUgMTJjLjEzOC4zODYuMjk1Ljc0NC40NjggMS4wNjguNTUyIDEuMDM1IDEuMjE4IDEuNjUgMS44ODcgMS44NTVWMTJINS4xNDV6bS4xODIgMi40NzJhNi42OTYgNi42OTYgMCAwIDEtLjU5Ny0uOTMzQTkuMjY4IDkuMjY4IDAgMCAxIDQuMDkgMTJIMi4yNTVhNy4wMjQgNy4wMjQgMCAwIDAgMy4wNzIgMi40NzJ6TTMuODIgMTFhMTMuNjUyIDEzLjY1MiAwIDAgMS0uMzEyLTIuNWgtMi40OWMuMDYyLjg5LjI5MSAxLjczMy42NTYgMi41SDMuODJ6bTYuODUzIDMuNDcyQTcuMDI0IDcuMDI0IDAgMCAwIDEzLjc0NSAxMkgxMS45MWE5LjI3IDkuMjcgMCAwIDEtLjY0IDEuNTM5IDYuNjg4IDYuNjg4IDAgMCAxLS41OTcuOTMzek04LjUgMTJ2Mi45MjNjLjY3LS4yMDQgMS4zMzUtLjgyIDEuODg3LTEuODU1LjE3My0uMzI0LjMzLS42ODIuNDY4LTEuMDY4SDguNXptMy42OC0xaDIuMTQ2Yy4zNjUtLjc2Ny41OTQtMS42MS42NTYtMi41aC0yLjQ5YTEzLjY1IDEzLjY1IDAgMCAxLS4zMTIgMi41em0yLjgwMi0zLjVhNi45NTkgNi45NTkgMCAwIDAtLjY1Ni0yLjVIMTIuMThjLjE3NC43ODIuMjgyIDEuNjIzLjMxMiAyLjVoMi40OXpNMTEuMjcgMi40NjFjLjI0Ny40NjQuNDYyLjk4LjY0IDEuNTM5aDEuODM1YTcuMDI0IDcuMDI0IDAgMCAwLTMuMDcyLTIuNDcyYy4yMTguMjg0LjQxOC41OTguNTk3LjkzM3pNMTAuODU1IDRhNy45NjYgNy45NjYgMCAwIDAtLjQ2OC0xLjA2OEM5LjgzNSAxLjg5NyA5LjE3IDEuMjgyIDguNSAxLjA3N1Y0aDIuMzU1elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJjdXJyZW50Q29sb3JcXFwiIGNsYXNzPVxcXCJiaSBiaS1oYXNoXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGQ9XFxcIk04LjM5IDEyLjY0OGExLjMyIDEuMzIgMCAwIDAtLjAxNS4xOGMwIC4zMDUuMjEuNTA4LjUuNTA4LjI2NiAwIC40OTItLjE3Mi41NTUtLjQ3N2wuNTU0LTIuNzAzaDEuMjA0Yy40MjEgMCAuNjE3LS4yMzQuNjE3LS41NDcgMC0uMzEyLS4xODgtLjUzLS42MTctLjUzaC0uOTg1bC41MTYtMi41MjRoMS4yNjVjLjQzIDAgLjYxOC0uMjI3LjYxOC0uNTQ3IDAtLjMxMy0uMTg4LS41MjQtLjYxOC0uNTI0aC0xLjA0NmwuNDc2LTIuMzA0YTEuMDYgMS4wNiAwIDAgMCAuMDE2LS4xNjQuNTEuNTEgMCAwIDAtLjUxNi0uNTE2LjU0LjU0IDAgMCAwLS41MzkuNDNsLS41MjMgMi41NTRINy42MTdsLjQ3Ny0yLjMwNGMuMDA4LS4wNC4wMTUtLjExOC4wMTUtLjE2NGEuNTEyLjUxMiAwIDAgMC0uNTIzLS41MTYuNTM5LjUzOSAwIDAgMC0uNTMxLjQzTDYuNTMgNS40ODRINS40MTRjLS40MyAwLS42MTcuMjItLjYxNy41MzIgMCAuMzEyLjE4Ny41MzkuNjE3LjUzOWguOTA2bC0uNTE1IDIuNTIzSDQuNjA5Yy0uNDIxIDAtLjYwOS4yMTktLjYwOS41MzEgMCAuMzEzLjE4OC41NDcuNjEuNTQ3aC45NzZsLS41MTYgMi40OTJjLS4wMDguMDQtLjAxNS4xMjUtLjAxNS4xOCAwIC4zMDUuMjEuNTA4LjUuNTA4LjI2NSAwIC40OTItLjE3Mi41NTQtLjQ3N2wuNTU1LTIuNzAzaDIuMjQybC0uNTE1IDIuNDkyem0tMS02LjEwOWgyLjI2NmwtLjUxNSAyLjU2M0g2Ljg1OWwuNTMyLTIuNTYzelxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSHRtbCh0ZXh0OiBzdHJpbmcpIHtcbiAgY29uc3QgZG9tUGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuICByZXR1cm4gZG9tUGFyc2VyLnBhcnNlRnJvbVN0cmluZyh0ZXh0LCAndGV4dC9odG1sJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZW1vdGVVcmwoaHJlZjogc3RyaW5nKSB7XG4gIHJldHVybiBocmVmLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSB8fCBocmVmLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykgPyBocmVmIDogYGh0dHBzOi8vJHtocmVmfWA7XG59XG4iLCJpbXBvcnQgdHlwZSB7IEVkaXRvciB9IGZyb20gJ2NvZGVtaXJyb3InO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJZFNldHRlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgZWRpdG9yOiBFZGl0b3IpIHt9XG4gIHByaXZhdGUgcmVhZG9ubHkgZG9jID0gdGhpcy5lZGl0b3IuZ2V0RG9jKCk7XG4gIHNldEVsZW1lbnRJZCgpIHtcbiAgICBjb25zdCBbc2VsZWN0aW9uXSA9IHRoaXMuZG9jLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgY29uc3QgeyBhbmNob3IsIGhlYWQgfSA9IHNlbGVjdGlvbjtcbiAgICB0aGlzLmVkaXRvci5mb2N1cygpO1xuXG4gICAgaWYgKGFuY2hvci5saW5lICE9PSBoZWFkLmxpbmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbGluZSA9IGFuY2hvci5saW5lO1xuXG4gICAgaWYgKGFuY2hvci5jaCA9PT0gaGVhZC5jaCkge1xuICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSAnaWQtb2YtYmxvY2snO1xuICAgICAgY29uc3QgbGluZUNvbnRlbnQgPSB0aGlzLmRvYy5nZXRMaW5lKGxpbmUpO1xuXG4gICAgICB0aGlzLmRvYy5yZXBsYWNlUmFuZ2UoYCB7IyR7cGxhY2Vob2xkZXJ9fWAsIHsgbGluZSwgY2g6IGxpbmVDb250ZW50Lmxlbmd0aCB9KTtcbiAgICAgIHRoaXMuZG9jLnNldFNlbGVjdGlvbihcbiAgICAgICAgeyBsaW5lLCBjaDogbGluZUNvbnRlbnQubGVuZ3RoICsgYCB7I2AubGVuZ3RoIH0sXG4gICAgICAgIHsgbGluZSwgY2g6IGxpbmVDb250ZW50Lmxlbmd0aCArIGAgeyMke3BsYWNlaG9sZGVyfWAubGVuZ3RoIH0sXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwbGFjZWhvbGRlciA9ICdpZC1vZi1lbGVtZW50JztcblxuICAgICAgY29uc3QgdGV4dCA9IHRoaXMuZG9jLmdldFJhbmdlKHsgbGluZSwgY2g6IGFuY2hvci5jaCB9LCB7IGxpbmUsIGNoOiBoZWFkLmNoIH0pO1xuXG4gICAgICB0aGlzLmRvYy5yZXBsYWNlUmFuZ2UoXG4gICAgICAgIGBbJHt0ZXh0fV17IyR7cGxhY2Vob2xkZXJ9fWAsXG4gICAgICAgIHsgbGluZSwgY2g6IGFuY2hvci5jaCB9LFxuICAgICAgICB7IGxpbmUsIGNoOiBoZWFkLmNoIH0sXG4gICAgICApO1xuXG4gICAgICB0aGlzLmRvYy5zZXRTZWxlY3Rpb24oXG4gICAgICAgIHsgbGluZSwgY2g6IGFuY2hvci5jaCArIGBbJHt0ZXh0fV17I2AubGVuZ3RoIH0sXG4gICAgICAgIHsgbGluZSwgY2g6IGFuY2hvci5jaCArIGAgWyR7dGV4dH1deyMke3BsYWNlaG9sZGVyfWAubGVuZ3RoIC0gMSB9LFxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=