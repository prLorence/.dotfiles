exports.default=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function c(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}l((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(1)),c=[/(?<=\[)color=(.*?)(?=\])/g,/(?<=\[)name=(.*?)(?=\])/g,/(?<=\[)date=(.*?)(?=\])/g];e.exports={default:function(e){return{plugin:function(t){t.defineOption("quoteFolder",[],(function(t,n,o){return i(this,void 0,void 0,(function*(){new r.default(e,t,c,(function(e,t,n,i,o,r,c){const s=document.createElement("span");switch(s.classList.add("enhancement-folded-blockquotes"),t){case 0:s.textContent="â– ",s.style.cssText=`color: ${e[1]}; font-size: large; vertical-align: middle;`;break;case 1:s.classList.add("fas","fa-user","enhancement-folded-blockquotes-name");break;case 2:s.classList.add("fas","fa-clock","enhancement-folded-blockquotes-date")}return 0!==t&&(s.style.cssText="color: darkgray;"),s}),["enhancement-folded-blockquotes","enhancement-folded-blockquotes-name","enhancement-folded-blockquotes-date"],(function(e){return e.trim().startsWith(">")}))}))}))},codeMirrorOptions:{quoteFolder:!0},assets:function(){return[{name:"blockquote.css"}]}}}}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),r=i(n(3)),c=n(4);t.default=class{constructor(e,t,n,i,o,r,c){this.context=e,this.editor=t,this.regexList=n,this.renderer=i,this.lineFilter=r,this.clicked=c,this.MARKER_CLASS_NAMES=o,this.init()}init(){this.process();const e=o.debounce(()=>{this.process(!0)},100);this.editor.on("cursorActivity",e),this.editor.on("viewportChange",e),this.editor.on("change",function(e,t){"setValue"===t.origin&&this.process(!0)}.bind(this))}process(e=!1){this.editor.operation(function(){const t=this.editor.getViewport(),n=this.editor.getDoc();this.editor.getCursor();let i=t.from,o=t.to;e&&(i=0,o=this.editor.lineCount());for(let e=i;e<o;++e){const t=n.getLine(e);if(!t)continue;if(this.lineFilter&&!this.lineFilter(t))continue;let i=[];for(let e=0;e<this.regexList.length;++e)for(const n of t.matchAll(this.regexList[e]))i.push({regIndex:e,match:n});for(let t=i.length-1;t>=0;--t){const o=i[t];this.foldByMatch(n,e,o.match,o.regIndex)}}}.bind(this))}foldByMatch(e,t,n,i){if(n){const o=this.editor.getCursor();this.editor.findMarksAt({line:t,ch:n.index}).find(e=>{e.className===this.MARKER_CLASS_NAMES[i]&&e.clear()});const s={line:t,ch:n.index},l={line:t,ch:n.index+n[0].length};if(!(c.isRangeSelected(s,l,this.editor)||o.line===t&&o.ch>=s.ch&&o.ch<=l.ch)){const t=this.renderer(n,i,s,l),o=e.markText(s,l,{replacedWith:t,className:this.MARKER_CLASS_NAMES[i],clearOnEnter:!0,inclusiveLeft:!1,inclusiveRight:!1});t.onclick=e=>{e.ctrlKey||e.metaKey?(e.preventDefault(),this.clicked&&this.clicked(n,i,e)):r.default(o,this.editor)(e)}}}}}},function(e,t,n){"use strict";function i(e,t,n){var i,o,r;void 0===t&&(t=50),void 0===n&&(n={});var c=null!=(i=n.isImmediate)&&i,s=null!=(o=n.callback)&&o,l=n.maxWait,u=Date.now(),a=[];function f(){if(void 0!==l){var e=Date.now()-u;if(e+t>=l)return l-e}return t}var d=function(){var t=[].slice.call(arguments),n=this;return new Promise((function(i,o){var l=c&&void 0===r;if(void 0!==r&&clearTimeout(r),r=setTimeout((function(){if(r=void 0,u=Date.now(),!c){var i=e.apply(n,t);s&&s(i),a.forEach((function(e){return(0,e.resolve)(i)})),a=[]}}),f()),l){var d=e.apply(n,t);return s&&s(d),i(d)}a.push({resolve:i,reject:o})}))};return d.cancel=function(e){void 0!==r&&clearTimeout(r),a.forEach((function(t){return(0,t.reject)(e)})),a=[]},d}n.r(t),n.d(t,"debounce",(function(){return i}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return n=>{e.clear(),t.setCursor(t.coordsChar({left:n.clientX,top:n.clientY})),t.focus()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findLineWidgetAtLine=t.isCursorOutRange=t.isRangeSelected=void 0,t.isRangeSelected=function(e,t,n){let i=!1;for(let o of n.getDoc().listSelections())if(!(e.line<o.from().line||e.line===o.from().line&&e.ch<o.from().ch||t.line>o.to().line||t.line===o.to().line&&t.ch>o.to().ch)){i=!0;break}return i},t.isCursorOutRange=function(e,t,n){return e.line<t.line||e.line>n.line||e.line===t.line&&e.ch<t.ch||e.line===n.line&&e.ch>n.ch},t.findLineWidgetAtLine=function(e,t,n){const i=e.lineInfo(t);if(i.widgets)for(const e of i.widgets)if(e.className===n)return e;return null}}]).default;